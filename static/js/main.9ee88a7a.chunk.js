(this.webpackJsonpgigchasers=this.webpackJsonpgigchasers||[]).push([[0],{103:function(e,t,a){e.exports=a.p+"static/media/logo.0b76fcc5.jpg"},258:function(e,t,a){e.exports=a(600)},492:function(e,t,a){},494:function(e,t,a){},600:function(e,t,a){"use strict";a.r(t);a(259),a(185),a(308);var n=a(1),s=a.n(n),r=a(65),c=a.n(r),l=(a(492),a(493),a(4)),i=a(11),o=a(34),m=(a(494),a(6)),u=a.n(m),d=a(8),p=a(49),h=a(50),f=a(59),b=a.n(f),v={name:"Gigchasers Admin",description:"Gigchasers admin dashboard",version:"1.0",hostname:"https://contractor-app-test-api.herokuapp.com/v1",Google:{mapKey:"AIzaSyDJYsVNmPa73T-okzgJTs3UKiUReJ8iHsU"}},E=a(79),g=a.n(E),x="app.user.session",N="app.data";function y(e){return w.apply(this,arguments)}function w(){return(w=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g.a.config({driver:[g.a.INDEXEDDB,g.a.LOCALSTORAGE,g.a.WEBSQL],name:"".concat(t.config.name," v").concat(t.config.version),version:1,storeName:"adminstore",description:"Storage for Contractor application administrative interface"}),e.next=3,g.a.ready();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=g.a,O=a(255),k=a(254),C=a(161),S=(a(495),a(249));C.a.initializeApp({apiKey:"AIzaSyDjXx1AqIQnkyKkCPh8HZKZYyiKGfiLcbc",authDomain:"contracting-app.firebaseapp.com",databaseURL:"https://contracting-app.firebaseio.com",projectId:"contracting-app",storageBucket:"contracting-app.appspot.com",messagingSenderId:"557426956160",appId:"1:557426956160:web:c1393a9710ed0e40151365"});var P=C.a.firestore(),z=new S.GeoFirestore(P);P.enablePersistence({synchronizeTabs:!0});var D=function(e){Object(O.a)(a,e);var t=Object(k.a)(a);function a(e,n){var s;return Object(p.a)(this,a),(s=t.call(this,e,n)).token=void 0,s.jobType=void 0,s.activeTask=void 0,s.lastPasswordChanged=void 0,s.token=e.token,s.jobType=e.jobType,s.activeTask=e.activeTask,s.lastPasswordChanged=e.lastPasswordChanged,s}return Object(h.a)(a,[{key:"profileImageURL",get:function(){return this.profilePhoto}}]),Object(h.a)(a,null,[{key:"getUser",value:function(){var e=Object(d.a)(u.a.mark((function e(t,n,s){var r,c,l,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.initiateNetworkRequest("/users/".concat(n),{method:"GET",referrerPolicy:"no-referrer",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(s)}});case 3:if((r=e.sent).ok){e.next=22;break}return e.t0=Error,e.next=8,r.json();case 8:if(e.t3=c=e.sent,e.t2=null===e.t3,e.t2){e.next=12;break}e.t2=void 0===c;case 12:if(!e.t2){e.next=16;break}e.t4=void 0,e.next=17;break;case 16:e.t4=c.message;case 17:if(e.t1=e.t4,e.t1){e.next=20;break}e.t1="Failed to fetch user data!";case 20:throw e.t5=e.t1,new e.t0(e.t5);case 22:return e.next=24,r.json();case 24:return l=e.sent,(i=new a(l,!0)).id=n,i.token=s,i.profilePhoto=a.getPhotoURL(t,n),e.abrupt("return",i);case 32:throw e.prev=32,e.t6=e.catch(0),e.t6;case 35:case"end":return e.stop()}}),e,null,[[0,32]])})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"getExternalUser",value:function(){var e=Object(d.a)(u.a.mark((function e(t,n){var s,r,c,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.initiateNetworkRequest("/users/".concat(n),{method:"GET",referrerPolicy:"no-referrer",headers:{"Content-Type":"application/json"}},!0);case 3:if((s=e.sent).ok){e.next=22;break}return e.t0=Error,e.next=8,s.json();case 8:if(e.t3=r=e.sent,e.t2=null===e.t3,e.t2){e.next=12;break}e.t2=void 0===r;case 12:if(!e.t2){e.next=16;break}e.t4=void 0,e.next=17;break;case 16:e.t4=r.message;case 17:if(e.t1=e.t4,e.t1){e.next=20;break}e.t1="Failed to fetch user data!";case 20:throw e.t5=e.t1,new e.t0(e.t5);case 22:return e.next=24,s.json();case 24:return c=e.sent,(l=new a(c,!0)).id=n,l.profilePhoto=a.getPhotoURL(t,n),e.abrupt("return",l);case 31:return e.prev=31,e.t6=e.catch(0),console.log("failed to fetch user data",e.t6),e.abrupt("return",new a({}));case 35:case"end":return e.stop()}}),e,null,[[0,31]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getComments",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,P.collection("comments").doc(t).collection("messages").get();case 4:return a=e.sent,n=[],a.forEach((function(e){var t=e.text,a=e.first_name,s=e.last_name;return n.push({text:t,first_name:a,last_name:s})})),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"listenForNotifications",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,n=P.collection("notifications"),s=n.orderBy("dateCreated","desc").limit(a).onSnapshot(function(){var e=Object(d.a)(u.a.mark((function e(a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a.forEach((function(e){var t,a=e.data();a.id=e.id,(null===(t=a.location)||void 0===t?void 0:t.address)&&(a.location_address=a.location.address),n.push(a)})),t(null,n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return t(e,null)}));return s}},{key:"getPhotoURL",value:function(e,t){return"".concat(e.config.hostname,"/images/").concat(t,".jpg")}}]),a}((function e(t,a){Object(p.a)(this,e),this.id=void 0,this.role=void 0,this.firstName=void 0,this.lastName=void 0,this.occupation=void 0,this.city=void 0,this.state=void 0,this.starRate=5,this.email=void 0,this.password=void 0,this.phoneNumber=void 0,this.profilePhoto=void 0,this.profileBio=void 0,this.dateCreated=void 0,this.accountStatus="Pending",this.workHistory=[],this.educationalBackground=[],this.skills=[],this.licenses=[],a?(this.role=t.role,this.firstName=t.first_name,this.lastName=t.last_name,this.occupation=t.occupation,this.starRate=t.star_rate,this.dateCreated=t.date_created,this.city=t.city,this.email=t.email,this.accountStatus=t.account_status,this.educationalBackground=t.educational_background,this.phoneNumber=t.phone_number,this.profilePhoto=t.profile_photo,this.state=t.state,this.skills=t.skills):(this.role=t.role,this.firstName=t.firstName,this.lastName=t.lastName,this.occupation=t.occupation,this.starRate=t.starRate,this.dateCreated=t.dateCreated,this.city=t.city,this.email=t.email,this.accountStatus=t.accountStatus,this.educationalBackground=t.educationalBackground,this.phoneNumber=t.phoneNumber,this.profilePhoto=t.profilePhoto,this.state=t.state,this.skills=t.skills),this.id=t.id})),T=new D({});T.firstName="Johnathan",T.lastName="Doe",T.id="unique",T.email="a@example.com",T.profileBio="Lorem ipsum dolor sit amet consectetur adipisicing elit. Ullam vero iure, ducimus, explicabo vel nesciunt eveniet, enim quis quos ex autem!",T.jobType="onsite",T.phoneNumber="080838111111",T.starRate=4.2,T.lastPasswordChanged=Date.now(),T.dateCreated=new Date("20/07/2020"),T.skills=["Farming","Poultry"];var _=a(86),A=a(20),M=a.n(A),I=P.collection("chats"),R=function(){function e(){Object(p.a)(this,e),this.content=void 0,this.sender=void 0}return Object(h.a)(e,[{key:"isSameUser",value:function(e){return e.sender===this.sender}}],[{key:"isDifferentDay",value:function(e,t){if(!t)return M()(e.createdAt);var a=M()(e.createdAt),n=M()(t.createdAt);return a.day()!==n.day()&&a}},{key:"generateID",value:function(e,t){return e>t?e+t:t+e}},{key:"serialize",value:function(e){var t,a,n,s;return Object(l.a)(Object(l.a)({},e),{},{user:{_id:(null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.id)||null,avatar:(null===e||void 0===e||null===(a=e.user)||void 0===a?void 0:a.profilePhoto)||null,name:"".concat(null===(n=e.user)||void 0===n?void 0:n.firstName," ").concat(null===(s=e.user)||void 0===s?void 0:s.lastName)}})}},{key:"sendMessage",value:function(){var t=Object(d.a)(u.a.mark((function t(a,n,s){var r,c,l,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s){t.next=2;break}throw new Error("Cannot send empty message!");case 2:return n.initialized?r=I.doc(n.id):(l=e.generateID(null===(c=a.user)||void 0===c?void 0:c.id,n.recipient.id),r=I.doc(l)),i=r.collection("messages").doc(),s._id=i.id,s.createdAt=_.a.firestore.FieldValue.serverTimestamp(),t.next=8,P.runTransaction(function(){var t=Object(d.a)(u.a.mark((function t(c){var l;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.set(r,{id:r.id,users:[a.user.id,n.recipient.id],initialized:!0,last_message:{text:s.text,createdAt:s.createdAt,read:!1,user:null===(l=a.user)||void 0===l?void 0:l.id}},{merge:!0});case 2:return t.next=4,c.set(i,e.serialize(s));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 8:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}()},{key:"listenForChats",value:function(e,t){var a;return I.where("users","array-contains",null===(a=e.user)||void 0===a?void 0:a.id).where("initialized","==",!0).orderBy("last_message.createdAt","desc").onSnapshot(function(){var e=Object(d.a)(u.a.mark((function e(a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a.forEach((function(e){n.push(e)})),t(null,n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return t(e,null)}))}},{key:"listenForChatMessages",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50,s=I.doc(t.id).collection("messages").orderBy("createdAt","desc"),r=s.limit(n).onSnapshot(function(){var n=Object(d.a)(u.a.mark((function n(s){var r;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=[],s.forEach((function(a){var n,s=a.data();s.id=a.id,s.user._id===(null===(n=e.user)||void 0===n?void 0:n.id)?s.user=e.user:s.user=t.recipient,s.createdAt=s.createdAt.toDate(),r.unshift(s)})),a(null,r);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),(function(e){return a(e,null)}));return r}}]),e}(),L={lastUserName:""},Y=new(function(){function e(t){var a=this;Object(p.a)(this,e),this.config=void 0,this.user=void 0,this.ready=void 0,this.settings=L,this.logoutListener=void 0,this.loginListener=void 0,this.config=t,this.ready=new Promise(function(){var e=Object(d.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.init();case 3:t(!0),e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",n(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}())}return Object(h.a)(e,[{key:"init",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(this);case 2:return e.prev=2,e.next=5,j.getItem(N);case 5:(t=e.sent)&&(this.settings=t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.info(e.t0,"No app data persisted!");case 12:return e.prev=12,e.next=15,this.inflateUser();case 15:this.loginListener&&this.loginListener(),e.next=21;break;case 18:e.prev=18,e.t1=e.catch(12),console.log(e.t1);case 21:return e.abrupt("return",!0);case 22:case"end":return e.stop()}}),e,this,[[2,9],[12,18]])})));return function(){return e.apply(this,arguments)}}()},{key:"signedIn",value:function(){var e;return this.user&&(null===(e=this.user)||void 0===e?void 0:e.token)}},{key:"updateSettings",value:function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Empty options provided!");case 2:if(JSON.stringify(t)!==JSON.stringify(this.settings)){e.next=4;break}return e.abrupt("return");case 4:return this.settings=Object(l.a)(Object(l.a)({},this.settings),t),e.next=7,j.setItem(N,this.settings);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"initiateNetworkRequest",value:function(){var e=Object(d.a)(u.a.mark((function e(t,a){var n,s,r,c,i,o,m,d,p,h=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>2&&void 0!==h[2]&&h[2],c=!(h.length>3&&void 0!==h[3])||h[3],i=Object(l.a)(Object(l.a)({},null===a||void 0===a?void 0:a.headers),{},{Accept:"application/json",Authorization:r?"Bearer ".concat(null===(n=this.user)||void 0===n?void 0:n.token):null===a||void 0===a||null===(s=a.headers)||void 0===s?void 0:s.Authorization}),c&&(i["Content-Type"]="application/json"),o=Object(l.a)(Object(l.a)({},a),{},{referrerPolicy:"no-referrer",mode:"cors",headers:i}),e.next=7,fetch("".concat(this.config.hostname).concat(t),o);case 7:if(401!==(m=e.sent).status){e.next=28;break}if(this.user){e.next=11;break}throw new Error("Unauthenticated access not allowed!");case 11:return e.prev=11,e.next=14,this.reauthenticate();case 14:return d=e.sent,p=d.token,this.user.token=p,o&&o.headers&&o.headers.Authorization&&(o.headers.Authorization="Bearer ".concat(p)),e.next=20,this.initiateNetworkRequest(t,o);case 20:return e.abrupt("return",e.sent);case 23:return e.prev=23,e.t0=e.catch(11),e.next=27,this.logout();case 27:throw e.t0||new Error("App session expired. Login to continue!");case 28:return e.abrupt("return",m);case 29:case"end":return e.stop()}}),e,this,[[11,23]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"reauthenticate",value:function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Failed to authenticate user!");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"inflateUser",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getItem(x);case 2:if(t=e.sent){e.next=5;break}throw new Error("No session available for user!");case 5:return this.user=new D(t),e.abrupt("return",this.user);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"persistUser",value:function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.user){e.next=2;break}throw new Error("No user created!");case 2:return e.next=4,j.setItem(x,this.user);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"validateNumber",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Phone number must be provided!");case 2:if((t=t.trim())&&b.a.isMobilePhone(t)){e.next=5;break}throw new Error("Invalid phone number provided!");case 5:if(t.startsWith("+")){e.next=7;break}throw new Error("Phone number must begin with '+' and contain country code!");case 7:return e.next=9,this.initiateNetworkRequest("/users/phone/".concat(encodeURIComponent(t)),{method:"GET"});case 9:if((a=e.sent).ok){e.next=28;break}return e.t0=Error,e.next=14,a.json();case 14:if(e.t3=n=e.sent,e.t2=null===e.t3,e.t2){e.next=18;break}e.t2=void 0===n;case 18:if(!e.t2){e.next=22;break}e.t4=void 0,e.next=23;break;case 22:e.t4=n.message;case 23:if(e.t1=e.t4,e.t1){e.next=26;break}e.t1="Verification failed!";case 26:throw e.t5=e.t1,new e.t0(e.t5);case 28:return e.next=30,a.json();case 30:if(e.sent.valid){e.next=33;break}throw new Error("Invalid phone number (ensure phone number is associated with a user)!");case 33:return e.abrupt("return",!0);case 34:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"triggerVerification",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,s,r=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.length>1&&void 0!==r[1]?r[1]:"sms",t){e.next=3;break}throw new Error("Phone number must be provided!");case 3:if((t=t.trim())&&b.a.isMobilePhone(t)){e.next=6;break}throw new Error("Invalid phone number provided!");case 6:if(t.startsWith("+")){e.next=8;break}throw new Error("Phone number must begin with '+' and contain country code!");case 8:return e.next=10,this.initiateNetworkRequest("/users/sms_registration",{method:"POST",body:JSON.stringify({phone_number:t,channel:a})});case 10:if((n=e.sent).ok){e.next=29;break}return e.t0=Error,e.next=15,n.json();case 15:if(e.t3=s=e.sent,e.t2=null===e.t3,e.t2){e.next=19;break}e.t2=void 0===s;case 19:if(!e.t2){e.next=23;break}e.t4=void 0,e.next=24;break;case 23:e.t4=s.message;case 24:if(e.t1=e.t4,e.t1){e.next=27;break}e.t1="Verification failed!";case 27:throw e.t5=e.t1,new e.t0(e.t5);case 29:return e.abrupt("return",!0);case 30:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(d.a)(u.a.mark((function e(t,a,n){var s,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.validateLogin(t,a,n);case 3:return e.next=5,this.initiateNetworkRequest("/users/login",{method:"POST",referrerPolicy:"no-referrer",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({phone_number:t,code:a,password:n})});case 5:if((s=e.sent).ok){e.next=24;break}return e.t0=Error,e.next=10,s.json();case 10:if(e.t3=r=e.sent,e.t2=null===e.t3,e.t2){e.next=14;break}e.t2=void 0===r;case 14:if(!e.t2){e.next=18;break}e.t4=void 0,e.next=19;break;case 18:e.t4=r.message;case 19:if(e.t1=e.t4,e.t1){e.next=22;break}e.t1="Login failed!";case 22:throw e.t5=e.t1,new e.t0(e.t5);case 24:return e.next=26,s.json();case 26:if((c=e.sent).success){e.next=29;break}throw new Error("Login failed!");case 29:return e.next=31,D.getUser(this,c.userName,c.token);case 31:return this.user=e.sent,this.user.role,e.next=35,this.persistUser();case 35:return this.loginListener&&this.loginListener(),e.abrupt("return",this.user);case 39:throw e.prev=39,e.t6=e.catch(0),e.t6;case 42:case"end":return e.stop()}}),e,this,[[0,39]])})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"validateLogin",value:function(){var e=Object(d.a)(u.a.mark((function e(t,a,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n&&a){e.next=2;break}throw new Error("Credentials not provided!");case 2:if((t=t.trim())&&b.a.isMobilePhone(t)){e.next=5;break}throw new Error("Invalid phone number provided!");case 5:if(t.startsWith("+")){e.next=7;break}throw new Error("Phone number must begin with '+' and contain country code!");case 7:if(b.a.matches(n,/.{6,}/i)){e.next=9;break}throw new Error("Invalid password provided (Password must be more than 6 characters)!");case 9:if(b.a.matches(a,/[0-9]{4}/)){e.next=11;break}throw new Error("Invalid code provided (provided code must have 4 digits)!");case 11:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"addAdmin",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.validateRegister(t);case 3:return e.next=5,this.initiateNetworkRequest("/users/new",{method:"POST",body:JSON.stringify(Object(l.a)(Object(l.a)({},t),{},{role:"admin",account_status:"pending"}))});case 5:if((a=e.sent).ok){e.next=21;break}return e.t0=Error,e.next=10,a.json();case 10:if(e.t2=n=e.sent,e.t1=null===e.t2,e.t1){e.next=14;break}e.t1=void 0===n;case 14:if(!e.t1){e.next=18;break}e.t3=void 0,e.next=19;break;case 18:e.t3=n.message;case 19:throw e.t4=e.t3,new e.t0(e.t4);case 21:return e.next=23,a.json();case 23:return s=e.sent,e.abrupt("return",s);case 27:throw e.prev=27,e.t5=e.catch(0),e.t5;case 30:case"end":return e.stop()}}),e,this,[[0,27]])})));return function(t){return e.apply(this,arguments)}}()},{key:"validateRegister",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,s,r,c,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.email,n=t.password,s=t.first_name,r=t.last_name,c=t.password_verify,l=t.phone_number,a&&n){e.next=3;break}throw new Error("Credentials not provided!");case 3:if(n===c){e.next=5;break}throw new Error("Passwords do not match!");case 5:if(a=a.trim(),s=s.trim(),r=r.trim(),s&&r){e.next=10;break}throw new Error("Firstname and lastname must be provided!");case 10:if(a&&b.a.isEmail(a)){e.next=12;break}throw new Error("Invalid username provided!");case 12:if(l&&b.a.isMobilePhone(l)){e.next=14;break}throw new Error("Invalid phone number provided!");case 14:if(l.startsWith("+")){e.next=16;break}throw new Error("Phone number must begin with '+' and contain country code!");case 16:if(b.a.matches(n,/.{6,}/i)){e.next=18;break}throw new Error("Invalid password provided (Password must be more than 6 characters)!");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return new R,this.user=void 0,e.next=4,j.removeItem(x);case 4:this.logoutListener&&this.logoutListener();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}())(v),F=Object(n.createContext)(Y),q=Object(n.createContext)({setSignedIn:function(e){},signedIn:null,setAppReady:function(e){},showToolbar:function(e){},showFooter:function(e){}}),B="/register",J="/login",U="/messages",H="/messages/:id?",V="/",G="/dashboard",K="/invoices",W="/jobs",X="/jobs/active",$="/jobs/inactive",Q={active:"/jobs/active/:id?",inactive:"/jobs/inactive/:id?"},Z="/privacyPolicy",ee="/terms",te="/profile",ae="/profile/:id",ne="/help",se="/logout",re="/settings",ce="/settings",le="/settings/payment",ie="/settings/features",oe="/settings/legal",me=a(13);function ue(){var e=Object(n.useContext)(F);return s.a.createElement("footer",{className:"footer is-unselectable"},s.a.createElement("div",{className:"content has-text-centered is-size-7-touch"},s.a.createElement("p",null,"\xa9 ",e.config.name," ",(new Date).getFullYear(),". All Rights Reserved | ",s.a.createElement(me.b,{to:Z},"Privacy Policy")," | ",s.a.createElement(me.b,{to:ee},"Terms of Service")," ")))}var de=a(87);function pe(e){var t=e.children,a=Object(de.a)(e,["children"]),r=Object(n.useContext)(F),c=Object(n.useContext)(q),l=Object(o.h)();return s.a.createElement(o.b,a,r.signedIn()&&c.signedIn?t:s.a.createElement(o.a,{to:{pathname:J,state:{from:l}}}))}function he(e){var t=e.children,a=Object(n.useContext)(F),r=Object(n.useContext)(q),c=Object(o.h)();if(a.signedIn()&&r.signedIn){var l=(c.state||{from:{pathname:"/"}}).from;return s.a.createElement(o.a,{to:l})}return t}var fe,be={toolbar:{boxShadow:"-2px 2px 3px 0px #8888"},appLogoIcon:{fontSize:"2em",marginRight:".5em",color:"blue"},appLogoText:{fontSize:"1.2em",fontWeight:"bold"},jobProgressBar:{height:".4em"}},ve=a(9),Ee=a(103),ge=a.n(Ee);function xe(){var e,t,a,r=Object(n.useState)({showMenu:!1}),c=Object(i.a)(r,2),o=c[0],m=c[1],u=Object(n.useContext)(F);Object(n.useContext)(q);return s.a.createElement("nav",{className:"navbar",role:"navigation",style:be.toolbar,"aria-label":"main navigation"},s.a.createElement("div",{className:"navbar-brand"},s.a.createElement(me.b,{className:"navbar-item",to:V},s.a.createElement("img",{src:ge.a,width:"112",height:"28"})),s.a.createElement("a",{role:"button",className:"navbar-burger burger ".concat(o.showMenu?"is-active":""),"aria-label":"menu","aria-expanded":"false","data-target":"navbar",onClick:function(){clearTimeout(fe),o.showMenu?m(Object(l.a)(Object(l.a)({},o),{},{showMenu:!1})):(m(Object(l.a)(Object(l.a)({},o),{},{showMenu:!0})),fe=setTimeout((function(){m(Object(l.a)(Object(l.a)({},o),{},{showMenu:!1}))}),2e4))}},s.a.createElement("span",{"aria-hidden":"true"}),s.a.createElement("span",{"aria-hidden":"true"}),s.a.createElement("span",{"aria-hidden":"true"}))),s.a.createElement("div",{className:"navbar-menu ".concat(o.showMenu?"is-active":"")},s.a.createElement("div",{className:"navbar-start"},s.a.createElement(me.c,{to:G,exact:!0,activeClassName:"is-active",className:"navbar-item is-tab"},"Dashboard"),s.a.createElement(me.c,{to:U,activeClassName:"is-active",className:"navbar-item is-tab"},"Messages"),s.a.createElement(me.c,{to:K,activeClassName:"is-active",className:"navbar-item is-tab"},"Invoices"),s.a.createElement(me.c,{to:W,activeClassName:"is-active",className:"navbar-item is-tab"},"Jobs")),s.a.createElement("div",{className:"navbar-end"},s.a.createElement("div",{className:"navbar-item"},s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control has-icons-left"},s.a.createElement("input",{className:"input is-rounded",type:"search",placeholder:"Type to search..."}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement(ve.z,{className:"is-size-5"}))))),s.a.createElement("div",{className:"navbar-item has-dropdown is-hoverable"},s.a.createElement("span",{className:"navbar-link"},"".concat(null===(e=u.user)||void 0===e?void 0:e.firstName," ").concat(null===(t=u.user)||void 0===t?void 0:t.lastName)),s.a.createElement("div",{className:"navbar-dropdown"},s.a.createElement(me.b,{to:{pathname:"".concat(te,"/").concat(null===(a=u.user)||void 0===a?void 0:a.id)},className:"navbar-item"},"Profile"),s.a.createElement(me.b,{to:ne,className:"navbar-item"},"Help Center"),s.a.createElement(me.b,{to:se,className:"navbar-item"},"Sign Out"))),s.a.createElement("div",{className:"navbar-item"},s.a.createElement(me.b,{to:re,className:"button is-rounded is-light is-fullwidth"},s.a.createElement(ve.i,null))))))}var Ne=a(251);function ye(e){var t=e.content,a=e.icon,n=e.onDismiss,r=e.children,c=e.text,l=Object(de.a)(e,["content","icon","onDismiss","children","text"]);return s.a.createElement("div",Object.assign({},l,{className:"notification px-4 is-light is-uppercase is-warning has-text-centered ".concat(l.className)}),!!n&&s.a.createElement("button",{onClick:n,className:"delete"}),a||s.a.createElement(ve.o,{className:"has-text-warning-dark is-size-4 mb-2"}),r||(t||s.a.createElement("p",{className:"block has-text-grey is-size-7"},c||"No data")))}function we(){return s.a.createElement("section",{className:"hero is-fullheight is-bold is-flex-centered",style:{alignItems:"stretch",padding:"2em"}},s.a.createElement("div",{className:"hero-body is-flex-centered has-text-centered"},s.a.createElement("div",{className:"column is-4 is-12-mobile"},s.a.createElement("div",{className:"section px-6"},s.a.createElement("progress",{className:"progress is-small is-danger",max:"100"},"loading")))))}function je(e){var t=e.header,a=e.optionsElement,n=e.optionsText,r=e.onOptionsTextClick,c=e.children,l=e.style;return s.a.createElement("div",{className:"card",style:l},s.a.createElement("header",{className:"card-header"},s.a.createElement("p",{className:"card-header-title"},t),s.a.createElement("p",{className:"card-header-icon"},a||s.a.createElement("span",{className:"has-text-link",onClick:r},n))),s.a.createElement("div",{className:"card-content"},s.a.createElement("div",{className:"container is-fluid px-0"},c)))}function Oe(){var e=Object(n.useContext)(F),t=Object(n.useState)(!0),a=Object(i.a)(t,2),s=a[0],r=a[1];return Object(n.useEffect)((function(){s&&new Ne.a({apiKey:e.config.Google.mapKey,version:"weekly",libraries:["places"]}).load().then((function(){return r(!1)}))}),[]),s}var ke=["Alarm Systems/Cameras","Animal Grooming","Auto Mechanic","Baby Sitters/Nanny","Beautician","Cable/Satellite Installation","Car Detailing","Carpenter","Carpet Cleaning","Caterers","Computer Repair","Debris Removal","Demolition","Dump Truck Services","Electrician","Engineering","Event Planner","Flooring","Garage Door Installation/Repair","HVAC (Heating & Air Conditioning)","Healthcare professionals","Hot Shot Delivery & Courier Services","IT Tech Support","Janitorial/Maid/Cleaning Services","Lawn care","Masonry (Brick, Concrete)","Modeling/Acting","Networking Installation","Painter/Finish","Plumber","Roof Repair","Seamstress/Tailor","Shipping Pallets, Containers and Custom Crate Builders","Snow and Ice Removal","Tow Truck and Roadside Assistance","Tree Services","Veterinarian Services","Web Designer","Window Blinds, Shades, Drapes, Curtains and Shutters"],Ce=function(){function e(){Object(p.a)(this,e)}return Object(h.a)(e,null,[{key:"getJobTypes",value:function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ke);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"addNewJob",value:function(){var t=Object(d.a)(u.a.mark((function t(a,n){var s,r,c,i,o,m=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=m.length>2&&void 0!==m[2]?m[2]:[],n.posted_by&&n.job_title&&n.salary&&n.wage&&(n.location||n.location_address)){t.next=3;break}throw new Error("Complete all required fields to continue!");case 3:if(!(n.tasks.length<1)){t.next=5;break}throw new Error("You must add at least 1 task for this job!");case 5:if(!(n.job_title.length<8||n.job_description.length<20)){t.next=7;break}throw new Error("Kindly enter a more meaningful title and description!");case 7:if(!(n.required_count<1)){t.next=9;break}throw new Error("Provide the number of people you require for this job!");case 9:if(!(n.salary<0)){t.next=11;break}throw new Error("Salary must be more than $0!");case 11:if(n.coordinates=new _.a.firestore.GeoPoint(n.location.coords.latitude,n.location.coords.longitude),r=e.db.doc(),c=null,!(s&&s.length>0)){t.next=32;break}return i=new FormData,s.map((function(e){i.append("photo",e)})),t.next=19,a.initiateNetworkRequest("/job/upload",{method:"POST",headers:{"x-job-id":r.id},body:i},!0,!1);case 19:if((o=t.sent).ok){t.next=29;break}return t.t0=Error,t.next=24,o.json();case 24:if(t.t1=t.sent.message,t.t1){t.next=27;break}t.t1="Failed to upload job";case 27:throw t.t2=t.t1,new t.t0(t.t2);case 29:return t.next=31,o.json();case 31:c=t.sent.data;case 32:return n.id=r.id,t.abrupt("return",r.set(Object(l.a)(Object(l.a)({},n),{},{photo_files:c})));case 34:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},{key:"cancelJob",value:function(){var t=Object(d.a)(u.a.mark((function t(a,n){var s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("complete"!==n.status){t.next=2;break}throw new Error("You cannot cancel a completed job!");case 2:if("accepted"!==n.status){t.next=7;break}return t.next=5,a.initiateNetworkRequest("users/cancelJob",{method:"DELETE",body:JSON.stringify({jobID:n.id,role:null===(s=a.user)||void 0===s?void 0:s.role})},!0);case 5:t.next=9;break;case 7:return t.next=9,e.db.doc(n.id).delete();case 9:return t.abrupt("return",!0);case 10:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},{key:"getInactiveJobs",value:function(){var t=Object(d.a)(u.a.mark((function t(a){var n,s,r=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:20,s=e.db.where("status","==","complete"),t.abrupt("return",s.native.orderBy("date_created","desc").limit(n).get().then(function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],t.forEach((function(e){var t,n=e.data();n.id=e.id,(null===(t=n.location)||void 0===t?void 0:t.address)&&(n.location_address=n.location.address),a.push(n)})),e.abrupt("return",Promise.resolve(a));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getActiveJobs",value:function(){var t=Object(d.a)(u.a.mark((function t(a){var n,s,r=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:20,s=e.db.where("status","in",["available","in review","accepted","in progress"]),t.abrupt("return",s.native.orderBy("date_created","desc").limit(n).get().then(function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],t.forEach(function(){var e=Object(d.a)(u.a.mark((function e(t){var n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(s=t.data()).id=t.id,(null===(n=s.location)||void 0===n?void 0:n.address)&&(s.location_address=s.location.address),a.push(s);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",Promise.resolve(a));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"listenForActiveAndPendingJobs",value:function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,s=e.db.where("status","in",["available","in review","accepted","in progress"]),r=s.native.orderBy("date_created","desc").limit(n).onSnapshot(function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],t.forEach((function(e){var t,a=e.data();a.id=e.id,(null===(t=a.location)||void 0===t?void 0:t.address)&&(a.location_address=a.location.address),n.push(a)})),a(null,n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return a(e,null)}));return r}},{key:"listenForActiveJobs",value:function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:9,s=e.db.where("status","in",["in review","accepted","in progress"]),r=s.native.orderBy("date_created","desc").limit(n).onSnapshot(function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],t.forEach((function(e){var t,a=e.data();a.id=e.id,(null===(t=a.location)||void 0===t?void 0:t.address)&&(a.location_address=a.location.address),n.push(a)})),a(null,n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return a(e,null)}));return r}},{key:"listenForActiveJobsWithChangeHandler",value:function(t,a){var n=a.added,s=a.modified,r=a.removed;return e.db.where("status","in",["available","in review","accepted","in progress"]).limit(6).onSnapshot(function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.native.docChanges().forEach((function(e){switch(e.type){case"added":n(e.doc);break;case"modified":s(e.doc);break;case"removed":r(e.doc)}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"getPhotoURL",value:function(e,t){return"".concat(e.config.hostname,"/images/").concat(t,".jpg")}}]),e}();Ce.db=z.collection("jobs");var Se=a(35),Pe=a(252),ze=Object(n.memo)((function(e){var t=e.job,a=t.coordinates,r=t.job_title,c=e.vertical,o=void 0===c||c,m=e.zoom,u=void 0===m?18:m,d=e.zoomControl,p=void 0===d||d,h=Oe(),f=Object(n.useRef)(),b=Object(n.useState)(null),v=Object(i.a)(b,2),E=v[0],g=v[1],x=Object(n.useState)(),N=Object(i.a)(x,2),y=N[0],w=N[1];return Object(n.useEffect)((function(){if(f.current&&!h){var e=new google.maps.Map(f.current,{center:{lat:a.latitude,lng:a.longitude},gestureHandling:"none",zoomControl:p,zoom:u,mapTypeControl:!1,fullscreenControl:!0});g(e),w(new google.maps.Marker({map:e,position:{lat:a.latitude,lng:a.longitude},animation:google.maps.Animation.DROP,title:r}))}}),[h,f]),Object(n.useEffect)((function(){a&&(null===E||void 0===E||E.setCenter({lat:a.latitude,lng:a.longitude}),null===y||void 0===y||y.setPosition({lat:a.latitude,lng:a.longitude}))}),[a]),h?s.a.createElement("div",Object.assign({},e,{className:"".concat(e.className," is-flex is-flex-centered px-6"),style:Object(l.a)({width:"100%",height:"100%",backgroundColor:"#dadada"},null===e||void 0===e?void 0:e.style)}),s.a.createElement("progress",{style:{height:"0.2rem"},className:"progress is-small my-6 mx-6",max:"100"},"loading")):s.a.createElement("div",Object.assign({id:"mapview"},e,{style:Object(l.a)(Object(l.a)({},null===e||void 0===e?void 0:e.style),{},{width:"100%",height:"100%",backgroundColor:"#dadada",minHeight:o?"50vh":"12em"},null===e||void 0===e?void 0:e.style),ref:f}))}));function De(e){var t,a,r,c=e.job,l=Object(n.useContext)(F),i=M()(c.date_created.toDate());return s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-content"},s.a.createElement("div",{className:"columns mb-0"},s.a.createElement("div",{className:"column is-6 has-text-centered-touch has-text-left"},s.a.createElement("p",{style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}},c.job_title)),s.a.createElement("div",{className:"column has-text-centered-touch has-text-right"},s.a.createElement("p",null,c.location_address))),s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column has-text-left"},s.a.createElement("p",null,c.job_type)))),s.a.createElement("div",{className:"card-footer"},s.a.createElement("div",{className:"card-footer-item"},s.a.createElement("div",{className:"columns px-4 is-vcentered is-mobile",style:{flexDirection:"column",flex:1}},s.a.createElement("div",{className:"column is-12"},s.a.createElement("div",{className:"columns is-vcentered is-mobile"},s.a.createElement("div",{className:"column is-narrow is-flex",style:{justifyContent:"center"}},s.a.createElement("figure",{className:"image is-flex is-32x32"},s.a.createElement("img",{className:"is-rounded",src:Ce.getPhotoURL(l,null===(t=c.user)||void 0===t?void 0:t.id)}))),s.a.createElement("div",{className:"column is-narrow"},s.a.createElement("div",{className:"title is-6"},"".concat(null===(a=c.user)||void 0===a?void 0:a.firstName," ").concat(null===(r=c.user)||void 0===r?void 0:r.lastName))),s.a.createElement("div",{className:"column has-text-right"},i.calendar({sameElse:"DD/MMM/YYYY"})))),s.a.createElement("div",{className:"column is-12"},s.a.createElement("progress",{className:"progress is-info",style:be.jobProgressBar,value:0,max:"100"},0))))))}function Te(e){var t,a,r,c,l=e.job,i=e.to,o=Object(n.useContext)(F);if("available"===l.status)return s.a.createElement(_e,{job:l,to:i,key:"pending-".concat(l.id)});var m,u=M()(l.date_created.toMillis());return l.date_completed&&(m=M()(l.date_completed.toMillis())),s.a.createElement(me.c,{activeClassName:"is-active",to:i,style:{overflowX:"auto"},className:"job-item is-size-7 px-1 py-1 is-block card is-shadowless is-radiusless has-background-white"},s.a.createElement("div",{className:"card-content py-2 px-2"},s.a.createElement("div",{className:"container is-paddingless"},s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-6 has-text-centered-touch has-text-left"},s.a.createElement("p",{style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}},l.job_type)),s.a.createElement("div",{className:"column has-text-centered-touch has-text-right has-text-grey"},s.a.createElement("p",null,l.location_address))),s.a.createElement("div",{className:"columns is-vcentered is-mobile"},s.a.createElement("div",{className:"column is-narrow is-flex",style:{justifyContent:"center"}},s.a.createElement("figure",{className:"image is-flex is-48x48"},s.a.createElement("img",{className:"is-rounded",src:Ce.getPhotoURL(o,null===(t=l.user)||void 0===t?void 0:t.id)}))),s.a.createElement("div",{className:"column px-0 has-text-left"},s.a.createElement("div",{className:"title is-7 mb-1"},"".concat((null===(a=l.user)||void 0===a?void 0:a.firstName)||"John"," ").concat((null===(r=l.user)||void 0===r?void 0:r.lastName)||"Doe")),s.a.createElement("p",{className:"is-size-6"},s.a.createElement("span",{className:"icon has-text-info"},s.a.createElement(ve.C,null)),null===(c=l.user)||void 0===c?void 0:c.starRate)),s.a.createElement("div",{className:"column has-text-grey has-text-right"},u.calendar({sameElse:"DD/MMM/YYYY"})))),s.a.createElement("div",{className:"columns mb-0 is-vcentered has-text-grey is-mobile",style:{flexDirection:"column",flex:1}},s.a.createElement("div",{className:"column is-12"},l.progress&&l.progress>=100?s.a.createElement("p",null,"Completed ",m.calendar({sameElse:"DD/MMM/YYYY"})):s.a.createElement("progress",{className:"progress is-info",style:be.jobProgressBar,value:l.progress||0,max:"100"},l.progress))),s.a.createElement("div",{className:"content has-text-left has-text-grey is-flex is-flex-align-items-center"},s.a.createElement("span",{className:"icon has-text-info is-size-6"},s.a.createElement(ve.h,null)),s.a.createElement("span",{style:{lineHeight:"2em"}},l.job_title))))}function _e(e){var t=e.job,a=e.to;Object(n.useContext)(F);return s.a.createElement(me.c,{activeClassName:"is-active",to:a,style:{overflowX:"auto"},className:"job-item is-size-7 px-1 py-1 is-block card is-shadowless is-radiusless has-background-white"},s.a.createElement("div",{className:"card-content py-2 px-2"},s.a.createElement("div",{className:"container is-paddingless"},s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-6 has-text-centered-touch has-text-left"},s.a.createElement("p",{style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}},t.job_type)),s.a.createElement("div",{className:"column has-text-centered-touch has-text-right has-text-grey"},s.a.createElement("p",null,t.location_address))),s.a.createElement("div",{className:"columns is-vcentered is-mobile"},s.a.createElement("div",{className:"column has-text-left"},s.a.createElement("p",{className:"is-size-7 is-flex is-vcentered"},s.a.createElement("span",{className:"icon is-size-6 has-text-info spinner"},s.a.createElement(Pe.a,null)),s.a.createElement("span",{style:{lineHeight:"2em"}},"Pending"))),s.a.createElement("div",{className:"column has-text-right"},s.a.createElement("p",null,"Searching for deployee"))))))}function Ae(e){var t=e.job,a=e.className,n=e.onCancel;if(!t)return s.a.createElement("div",{className:"".concat(a," card job-detail"),style:{flexDirection:"column"}},s.a.createElement("div",{className:"card-content is-paddingless is-flex-centered has-text-grey my-6"},s.a.createElement("span",{className:"my-4"},s.a.createElement(ve.t,{fill:"#811",style:{height:"8rem",width:"8rem"}})),s.a.createElement("p",{className:"is-uppercase is-size-6 has-text-weight-bold"},"View and manage job listings")));var r=M()(t.date_created.toMillis());return s.a.createElement("div",{className:"".concat(a," card job-detail is-size-6"),style:{flexDirection:"column"}},s.a.createElement("div",{className:"card-content is-paddingless"},s.a.createElement("div",{className:"level py-4 mb-0",style:{zIndex:1}},s.a.createElement("div",{className:"level-item is-size-7"},"POSTED ",r.calendar({sameElse:"DD/MMM/YYYY"})),s.a.createElement("div",{className:"level-item is-size-6 has-text-weight-bold"},t.job_title),s.a.createElement("div",{className:"level-item is-size-7 has-text-grey"},t.id)),s.a.createElement("div",{className:"container is-fluid px-0"},s.a.createElement("div",{className:"columns is-fullheight mx-0 my-0 is-multiline animate__animated animate__fadeIn"},s.a.createElement("div",{className:"column is-8-fullhd is-7-desktop is-12 px-0 pt-0"},s.a.createElement(Me,{onJobCancel:n,job:t})),"available"===t.status||"in review"===t.status?s.a.createElement("div",{style:{borderLeft:"solid 1px #8881"},className:"column is-4-fullhd is-5-desktop is-12 is-flex is-paddingless"},s.a.createElement(ze,{job:t,className:"container pt-4 pb-0 is-flex"})):s.a.createElement("div",{style:{borderLeft:"solid 1px #8881"},className:"column is-4-fullhd is-5-desktop is-12 is-flex"},s.a.createElement(Ie,{job:t}))))))}function Me(e){var t,a,r,c,o,m,p=e.job,h=e.onJobCancel,f=Object(n.useContext)(F),b=Object(n.useState)({loadingCancel:!1}),v=Object(i.a)(b,2),E=v[0],g=v[1],x=Object(Se.useToasts)().addToast;p.date_completed&&(c=Object(A.unix)(p.date_completed.toMillis()/1e3)),p.date_created&&(o=Object(A.unix)(p.date_created.toMillis()/1e3)),c&&o&&(m=c.diff(o,"h",!0));var N=Object(n.useCallback)(Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,window.confirm("Are you sure you want to cancel this job? If Job is accepted, it will return to the job pool. Otherwise, the job will be deleted")){e.next=4;break}return e.abrupt("return");case 4:return g(Object(l.a)(Object(l.a)({},E),{},{loadingCancel:!0})),e.next=7,Ce.cancelJob(f,p);case 7:x("Cancelled job successfully!",{appearance:"success"}),h(p),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),x(e.t0.message||"Failed to cancel job!",{appearance:"error"});case 14:return e.prev=14,g(Object(l.a)(Object(l.a)({},E),{},{loadingCancel:!1})),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,11,14,17]])}))),[p,E]);return s.a.createElement("div",{className:"is-atleast-fullheight is-flex",style:{flexDirection:"column"}},"available"===p.status?s.a.createElement("div",{className:"section has-text-centered is-size-6"},s.a.createElement("span",{className:"px-4 py-4 is-flex is-flex-centered"},"Searching for deployees within ",10," mile radius from you")):"in review"===p.status?s.a.createElement(Re,{job:p}):s.a.createElement(ze,{zoom:15,zoomControl:!1,vertical:!1,job:p,className:"container pb-0 is-flex"}),s.a.createElement("div",{className:"is-flex py-4",style:{flexDirection:"column",justifyContent:"space-between",flex:1}},s.a.createElement("div",{className:"section py-2 pb-3"},s.a.createElement("table",{className:"table is-hoverable is-fullwidth"},s.a.createElement("tbody",{className:"is-flex is-flex-direction-column is-size-7"},s.a.createElement("tr",{className:"is-flex has-text-left"},s.a.createElement("td",{style:{flex:1},className:"has-text-grey"},"TYPE"),s.a.createElement("td",{style:{flex:2},className:" has-text-left"},p.job_type)),s.a.createElement("tr",{className:"is-flex has-text-left"},s.a.createElement("td",{style:{flex:1},className:"has-text-grey"},"LOCATION"),s.a.createElement("td",{style:{flex:2},className:" has-text-left"},p.location_address)),s.a.createElement("tr",{className:"is-flex has-text-left"},s.a.createElement("td",{style:{flex:1},className:"has-text-grey"},"DESCRIPTION"),s.a.createElement("td",{style:{flex:2},className:" has-text-left"},p.job_description)),s.a.createElement("tr",{className:"is-flex has-text-left"},s.a.createElement("td",{style:{flex:1},className:"has-text-grey"},"PAY"),s.a.createElement("td",{style:{flex:2},className:"is-flex-align-items-center is-flex has-text-left"},s.a.createElement("span",null,"$",p.salary),"\xa0",s.a.createElement("span",{className:"has-text-grey-light"},"/",p.wage||"deployment"))),p.tasks&&p.tasks.length>0?s.a.createElement("tr",{className:"is-flex has-text-left"},s.a.createElement("td",{style:{flex:1},className:"has-text-grey"},"TASKS"),s.a.createElement("td",{style:{flex:2},className:" has-text-left"},null===(t=p.tasks)||void 0===t?void 0:t.map((function(e){return s.a.createElement("p",{key:e.text},"- ",e.text)})))):null,s.a.createElement("tr",{className:"is-flex has-text-left"},s.a.createElement("td",{style:{flex:1},className:"has-text-grey"}," START"),s.a.createElement("td",{style:{flex:2},className:"has-text-left"},o.calendar({sameElse:"DD/MMM/YYYY"})||"-")),s.a.createElement("tr",{className:"is-flex has-text-left"},s.a.createElement("td",{style:{flex:1},className:"has-text-grey"},"END"),s.a.createElement("td",{style:{flex:2},className:" has-text-left"},(null===(a=c)||void 0===a?void 0:a.calendar({sameElse:"DD/MMM/YYYY"}))||"-")),s.a.createElement("tr",{className:"is-flex has-text-left"},s.a.createElement("td",{style:{flex:1},className:"has-text-grey"},"TOTAL TIME"),s.a.createElement("td",{style:{flex:2},className:" has-text-left"},(null===(r=m)||void 0===r?void 0:r.toFixed(2))||"-"))))),p.progress&&p.progress>=100?s.a.createElement("button",{className:"button is-info is-uppercase mx-4",style:{alignSelf:"flex-end"}},"View Invoice"):s.a.createElement("button",{disabled:E.loadingCancel,onClick:N,className:"button is-white is-uppercase is-inverted mx-4 ".concat(E.loadingCancel?"is-loading":""),style:{alignSelf:"flex-start",color:"white"}},"Cancel Job")))}function Ie(e){var t,a,r,c,l,i,o,m,u,d,p,h,f,b,v=e.job,E=Object(n.useContext)(F);return v.date_created&&(b=M()(v.date_created.toMillis())),s.a.createElement("div",{className:"container pt-4 pb-0 is-flex",style:{flexDirection:"column"}},s.a.createElement("div",{style:{borderBottom:"solid #aaa4 0.2px"},className:"columns is-vcentered"},s.a.createElement("div",{className:"column is-narrow is-flex",style:{justifyContent:"center"}},s.a.createElement("figure",{className:"image is-80x80 is-flex"},s.a.createElement("img",{className:"is-rounded",src:Ce.getPhotoURL(E,null===(t=v.user)||void 0===t?void 0:t.id),style:{border:"solid #eaeaea 0.5px"},onError:function(e){return e.currentTarget.src=ge.a}}))),s.a.createElement("div",{className:"column"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"columns is-marginless is-vcentered is-mobile"},s.a.createElement("div",{className:"column pb-0 pl-0"},s.a.createElement("p",{className:"is-size-6 has-text-left has-text-weight-bold"},"".concat(null===(a=v.user)||void 0===a?void 0:a.firstName," ").concat(null===(r=v.user)||void 0===r?void 0:r.lastName))),s.a.createElement(me.b,{to:{pathname:"".concat(te,"/").concat(v.user.id),state:{user:v.user}},className:"column is-narrow has-text-right has-text-link pr-0 pb-0 is-size-7"},"View Profile")),s.a.createElement("div",{className:"content has-text-left"},s.a.createElement("p",{className:"is-size-6"},s.a.createElement("span",{className:"icon has-text-info"},s.a.createElement(ve.C,null)),null===(c=v.user)||void 0===c?void 0:c.starRate),s.a.createElement("p",{className:"is-size-7"},null===(l=v.user)||void 0===l?void 0:l.profileBio),s.a.createElement("p",{className:"has-text-left has-text-grey-light is-size-8"},s.a.createElement("span",{className:"is-uppercase"},"member since"),"\xa0 ",M()(null===(i=v.user)||void 0===i?void 0:i.dateCreated).calendar({sameElse:"DD/MMM/YYYY"})))))),s.a.createElement("div",{className:"is-flex py-4",style:{flexDirection:"column",justifyContent:"space-between",flex:1}},s.a.createElement("table",{className:"table is-hoverable is-fullwidth"},s.a.createElement("tbody",{className:"is-size-7"},s.a.createElement("tr",{className:"is-flex has-text-left"},s.a.createElement("td",{style:{flex:1},className:"has-text-grey"},"CONTACT"),s.a.createElement("td",{style:{flex:2},className:"has-text-left"},null===(o=v.user)||void 0===o?void 0:o.phoneNumber)),s.a.createElement("tr",{className:"is-flex has-text-left"},s.a.createElement("td",{style:{flex:1},className:"has-text-grey"},"START TIME"),s.a.createElement("td",{style:{flex:2},className:"has-text-left"},b.calendar({sameElse:"DD/MMM/YYYY"}))),s.a.createElement("tr",{className:"is-flex has-text-left"},s.a.createElement("td",{style:{flex:1},className:"has-text-grey"},"HIGHLIGHTED SKILLS AND LICENSES"),s.a.createElement("td",{style:{flex:2},className:"has-text-left"},(null===(m=v.user)||void 0===m?void 0:m.skills)&&v.user.skills.length>0?null===(u=v.user.skills)||void 0===u?void 0:u.map((function(e){return s.a.createElement("p",null,"- ",e)})):"-")))),s.a.createElement(me.b,{to:{pathname:"".concat(U,"/").concat(R.generateID(null===(d=E.user)||void 0===d?void 0:d.id,null===(p=v.user)||void 0===p?void 0:p.id)),state:{chat:{id:R.generateID(null===(h=E.user)||void 0===h?void 0:h.id,null===(f=v.user)||void 0===f?void 0:f.id),initialized:!1,recipient:v.user,users:[E.user,v.user]}}},className:"button is-info is-uppercase mx-4",style:{alignSelf:"flex-start"}},"Message")))}function Re(e){var t,a,r,c,l,i,o=e.job,m=Object(n.useContext)(F);return o.date_created&&M()(o.date_created.toMillis()),s.a.createElement("div",{className:"section pt-5 is-flex is-clipped",style:{flexDirection:"column"}},s.a.createElement("div",{className:"columns is-paddingless"},s.a.createElement("div",{className:"content column is-narrow is-size-6 has-text-centered px-4"},s.a.createElement("span",{className:"is-flex is-flex-centered"},"Deployee Found")),s.a.createElement("div",{className:"columns column is-vcentered"},s.a.createElement("div",{className:"column is-narrow is-flex",style:{justifyContent:"center"}},s.a.createElement("figure",{className:"image is-80x80 is-flex"},s.a.createElement("img",{className:"is-rounded",src:Ce.getPhotoURL(m,null===(t=o.user)||void 0===t?void 0:t.id),style:{border:"solid #eaeaea 0.5px"},onError:function(e){return e.currentTarget.src=ge.a}}))),s.a.createElement("div",{className:"column"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"columns is-marginless is-vcentered is-mobile"},s.a.createElement("div",{className:"column pb-0 pl-0"},s.a.createElement("p",{className:"is-size-6 has-text-left has-text-weight-bold"},"".concat((null===(a=o.user)||void 0===a?void 0:a.firstName)||"John"," ").concat((null===(r=o.user)||void 0===r?void 0:r.lastName)||"Doe"))),s.a.createElement("div",{className:"column is-narrow has-text-right has-text-info pr-0 pb-0 is-size-7"},"View Profile")),s.a.createElement("div",{className:"content has-text-left"},s.a.createElement("p",{className:"is-size-6"},s.a.createElement("span",{className:"icon has-text-info"},s.a.createElement(ve.C,null)),null===(c=o.user)||void 0===c?void 0:c.starRate),s.a.createElement("p",{className:"is-size-7"},null===(l=o.user)||void 0===l?void 0:l.profileBio),s.a.createElement("p",{className:"has-text-left has-text-grey-light is-size-7"},s.a.createElement("span",{className:"is-uppercase"},"member since"),"\xa0 ",M()(null===(i=o.user)||void 0===i?void 0:i.dateCreated).calendar({sameElse:"DD/MMM/YYYY"}))))))))}Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now();function Le(e){var t=e.className,a=Object(n.useContext)(F),r=Object(n.useState)({jobs:new Array,loading:!1}),c=Object(i.a)(r,2),o=c[0],m=c[1],p=Object(Se.useToasts)().addToast;return Object(n.useEffect)((function(){return m(Object(l.a)(Object(l.a)({},o),{},{loading:!0})),Ce.listenForActiveJobs(a,function(){var e=Object(d.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return m(Object(l.a)(Object(l.a)({},o),{},{loading:!1})),e.abrupt("return",p(t.message||"Failed to get jobs!"));case 3:return e.next=5,Promise.all(n.map(function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("available"===t.status||!t.executed_by){e.next=4;break}return e.next=3,D.getExternalUser(a,t.executed_by);case 3:t.user=e.sent;case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:n=e.sent,m(Object(l.a)(Object(l.a)({},o),{},{jobs:n,loading:!1}));case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())}),[]),s.a.createElement("div",{className:t},o.loading?s.a.createElement("progress",{className:"progress is-small is-info my-6",max:"100"},"loading"):s.a.createElement(s.a.Fragment,null,o.jobs.length<1&&s.a.createElement(ye,{style:{background:"transparent"},text:"No Active Job Available!",icon:s.a.createElement(ve.t,{className:"has-text-warning-dark is-size-4 mb-2"})}),o.jobs.map((function(e){return s.a.createElement(me.b,{key:e.id,to:"".concat(X,"/").concat(e.id),className:"column ".concat(1==o.jobs.length?"is-12":"is-4-fullhd is-6-desktop is-12-touch"," list-item")},s.a.createElement(De,{job:e}))}))))}var Ye=a(58),Fe=Object(n.createContext)({notifications:[],addNotification:function(e){}});function qe(e){var t=Object(n.useContext)(F),a=Object(n.useState)([]),r=Object(i.a)(a,2),c=r[0],l=r[1],o=Object(n.useCallback)((function(e){l([e].concat(Object(Ye.a)(c)))}),[c]);return Object(n.useEffect)((function(){if(t.user)return D.listenForNotifications(t,(function(e,t){e?console.log(e):l(t||[])}))}),[t.user]),s.a.createElement(Fe.Provider,{value:{notifications:c,addNotification:o}},e.children)}function Be(e){var t=e.notification,a=M.a.unix(t.dateCreated.toMillis()/1e3);return s.a.createElement("div",{className:"container is-fluid is-paddingless list-item py-2",title:t.title},s.a.createElement("div",{className:"columns is-variable is-1 py-1 px-1 is-vcentered"},s.a.createElement("div",{className:"column is-paddingless is-6 has-text-left has-text-centered-mobile  list-item-title"},s.a.createElement("p",{style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}},function(e){switch(e.type){case"discovery":return s.a.createElement("span",{className:"icon has-text-white has-background-info is-small",style:{borderRadius:"50%",fontSize:"0.6em"}}," ",s.a.createElement(ve.z,null)," ");case"location":return s.a.createElement("span",{className:"icon has-text-white has-background-info is-small",style:{borderRadius:"50%",fontSize:"0.6em"}}," ",s.a.createElement(ve.v,null)," ");case"progress":return s.a.createElement("span",{className:"icon has-text-white has-background-info is-small",style:{borderRadius:"50%",fontSize:"0.6em"}}," ",s.a.createElement(ve.f,null)," ")}}(t)," ",t.title)),s.a.createElement("div",{className:"column is-paddingless has-text-right has-text-centered-mobile list-item-subtitle"},s.a.createElement("p",{style:{maxLines:2}},a.fromNow()))),s.a.createElement("div",{className:"content"},s.a.createElement("p",null,t.content)))}function Je(e){var t=e.className,a=Object(n.useState)(!0),r=Object(i.a)(a,2),c=r[0],l=r[1],o=Object(n.useContext)(Fe);return console.log(),s.a.createElement("nav",{className:t},s.a.createElement("div",{className:"panel is-clipped"},s.a.createElement("div",{onClick:function(){return l(!c)},className:"panel-heading is-size-6 has-text-left has-background-white-bis is-align-items-center is-flex is-flex-direction-row is-justify-content-space-between"},s.a.createElement("p",null,"Notifications"),s.a.createElement("button",{className:"button is-static has-background-white is-rounded is-size-8 is-small"},c?s.a.createElement(ve.d,{size:16,className:"icon has-text-black is-small"}):s.a.createElement(ve.e,{size:16,className:"icon has-text-black is-small"}))),s.a.createElement("div",{style:{transition:"all 0.500s linear"},className:"".concat(c?"":"is-height-0")},o.notifications.length>0?o.notifications.map((function(e,t){return s.a.createElement("div",{key:"".concat(e.id,"-").concat(t),className:"panel-block"},s.a.createElement(Be,{notification:e}))})):s.a.createElement(ye,{icon:s.a.createElement(ve.c,{className:"has-text-warning-dark is-size-4 mb-2"}),text:"No Notification available"}))))}var Ue=1,He=Intl.NumberFormat("en-US",{currency:"USD",style:"currency",maximumFractionDigits:2}),Ve=function(){function e(){Object(p.a)(this,e)}return Object(h.a)(e,null,[{key:"getTransactions",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,s,r=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:1,n=r.length>2&&void 0!==r[2]?r[2]:30,e.next=4,t.initiateNetworkRequest("/payments/transactions?page=".concat(a,"&limit=").concat(n),void 0,!0);case 4:if((s=e.sent).ok){e.next=18;break}if(418!==s.status){e.next=17;break}return e.t0=Error,e.next=10,s.json();case 10:if(e.t1=e.sent.message,e.t1){e.next=13;break}e.t1="Failed to fetch transactions";case 13:throw e.t2=e.t1,new e.t0(e.t2);case 17:throw new Error("Failed to fetch transactions");case 18:return e.next=20,s.json();case 20:return e.abrupt("return",e.sent.map((function(e){var t=e.id,a=e.dateCreated,n=e.amount,s=e.user;return{id:t,timestamp:a,cost:n,title:e.title,payee:s,status:e.status===Ue?"paid":"pending"}})));case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getInvoices",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,s,r,c=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:1,n=c.length>2&&void 0!==c[2]?c[2]:30,e.next=4,t.initiateNetworkRequest("/payments/invoices?page=".concat(a,"&limit=").concat(n),void 0,!0);case 4:if((s=e.sent).ok){e.next=18;break}if(418!==s.status){e.next=17;break}return e.t0=Error,e.next=10,s.json();case 10:if(e.t1=e.sent.message,e.t1){e.next=13;break}e.t1="Failed to fetch transactions";case 13:throw e.t2=e.t1,new e.t0(e.t2);case 17:throw new Error("Failed to fetch transactions");case 18:return e.next=20,s.json();case 20:return r=e.sent,e.abrupt("return",r.invoices);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPaymentDescription",value:function(e){switch(e.status){case"pending":return"Pending charge of ".concat(He.format(e.cost)," for the completion of this job by ").concat(e.payee);case"paid":return"A payment of ".concat(He.format(e.cost)," has been submitted to ").concat(e.payee)}}}]),e}();function Ge(e){var t=e.payment,a=M.a.unix(t.timestamp/1e3);return s.a.createElement("div",{className:"container is-fluid is-paddingless list-item py-2",title:t.title},s.a.createElement("div",{className:"columns is-variable is-1 py-1 px-1 is-vcentered"},s.a.createElement("div",{className:"column is-paddingless is-6 has-text-left has-text-centered-mobile list-item-title"},s.a.createElement("p",{style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}},t.title)),s.a.createElement("div",{className:"column is-paddingless has-text-right has-text-centered-mobile list-item-subtitle"},s.a.createElement("p",null,a.fromNow()))),s.a.createElement("div",{className:"content"},s.a.createElement("p",null,Ve.getPaymentDescription(t))))}function Ke(e){var t,a=e.className,r=Object(n.useContext)(F),c=Object(n.useState)(!0),l=Object(i.a)(c,2),o=l[0],m=l[1],p=Object(n.useState)([]),h=Object(i.a)(p,2),f=h[0],b=h[1],v=Object(n.useCallback)(Object(d.a)(u.a.mark((function e(){var t,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Math.max(0,Math.floor(f.length/30))+1,a=30-f.length%30+30,e.next=5,Ve.getTransactions(r,t,a);case 5:n=e.sent,b([].concat(Object(Ye.a)(f),Object(Ye.a)(n))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0,"failed to fetch payment data");case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),[f]);return Object(n.useEffect)((function(){v()}),[r.user,null===(t=r.user)||void 0===t?void 0:t.id]),s.a.createElement("nav",{className:a},s.a.createElement("div",{className:"panel is-clipped"},s.a.createElement("div",{onClick:function(){return m(!o)},className:"panel-heading is-size-6 has-text-left has-background-white-bis is-align-items-center is-flex is-flex-direction-row is-justify-content-space-between"},s.a.createElement("p",null,"Payments"),s.a.createElement("button",{className:"button is-static has-background-white is-rounded is-size-8 is-small"},o?s.a.createElement(ve.d,{size:16,className:"icon has-text-black is-small"}):s.a.createElement(ve.e,{size:16,className:"icon has-text-black is-small"}))),s.a.createElement("div",{style:{transition:"all 0.500s linear"},className:"".concat(o?"":"is-height-0")},f.length>0?f.map((function(e){return s.a.createElement(me.b,{to:"/ f",key:e.id,className:"panel-block"},s.a.createElement(Ge,{payment:e}))})):s.a.createElement(ye,{icon:s.a.createElement(ve.w,{className:"has-text-warning-dark is-size-4 mb-2"}),text:"No Payment data available"}))))}Date.now(),Date.now(),Date.now();function We(){return s.a.createElement("div",{className:"columns is-1 is-variable px-3 py-3 is-atleast-fullheight"},s.a.createElement(Je,{className:"column is-3 is-2-widescreen"}),s.a.createElement("div",{className:"column is-6 is-8-widescreen is-flex",style:{flexDirection:"column",justifyContent:"space-between"}},s.a.createElement(je,{header:"Active Jobs",optionsElement:s.a.createElement(me.b,{to:X},"View All"),style:{marginBottom:"0.8em"}},s.a.createElement(Le,{className:"columns is-centered is-vcentered is-multiline is-1 is-variable"}))),s.a.createElement(Ke,{className:"column is-3 is-2-widescreen"}))}var Xe=a(125),$e=a.n(Xe);function Qe(){return new Promise((function(e,t){if(!("geolocation"in navigator))throw new Error("Geolocation is not supported! Cannot find current location!");navigator.geolocation.getCurrentPosition(e,t,{enableHighAccuracy:!0,maximumAge:1e3})}))}var Ze=a(603);function et(e){var t,a,r=e.label,c=e.value,l=e.onChange,i=e.className,o=e.type,m=e.placeholder,u=e.icon,d=e.readOnly,p=void 0!==d&&d,h=e.locationAutocomplete,f=void 0!==h&&h,b=e.tagifyRef,v=void 0===b?null:b,E=e.required,g=void 0!==E&&E,x=e.whitelist,N=void 0===x?[]:x,y=e.mode,w=void 0===y?"select":y,j=e.disabled,O=void 0!==j&&j,k=e.loading,C=void 0!==k&&k,S=e.tags,P=void 0!==S&&S,z=e.showBorder,D=void 0===z||z,T=e.containerClassName,_=void 0===T?"":T,A=e.isTextArea,M=void 0!==A&&A,I=e.maxLength,R=void 0===I?Number.MAX_SAFE_INTEGER:I,L=e.helpTextTop,Y=void 0===L?"":L,F=e.helpTextLeft,q=void 0===F?"":F,B=e.helpTextRight,J=void 0===B?"":B,U=e.hasAddons,H=void 0!==U&&U,V=e.addon,G=void 0===V?s.a.createElement(s.a.Fragment,null):V,K=Object(n.useRef)(null),W=Oe();return Object(n.useEffect)((function(){return K.current&&f&&!W&&(a=new google.maps.places.Autocomplete(K.current,{fields:["formatted_address","geometry","place_id"]}),t=a.addListener("place_changed",(function(){var e,t,n,s,r=a.getPlace(),c={address:r.formatted_address,coords:{longitude:null===(e=r.geometry)||void 0===e||null===(t=e.location)||void 0===t?void 0:t.lng(),latitude:null===(n=r.geometry)||void 0===n||null===(s=n.location)||void 0===s?void 0:s.lat()},id:r.place_id,place_id:r.place_id};l(c)}))),function(){var e,n;null===(e=t)||void 0===e||e.remove(),null===(n=a)||void 0===n||n.unbindAll()}}),[W,f]),Object(n.useEffect)((function(){var e,a,n;!f&&K.current&&google&&(null===(e=t)||void 0===e||e.remove(),null===(a=google.maps)||void 0===a||null===(n=a.event)||void 0===n||n.clearInstanceListeners(K.current))}),[f]),s.a.createElement("div",{className:"".concat(_," ").concat(D?"job-form-field":""," field has-text-left")},s.a.createElement("label",{className:"label is-flex",style:{justifyContent:"space-between",alignItems:"center"}},s.a.createElement("span",null,r)," ",s.a.createElement("span",{className:"has-text-right has-text-weight-normal is-size-7"},Y)),H?s.a.createElement("div",{className:"".concat(H?"has-addons":""," field")},s.a.createElement("div",{className:"control ".concat(u?"has-icons-left":""," is-expanded")},P?s.a.createElement($e.a,{tagifyRef:v,value:c,settings:{placeholder:m,whitelist:N,mode:w,trim:!0,autoComplete:{enabled:!0,rightKey:!0}},readOnly:p,required:g,className:"".concat(i," input"),disabled:O,loading:C,maxLength:R,onChange:function(e){return e.persist(),l(e.target.value)}}):f?s.a.createElement("input",{ref:K,key:"autocomplete-2",required:g,disabled:O,value:void 0,onChange:function(e){return l(e.target.value)},maxLength:R,className:"".concat(i," input"),type:o,placeholder:m,style:{borderRight:0}}):s.a.createElement("input",{ref:K,key:"non-autocomplete-2",required:g,disabled:O,value:c,onChange:function(e){return l(e.target.value)},maxLength:R,className:"".concat(i," input"),type:o,placeholder:m,style:{borderRight:0}}),u?s.a.createElement("span",{className:"icon is-small is-left"},u):null),G):s.a.createElement("div",{className:"control ".concat(u?"has-icons-left":""," is-expanded")},M?P?s.a.createElement($e.a,{tagifyRef:v,value:c,settings:{placeholder:m,whitelist:N,mode:null,trim:!0,autoComplete:{enabled:!0,rightKey:!0}},inputMode:"textarea",className:"".concat(i),loading:C,maxLength:R,required:g,disabled:O,onChange:function(e){return l(e.target.value)}}):s.a.createElement("textarea",{required:g,disabled:O,value:c,onChange:function(e){return l(e.target.value)},className:"".concat(i," textarea"),maxLength:R,placeholder:m}):P?s.a.createElement($e.a,{tagifyRef:v,value:c,settings:{placeholder:m,whitelist:N,mode:w,trim:!0,autoComplete:{enabled:!0,rightKey:!0},maxLength:R},readOnly:p,required:g,className:"".concat(i," input"),loading:C,maxLength:R,disabled:O,onChange:function(e){return e.persist(),l(e.target.value)}}):f?s.a.createElement("input",{ref:K,key:"autocomplete",required:g,disabled:O,value:void 0,onChange:function(e){return l(e.target.value)},maxLength:R,className:"".concat(i," input"),type:o,placeholder:m}):s.a.createElement("input",{ref:K,key:"nonutocomplete",required:g,disabled:O,value:c,onChange:function(e){return l(e.target.value)},maxLength:R,className:"".concat(i," input"),type:o,placeholder:m}),u?s.a.createElement("span",{className:"icon is-small is-left"},u):null),s.a.createElement("div",{className:"help"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"columns"},q?s.a.createElement("p",{className:"column has-text-left has-text-centered-touch"},q," "):null,J?s.a.createElement("p",{className:"column has-text-right has-text-centered-touch"},J," "):null))))}function tt(e){var t=e.disabled,a=e.value,r=e.onChange,c=e.onRemovePhoto,l=Object(n.useRef)(null);return s.a.createElement("div",{className:"field job-form-field has-text-left my-4"},s.a.createElement("label",{className:"label is-flex",style:{justifyContent:"space-between",alignItems:"center"}},s.a.createElement("span",null,"Job Photos")," ",s.a.createElement("span",{className:"has-text-right has-text-weight-normal is-size-7"},"Add photos to help describe this job")),s.a.createElement("div",{className:"control is-expanded"},s.a.createElement("div",{className:"file is-flex is-centered is-normal"},s.a.createElement("label",{className:"file-label is-flex-grow-1"},s.a.createElement("input",{onChange:function(e){if(e.target.files){for(var t=[],a=0;a<(null===(n=e.target.files)||void 0===n?void 0:n.length);a++){var n;t.push(e.target.files[a])}t.length>0&&r(t)}},className:"file-input",multiple:!0,ref:l,disabled:t,type:"file",accept:"image/*"}),s.a.createElement("span",{className:"file-cta is-flex is-flex-centered",style:{width:"100%"}},s.a.createElement("span",{className:"file-icon"},s.a.createElement(ve.D,null)),s.a.createElement("span",{className:"file-label"},"SELECT PHOTOS")))),a&&a.length>0?s.a.createElement("div",{className:"field is-grouped is-grouped-multiline"},a.map((function(e,t){return s.a.createElement("div",{key:"".concat(t,"-").concat(e.name),className:"control mr-2 my-2 "},s.a.createElement("div",{className:"tags has-addons"},s.a.createElement("span",{key:"".concat(e.name,"-").concat(e.size,"-").concat(t),className:"tag is-dark"},e.name),s.a.createElement("button",{onClick:function(){c(t)},className:"tag is-delete"})))}))):null))}function at(e){var t=e.onClose,a=e.show,r=e.onComplete,c=Object(n.useContext)(F),o=Object(n.useState)({loading:!1,tasks:"",type:"",title:"",description:"",address:"",requiredPersons:"",price:"",loadingTypes:!0,fetchingLocation:!1,manualAddress:!1,location:null}),m=Object(i.a)(o,2),p=m[0],h=m[1],f=Object(n.useState)([]),v=Object(i.a)(f,2),E=v[0],g=v[1],x=Object(Se.useToasts)().addToast,N=Object(n.useMemo)((function(){return{jobTypes:new Array,location:[]}}),[]),y=Object(n.createRef)();Object(n.createRef)();return Object(n.useEffect)((function(){new Promise(Object(d.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ce.getJobTypes(c);case 3:N.jobTypes=e.sent,t=y.current,console.log(y),t&&(t.settings.whitelist.length=0,t.loading(!0).dropdown.hide.call(t),(a=t.settings.whitelist).push.apply(a,Object(Ye.a)(N.jobTypes).concat(Object(Ye.a)(t.value))),t.loading(!1).dropdown.hide.call(t,t.value),y.current.settings.whitelist=N.jobTypes),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),x("Failed to load job types!",{appearance:"error"});case 13:case"end":return e.stop()}}),e,null,[[0,9]])}))))}),[]),s.a.createElement("form",{className:"modal ".concat(a?"is-active":""),onSubmit:function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),t.preventDefault(),h(Object(l.a)(Object(l.a)({},p),{},{loading:!0})),e.prev=3,s=null===(a=JSON.parse(p.type)[0])||void 0===a?void 0:a.value,console.log(s,p.type),i={date_created:_.a.firestore.FieldValue.serverTimestamp(),job_title:p.title,job_type:s,posted_by:null===(n=c.user)||void 0===n?void 0:n.id,salary:parseInt(p.price,10),required_count:parseInt(p.requiredPersons,10),wage:"deployment",status:"available",tasks:JSON.parse(p.tasks).map((function(e){return{id:Object(Ze.a)(),text:e.value}})),location:p.location?{id:p.location.place_id,place_id:p.location.place_id,address:p.location.address,coords:{latitude:p.location.coords.latitude||null,longitude:p.location.coords.longitude||null,accuracy:p.location.coords.accuracy||null,altitude:p.location.coords.altitude||null,heading:p.location.coords.heading||null,altitudeAccuracy:p.location.coords.altitudeAccuracy||null,speed:p.location.coords.speed||null},timestamp:p.location.timestamp||Date.now()}:void 0,job_description:p.description},!p.manualAddress||p.address){e.next=11;break}throw new Error("You must provide your address manually!");case 11:p.manualAddress&&(i.location.address=p.address);case 12:if(console.log(i),!i.job_type||b.a.isEmpty(i.job_type)||N.jobTypes.find((function(e){return e===i.job_type}))){e.next=15;break}throw new Error("Invalid job type!");case 15:return e.next=17,Ce.addNewJob(c,i,E);case 17:h(Object(l.a)(Object(l.a)({},p),{},{loading:!1})),x("Successfully added job!",{appearance:"success"}),r(),e.next=27;break;case 22:e.prev=22,e.t0=e.catch(3),console.log(e.t0),h(Object(l.a)(Object(l.a)({},p),{},{loading:!1})),x(e.t0.message||"Failed to add job!",{appearance:"error"});case 27:case"end":return e.stop()}}),e,null,[[3,22]])})));return function(t){return e.apply(this,arguments)}}()},s.a.createElement("div",{className:"modal-background"}),s.a.createElement("div",{className:"modal-card"},s.a.createElement("header",{className:"modal-card-head"},s.a.createElement("div",{className:"modal-card-title is-mobile is-vcentered columns"},s.a.createElement("div",{className:"column has-text-left"},s.a.createElement("button",{className:"button",onClick:t},s.a.createElement("span",{className:"icon"},s.a.createElement(ve.g,null)),s.a.createElement("span",{className:"is-hidden-mobile"}," View Current Jobs"))),s.a.createElement("div",{className:"column has-text-left-mobile is-10-mobile"},s.a.createElement("span",null,"New Job Listing")),s.a.createElement("a",{className:"column is-hidden-mobile"}))),s.a.createElement("div",{className:"modal-card-body px-0"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"level px-4 pb-4",style:{borderBottom:"solid 1px #1112"}},s.a.createElement("p",{className:"level-item has-text-left is-block is-size-4 has-text-centered-touch"},"Job Details"),s.a.createElement("p",{className:"level-item has-text-right is-block has-text-grey-light has-text-centered-touch"},"All fields are required to be filled out")),s.a.createElement("div",{className:"container is-fluid pb-4 px-0"},s.a.createElement("div",{className:"columns mx-0 px-4"},s.a.createElement("div",{className:"column is-6"},s.a.createElement(et,{required:!0,disabled:p.loading,maxLength:N.jobTypes.length,value:p.type,tagifyRef:y,tags:!0,whitelist:N.jobTypes,onChange:function(e){h((function(t){return Object(l.a)(Object(l.a)({},t),{},{type:e})}))},className:"",containerClassName:"mb-4",label:"Job Type",placeholder:"Begin typing a job type",type:"text",icon:s.a.createElement(ve.z,null),helpTextLeft:"Search and select a job type to improve search results when finding a contractor"}),s.a.createElement(et,{required:!0,disabled:p.loading,value:p.title,onChange:function(e){return h(Object(l.a)(Object(l.a)({},p),{},{title:e}))},className:"",containerClassName:"my-4",label:"Title",placeholder:"Provide a title for the job",type:"text",icon:null,helpTextLeft:"Will be seen by contractors in search result and as an active status",helpTextRight:"Maximum 30 characters",maxLength:30}),s.a.createElement(et,{required:!0,disabled:p.loading,value:p.description,onChange:function(e){return h(Object(l.a)(Object(l.a)({},p),{},{description:e}))},className:"",containerClassName:"my-4",label:"Description",isTextArea:!0,placeholder:"Provide a description of the job",type:"text",icon:null,helpTextLeft:"Give a short description to improve finding a contractor that fits the job",helpTextRight:"Maximum 80 characters",maxLength:80}),s.a.createElement(et,{locationAutocomplete:!p.manualAddress,required:!p.manualAddress,disabled:p.loading||p.fetchingLocation,value:p.address,onChange:function(e){if(p.manualAddress)return h(Object(l.a)(Object(l.a)({},p),{},{address:e}));var t=e.address,a=e.coords,n=e.place_id;h((function(e){return Object(l.a)(Object(l.a)({},e),{},{location:{address:t,place_id:n,id:n,coords:a}})}))},className:"",containerClassName:"my-4",label:"Location Address",placeholder:"Begin typing the first line of the address",type:"text",icon:s.a.createElement(ve.v,null),hasAddons:!0,addon:s.a.createElement("div",{className:"control"},s.a.createElement("button",{disabled:p.loading||p.fetchingLocation,className:"button ".concat(p.fetchingLocation?"is-loading":""," ").concat(p.manualAddress?"is-info has-text-white":""),onClick:Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=!p.manualAddress)){e.next=25;break}return h(Object(l.a)(Object(l.a)({},p),{},{fetchingLocation:!0})),e.prev=3,e.t0=h,e.t1=l.a,e.t2=Object(l.a)({},p),e.t3={},e.next=10,Qe();case 10:e.t4=e.sent,e.t5={location:e.t4},e.t6=(0,e.t1)(e.t2,e.t3,e.t5),(0,e.t0)(e.t6),x("Using your current location!",{appearance:"success"}),h((function(e){return Object(l.a)(Object(l.a)({},e),{},{address:"",manualAddress:t,fetchingLocation:!1})})),e.next=23;break;case 18:e.prev=18,e.t7=e.catch(3),console.log(e.t7),h((function(e){return Object(l.a)(Object(l.a)({},e),{},{fetchingLocation:!1})})),x(e.t7.message||"Failed to set location manually!",{appearance:"error"});case 23:e.next=26;break;case 25:h((function(e){return Object(l.a)(Object(l.a)({},e),{},{location:null,manualAddress:t})}));case 26:case"end":return e.stop()}}),e,null,[[3,18]])}))),type:"button",style:{color:p.manualAddress?"unset":"black",borderLeft:0,zIndex:4}},s.a.createElement("span",{className:"is-size-7"},p.manualAddress?"using current location":"or use current location")))})),s.a.createElement("div",{className:"column is-6"},s.a.createElement(et,{required:!0,disabled:p.loading,value:p.requiredPersons,onChange:function(e){return h(Object(l.a)(Object(l.a)({},p),{},{requiredPersons:e}))},hasAddons:!0,className:"",containerClassName:"mb-4",label:"How many persons are needed for the job",placeholder:"How many persons are needed for the job",type:"number",helpTextRight:"e.g. 10 persons maximum per job",icon:null,addon:s.a.createElement("div",{className:"control"},s.a.createElement("button",{className:"button",disabled:!0,style:{color:"black",borderLeft:0}},"Persons"))}),s.a.createElement(et,{required:!0,disabled:p.loading,value:p.price,onChange:function(e){return h(Object(l.a)(Object(l.a)({},p),{},{price:e}))},hasAddons:!0,className:"",containerClassName:"my-4",label:"Pay",placeholder:"Provide an amount",type:"number",helpTextLeft:"Will be seen in search results. Cannot be adjusted once the listing is pending or active",icon:s.a.createElement(ve.l,null),addon:s.a.createElement("div",{className:"control"},s.a.createElement("button",{className:"button",disabled:!0,style:{color:"black",borderLeft:0}},"Per Deployment"))}),s.a.createElement(et,{required:!0,disabled:p.loading,value:p.tasks,tags:!0,onChange:function(e){return h((function(t){return Object(l.a)(Object(l.a)({},t),{},{tasks:e})}))},isTextArea:!0,className:"",containerClassName:"my-4",label:"Tasks",placeholder:"Add a task",type:"text",icon:null,helpTextTop:"Provide each task required to be completed for this listing",helpTextRight:"Separate each task with a comma (,)"}),s.a.createElement(tt,{disabled:p.loading,value:E,onRemovePhoto:function(e){g(E.filter((function(t,a){return a!==e})))},onChange:function(e){return g(e)}})))))),s.a.createElement("footer",{className:"modal-card-foot is-flex-centered"},s.a.createElement("button",{disabled:p.loading,className:"button",onClick:t},"Cancel"),s.a.createElement("button",{disabled:p.loading,className:"button is-info ".concat(p.loading?"is-loading":""),type:"submit"},"Confirm"))))}var nt=a(124),st=a(602),rt=function(e){var t=e.className,a=e.activeJobs,r=e.isActive,c=e.inactiveJobs,l=e.onCreateNew,m=Object(n.useState)(null),p=Object(i.a)(m,2),h=p[0],f=p[1],b=Object(n.useState)(null),v=Object(i.a)(b,2),E=v[0],g=v[1],x=Object(n.useState)(""),N=Object(i.a)(x,2),y=N[0],w=N[1],j=Object(n.useState)(!1),O=Object(i.a)(j,2),k=O[0],C=O[1],S=Object(n.useCallback)((function(e,t,a){if(!e||(null===t||void 0===t?void 0:t.length)<=0)return t;var n=new RegExp(e,"i");a(void 0,t.filter((function(e){var t,a,s,r;return(null===(t=e.job_description)||void 0===t?void 0:t.search(n))>=0||(null===(a=e.job_title)||void 0===a?void 0:a.search(n))>=0||(null===(s=e.location_address)||void 0===s?void 0:s.search(n))>=0||(null===(r=e.job_type)||void 0===r?void 0:r.search(n))>=0||!!e.user&&e.user.firstName.search(n)>=0||!!e.user&&e.user.lastName.search(n)>=0})))}),[a,c,y]),P=Object(n.useCallback)(function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C(!0),e.prev=1,!r){e.next=12;break}if(!(a.length<1)){e.next=5;break}throw new Error("There is no active job to search");case 5:return e.t0=f,e.next=8,new Promise((function(e,n){S(t,a,(function(t,a){t?n(t):!a||a.length<1?n(new Error("No data")):(C(!1),e(a))}))}));case 8:e.t1=e.sent,(0,e.t0)(e.t1),e.next=19;break;case 12:if(!(c.length<1)){e.next=14;break}throw new Error("There is no inactive job to search");case 14:return e.t2=g,e.next=17,new Promise((function(e,a){S(t,c,(function(t,n){t?a(t):!n||n.length<1?a(new Error("No data")):(C(!1),e(n))}))}));case 17:e.t3=e.sent,(0,e.t2)(e.t3);case 19:e.next=27;break;case 21:e.prev=21,e.t4=e.catch(1),console.log(e.t4),f([]),g([]),C(!1);case 27:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(t){return e.apply(this,arguments)}}(),[a,c]),z=Object(st.a)((function(){var e=y.trim();e||(f(null),g(null)),e&&P(e)}),800);return Object(n.useEffect)((function(){z()}),[y]),s.a.createElement("div",{className:"".concat(t," panel job-panel has-background-white-ter is-flex is-size-7")},s.a.createElement("div",{className:"panel-heading is-flex is-vcentered pb-4"},s.a.createElement("p",{className:"has-text-left is-size-6"},"Job Listings"),s.a.createElement("a",{className:"button is-small is-rounded is-size-7",onClick:l},s.a.createElement(nt.a,null))),s.a.createElement("div",{className:"panel-block"},s.a.createElement("form",{onSubmit:function(e){e.stopPropagation(),e.preventDefault(),z()},className:"field has-addons",style:{flex:1}},s.a.createElement("div",{className:"control is-expanded has-icons-left"},s.a.createElement("input",{style:{borderRight:0},className:"input is-rounded",value:y,onChange:function(e){return w(e.target.value)},type:"search",placeholder:"Search Jobs..."}),s.a.createElement("span",{className:"icon is-left"},s.a.createElement(ve.z,null))))),s.a.createElement("div",{className:"panel-tabs"},s.a.createElement(me.c,{to:"".concat(X),activeClassName:"is-active"},"Active"),s.a.createElement(me.c,{to:"".concat($),activeClassName:"is-active"},"Inactive")),s.a.createElement("div",{className:"has-background-white-ter",style:{overflowY:"auto",overflowX:"hidden"}},s.a.createElement(o.b,{path:"".concat(X),render:function(){return k?s.a.createElement("div",{key:"active-loader",className:"px-6 my-6 is-flex"},s.a.createElement("progress",{style:{height:"0.4rem"},className:"progress is-small my-6",max:"100"},"loading")):y&&h&&h.length<1?s.a.createElement(ye,{key:"active-empty",className:"my-6",style:{backgroundColor:"transparent"},text:"Search did not return any job"}):(y&&h?h:a).map((function(e){return s.a.createElement(Te,{key:e.id,job:e,to:"".concat(X,"/").concat(e.id)})}))}}),s.a.createElement(o.b,{path:"".concat($),render:function(){return k?s.a.createElement("div",{className:"px-6 my-6 is-flex"},s.a.createElement("progress",{style:{height:"0.4rem"},className:"progress is-small my-6",max:"100"},"loading")):y&&E&&E.length<1?s.a.createElement(ye,{className:"my-6",style:{backgroundColor:"transparent"},text:"Search did not match any job"}):(y&&E?E:c).map((function(e){return s.a.createElement(Te,{key:e.id,job:e,to:"".concat($,"/").concat(e.id)})}))}})))};function ct(){var e=Object(n.useContext)(F),t=Object(n.useState)({loading:!1,showModal:!1,selected:null}),a=Object(i.a)(t,2),r=a[0],c=a[1],m=Object(n.useState)([]),p=Object(i.a)(m,2),h=p[0],f=p[1],b=Object(n.useState)([]),v=Object(i.a)(b,2),E=v[0],g=v[1],x=Object(Se.useToasts)().addToast,N=Object(o.h)(),y=function(){c(Object(l.a)(Object(l.a)({},r),{},{showModal:!1}));for(var e,t=window.document.getElementsByClassName("pac-container");e<t.length;e++){var a;null===(a=t.item(e))||void 0===a||a.remove()}},w=function(e){var t=function(t){"Escape"===t.key&&e()};return window.document.addEventListener("keydown",t),function(){return window.document.removeEventListener("keydown",t)}}(y);Object(n.useEffect)((function(){return w()}),[]),Object(n.useEffect)((function(){c(Object(l.a)(Object(l.a)({},r),{},{loading:!0}));var t=Ce.listenForActiveAndPendingJobs(e,function(){var t=Object(d.a)(u.a.mark((function t(a,n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=3;break}return c(Object(l.a)(Object(l.a)({},r),{},{loading:!1})),t.abrupt("return",x(a.message||"Failed to get jobs!"));case 3:return t.next=5,Promise.all(n.map(function(){var t=Object(d.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("available"===a.status||!a.executed_by){t.next=4;break}return t.next=3,D.getExternalUser(e,a.executed_by);case 3:a.user=t.sent;case 4:return t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 5:n=t.sent,c(Object(l.a)(Object(l.a)({},r),{},{loading:!1})),f(n);case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}());return Ce.getInactiveJobs(e).then(function(){var t=Object(d.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.map(function(){var t=Object(d.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.getExternalUser(e,a.executed_by);case 2:return a.user=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then((function(e){g(e)})).catch((function(e){console.log(e),x(e.message||"Failed to get inactive jobs",{appearance:"error"})})),t}),[]);var j=Object(o.i)().id,O=Object(o.j)({path:Q.active,strict:!0,exact:!0}),k=Object(o.j)({path:Q.inactive});return Object(n.useEffect)((function(){if(j)if(O){var e=h.find((function(e){return e.id===j}));c(Object(l.a)(Object(l.a)({},r),{},{selected:e||null}))}else if(k){var t=E.find((function(e){return e.id===j}));c(Object(l.a)(Object(l.a)({},r),{},{selected:t||null}))}}),[N,h,E]),s.a.createElement("div",{className:"columns is-gapless px-4 py-4 is-fullheight is-multiline"},s.a.createElement(rt,{isActive:!!O,activeJobs:h,inactiveJobs:E,onCreateNew:function(){return c(Object(l.a)(Object(l.a)({},r),{},{showModal:!0}))},className:"column is-3 is-12-mobile is-12-touch is-clipped is-fullheight"}),s.a.createElement(Ae,{onCancel:function(e){"complete"===e.status?g(E.filter((function(t){return t.id!==e.id}))):f(h.filter((function(t){return t.id!==e.id}))),c(Object(l.a)(Object(l.a)({},r),{},{selected:null}))},job:j?r.selected:null,className:"column is-9 is-12-touch is-12-mobile is-flex"}),r.showModal?s.a.createElement(at,{show:r.showModal,onClose:y,onComplete:function(){y()}}):null)}var lt=a(253),it=a(73),ot=a.n(it);function mt(){var e=Object(n.useContext)(F),t=Object(n.useState)({showModal:!1,showCodeRequest:!0,showPassword:!1,showPasswordVerify:!1,loading:!1}),a=Object(i.a)(t,2),r=a[0],c=a[1],m=Object(n.useState)({email:"",first_name:"",last_name:"",password:"",password_verify:"",phone_number:""}),p=Object(i.a)(m,2),h=p[0],f=p[1],b=Object(Se.useToasts)().addToast,v=Object(o.g)(),E=Object(o.h)(),g=Object(n.useCallback)(function(){var t=Object(d.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),a.stopPropagation(),c(Object(l.a)(Object(l.a)({},r),{},{loading:!0})),t.prev=3,t.next=6,e.addAdmin(h);case 6:if((n=t.sent)&&n.success){t.next=9;break}throw new Error("Failed to register user!");case 9:b("User registered successfully!",{appearance:"success"}),c(Object(l.a)(Object(l.a)({},r),{},{loading:!1})),v.push(J,E.state),t.next=19;break;case 14:t.prev=14,t.t0=t.catch(3),console.log(t.t0),b(t.t0.message||"Failed to add new user!",{appearance:"error"}),c(Object(l.a)(Object(l.a)({},r),{},{loading:!1}));case 19:case"end":return t.stop()}}),t,null,[[3,14]])})));return function(e){return t.apply(this,arguments)}}(),[r,h]);return s.a.createElement("div",{className:"section"},s.a.createElement("figure",{className:"image is-96x96 is-flex",style:{margin:"auto"}},s.a.createElement("img",{src:ot.a,className:"is-rounded"})),s.a.createElement("p",{className:"help mb-4 has-text-weight-bold"},"Improving the experience of managing temporary services"),s.a.createElement("form",{className:"my-2",onSubmit:g},s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control has-icons-left "},s.a.createElement("input",{autoComplete:"given-name",disabled:r.loading,required:!0,value:h.first_name,onChange:function(e){return f(Object(l.a)(Object(l.a)({},h),{},{first_name:e.target.value}))},placeholder:"enter firstname",className:"input",type:"text"}),s.a.createElement("span",{className:"icon is-left is-small"},s.a.createElement(ve.E,null)))),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control has-icons-left "},s.a.createElement("input",{autoComplete:"family-name",disabled:r.loading,required:!0,value:h.last_name,onChange:function(e){return f(Object(l.a)(Object(l.a)({},h),{},{last_name:e.target.value}))},placeholder:"enter lastname",className:"input",type:"text"}),s.a.createElement("span",{className:"icon is-left is-small"},s.a.createElement(ve.E,null)))))),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control has-icons-left "},s.a.createElement("input",{autoComplete:"off",disabled:r.loading,required:!0,value:h.email,onChange:function(e){return f(Object(l.a)(Object(l.a)({},h),{},{email:e.target.value}))},placeholder:"enter your email address",className:"input",type:"email"}),s.a.createElement("span",{className:"icon is-left is-small"},s.a.createElement(ve.n,null)))),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control has-icons-left "},s.a.createElement("input",{autoComplete:"off",disabled:r.loading,required:!0,value:h.phone_number,onChange:function(e){return f(Object(l.a)(Object(l.a)({},h),{},{phone_number:e.target.value}))},placeholder:'enter your phone number include the "+" sign',className:"input",type:"tel"}),s.a.createElement("span",{className:"icon is-left is-small"},s.a.createElement(ve.y,null)))),s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field has-addons"},s.a.createElement("div",{className:"control has-icons-left is-expanded"},s.a.createElement("input",{autoComplete:"off",disabled:r.loading,required:!0,value:h.password,onChange:function(e){return f(Object(l.a)(Object(l.a)({},h),{},{password:e.target.value}))},placeholder:"enter your password",className:"input",type:r.showPassword?"text":"password"}),s.a.createElement("span",{className:"icon is-left is-small"},s.a.createElement(ve.u,null))),s.a.createElement("div",{className:"control"},s.a.createElement("button",{className:"button",type:"button",onClick:function(e){return c(Object(l.a)(Object(l.a)({},r),{},{showPassword:!r.showPassword}))}},r.showPassword?s.a.createElement(ve.q,null):s.a.createElement(ve.p,null)))),s.a.createElement("div",{className:"field has-addons"},s.a.createElement("div",{className:"control has-icons-left is-expanded"},s.a.createElement("input",{autoComplete:"off",disabled:r.loading,required:!0,value:h.password_verify,onChange:function(e){return f(Object(l.a)(Object(l.a)({},h),{},{password_verify:e.target.value}))},placeholder:"re-enter your password",className:"input",type:r.showPasswordVerify?"text":"password"}),s.a.createElement("span",{className:"icon is-left is-small"},s.a.createElement(ve.u,null))),s.a.createElement("div",{className:"control"},s.a.createElement("button",{className:"button",type:"button",onClick:function(e){return c(Object(l.a)(Object(l.a)({},r),{},{showPasswordVerify:!r.showPasswordVerify}))}},r.showPasswordVerify?s.a.createElement(ve.q,null):s.a.createElement(ve.p,null)))))),s.a.createElement("div",{className:"field mt-6"},s.a.createElement("div",{className:"control"},s.a.createElement("button",{disabled:r.loading,className:"button is-rounded is-fullwidth is-uppercase is-success ".concat(r.loading?"is-loading":""),type:"submit"},s.a.createElement(ve.F,null),"\xa0 Register")))),s.a.createElement("div",{className:"section mt-6 is-size-7"},s.a.createElement("p",null,"Already have an account?"),s.a.createElement(me.b,{to:J},"Click here to login")))}function ut(){var e=Object(n.useContext)(F),t=(Object(n.useContext)(q),Object(n.useState)({showCodeRequest:!0,loading:!1,phone:""})),a=Object(i.a)(t,2),r=a[0],c=a[1],o=Object(Se.useToasts)().addToast,m=Object(n.useCallback)(function(){var t=Object(d.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(Object(l.a)(Object(l.a)({},r),{},{loading:!0})),t.prev=1,t.next=4,e.validateNumber(a.phone);case 4:return t.next=6,e.triggerVerification(a.phone,null===a||void 0===a?void 0:a.channel);case 6:if(t.sent){t.next=9;break}throw new Error("Failed to verify phone number!");case 9:return o("Verification code sent to your phone!",{appearance:"success"}),c(Object(l.a)(Object(l.a)({},r),{},{loading:!1,phone:a.phone})),t.abrupt("return",!0);case 14:return t.prev=14,t.t0=t.catch(1),console.log(t.t0),o(t.t0.message||"Verification failed!",{appearance:"error"}),c(Object(l.a)(Object(l.a)({},r),{},{loading:!1})),t.abrupt("return",!1);case 20:case"end":return t.stop()}}),t,null,[[1,14]])})));return function(e){return t.apply(this,arguments)}}(),[r]),p=Object(n.useCallback)(function(){var t=Object(d.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(Object(l.a)(Object(l.a)({},r),{},{loading:!0})),t.prev=1,t.next=4,e.login(a.phone_number,a.code,a.password);case 4:if(t.sent){t.next=7;break}throw new Error("Failed to login!");case 7:return o("Login successful!",{appearance:"success"}),c(Object(l.a)(Object(l.a)({},r),{},{loading:!1})),t.abrupt("return",!0);case 12:return t.prev=12,t.t0=t.catch(1),console.log(t.t0),o(t.t0.message||"Login failed!",{appearance:"error"}),c(Object(l.a)(Object(l.a)({},r),{},{loading:!1})),t.abrupt("return",!1);case 18:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}(),[r]);return s.a.createElement("div",{className:"section"},s.a.createElement("figure",{className:"image is-96x96 is-flex",style:{margin:"auto"}},s.a.createElement("img",{src:ot.a,className:"is-rounded"})),s.a.createElement("p",{className:"help mb-4 has-text-weight-bold"},"Improving the experience of managing temporary services"),r.showCodeRequest?s.a.createElement(dt,{onComplete:function(){return c(Object(l.a)(Object(l.a)({},r),{},{showCodeRequest:!1}))},loading:r.loading,onSubmit:m}):s.a.createElement(pt,{onCancel:function(){return c(Object(l.a)(Object(l.a)({},r),{},{showCodeRequest:!0}))},loading:r.loading,phone:r.phone,onSubmit:p}),s.a.createElement("div",{className:"section mt-6 is-size-7"},s.a.createElement("p",null,"Are you a new user?"),s.a.createElement(me.b,{to:B},"Request access")))}function dt(e){var t,a=e.onSubmit,r=e.loading,c=e.onComplete,o=Object(n.useState)({phone:"",channel:"sms"}),m=Object(i.a)(o,2),p=m[0],h=m[1],f=Object(n.useState)({showOptions:!1,hold:!1,holdTimer:0}),b=Object(i.a)(f,2),v=b[0],E=b[1],g=Object(n.useCallback)(function(){var e=Object(d.a)(u.a.mark((function e(n){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),n.stopPropagation(),e.next=4,a(p);case 4:e.sent&&(s=59,clearInterval(t),t=setInterval((function(){if(0===s)return clearInterval(t),void E(Object(l.a)(Object(l.a)({},v),{},{hold:!1,showOptions:!0,holdTimer:s}));E(Object(l.a)(Object(l.a)({},v),{},{hold:!0,holdTimer:s,showOptions:!0})),s--}),1e3));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[p,v]);return s.a.createElement("form",{onSubmit:g},s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control has-icons-left "},s.a.createElement("input",{autoComplete:"off",disabled:r||v.hold,required:!0,value:p.phone,onChange:function(e){return h(Object(l.a)(Object(l.a)({},p),{},{phone:e.target.value}))},placeholder:"enter your phone number",className:"input is-rounded",type:"tel"}),s.a.createElement("span",{className:"icon is-left is-small"},s.a.createElement(ve.y,null)))),s.a.createElement("div",{className:"field mt-4"},s.a.createElement("div",{className:"control"},v.showOptions?s.a.createElement("button",{onClick:c,disabled:r,className:"button is-rounded is-uppercase is-success ".concat(r?"is-loading":""),type:"button"},s.a.createElement(ve.a,null),"\xa0 Proceed"):s.a.createElement("button",{disabled:r||v.hold,className:"button is-rounded is-uppercase is-info ".concat(r?"is-loading":""),type:"submit"},"sms"===p.channel?s.a.createElement(s.a.Fragment,null,s.a.createElement(ve.B,null),"\xa0 Send Code"):s.a.createElement(s.a.Fragment,null,s.a.createElement(ve.y,null),"\xa0 Call Me")))),s.a.createElement("div",{className:"field is-size-7"},v.showOptions?s.a.createElement(s.a.Fragment,null,s.a.createElement("p",{className:"help mt-4 mb-2"},"Didn't get code? ",v.hold?s.a.createElement("span",{className:"has-text-danger"},"Try again in: ",v.holdTimer,"s"):null),s.a.createElement("div",{className:"control buttons has-addons is-centered"},s.a.createElement("button",{onClick:function(){E(Object(l.a)(Object(l.a)({},v),{},{showOptions:!1}))},disabled:r||v.hold,className:"button has-text-weight-bold is-info is-outlined is-small is-rounded is-uppercase",type:"button"},s.a.createElement("span",{className:"is-size-7"},"Try Again")),s.a.createElement("button",{onClick:function(){h(Object(l.a)(Object(l.a)({},p),{},{channel:"sms"===p.channel?"call":"sms"})),E(Object(l.a)(Object(l.a)({},v),{},{showOptions:!1}))},disabled:r||v.hold,className:"button has-text-weight-bold is-info is-outlined is-small is-rounded is-uppercase",type:"button"},s.a.createElement("span",{className:"is-size-7"}," ","sms"===p.channel?"Use voice":"Use SMS")))):null))}function pt(e){var t=e.phone,a=e.loading,r=e.onSubmit,c=e.onCancel,o=Object(n.useState)({code:"",phone_number:t,password:"",showPassword:!1}),m=Object(i.a)(o,2),p=m[0],h=m[1],f=Object(n.useCallback)(function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),t.stopPropagation(),e.next=4,r(p);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[p]);return s.a.createElement("form",{onSubmit:f},s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control has-icons-left"},s.a.createElement("input",{autoComplete:"off",disabled:!0,required:!0,value:p.phone_number,placeholder:"enter your phone number",className:"input",type:"tel"}),s.a.createElement("span",{className:"icon is-left is-small"},s.a.createElement(ve.E,null)))),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control has-icons-left"},s.a.createElement("input",{autoComplete:"off",pattern:"/.{4}/",max:9999,maxLength:4,minLength:4,disabled:p.loading,required:!0,value:p.code,onChange:function(e){return h(Object(l.a)(Object(l.a)({},p),{},{code:e.target.value}))},placeholder:"enter 4 digits code",className:"input",type:"number"}),s.a.createElement("span",{className:"icon is-left is-small"},s.a.createElement(lt.a,null)))),s.a.createElement("div",{className:"field has-addons"},s.a.createElement("div",{className:"control has-icons-left is-expanded"},s.a.createElement("input",{autoComplete:"off",disabled:p.loading,required:!0,value:p.password,onChange:function(e){return h(Object(l.a)(Object(l.a)({},p),{},{password:e.target.value}))},placeholder:"enter your password",className:"input",type:p.showPassword?"text":"password"}),s.a.createElement("span",{className:"icon is-left is-small"},s.a.createElement(ve.u,null))),s.a.createElement("div",{className:"control"},s.a.createElement("button",{className:"button",type:"button",onClick:function(e){return h(Object(l.a)(Object(l.a)({},p),{},{showPassword:!p.showPassword}))}},p.showPassword?s.a.createElement(ve.q,null):s.a.createElement(ve.p,null)))),s.a.createElement("div",{className:"field mt-6"},s.a.createElement("div",{className:"control buttons is-centered"},s.a.createElement("button",{onClick:c,disabled:a,className:"button is-rounded is-uppercase is-dark is-outlined",type:"button"},s.a.createElement(ve.g,null),"\xa0 Back"),s.a.createElement("button",{disabled:a,className:"button is-rounded is-uppercase is-success ".concat(a?"is-loading":""),type:"submit"},s.a.createElement(ve.A,null),"\xa0 Login"))))}function ht(){var e=Object(n.useContext)(q);return Object(n.useEffect)((function(){return e.showToolbar(!1),e.showFooter(!1),function(){e.showToolbar(!0),e.showFooter(!0)}})),s.a.createElement(he,null,s.a.createElement("div",{className:"columns is-gapless is-fullheight is-multiline"},s.a.createElement("div",{className:"column is-flex-centered is-atleast-fullheight"},s.a.createElement(ut,null)),s.a.createElement("div",{className:"column is-6 is-hidden-touch is-flex has-background-info"})))}function ft(){var e=Object(n.useContext)(F),t=Object(n.useContext)(q);return Object(n.useEffect)((function(){return t.setAppReady(!1),t.showToolbar(!1),e.logout(),function(){t.showToolbar(!0),t.setAppReady(!0)}}),[]),t.signedIn&&t.signedIn?s.a.createElement(s.a.Fragment,null):s.a.createElement(o.a,{to:{pathname:"/"}})}var bt=a(164),vt=Object(n.createContext)({chats:[],setChats:function(e){}}),Et=function(e){var t=Object(n.useContext)(F),a=Object(n.useState)([]),r=Object(i.a)(a,2),c=r[0],o=r[1],m=Object(n.useCallback)((function(){var e=R.listenForChats(t,function(){var e=Object(d.a)(u.a.mark((function e(a,n){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=3;break}return console.log(a),e.abrupt("return");case 3:if(n){e.next=5;break}return e.abrupt("return");case 5:return e.t0=Promise,e.next=8,n.map(function(){var e=Object(d.a)(u.a.mark((function e(a){var n,s,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.data({serverTimestamps:"estimate"}),s=c.find((function(e){return(null===e||void 0===e?void 0:e.id)===a.id})),n.id=a.id,e.prev=3,e.t0=Promise,e.next=7,n.users.map(function(){var e=Object(d.a)(u.a.mark((function e(a){var r,c,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a!==t.user.id){e.next=4;break}return e.abrupt("return",t.user);case 4:if(!s){e.next=16;break}if(!(r=s.users.find((function(e){return e.id===a})))){e.next=11;break}return n.recipient=r,e.abrupt("return",r);case 11:return e.next=13,D.getExternalUser(t,a);case 13:return c=e.sent,n.recipient=c,e.abrupt("return",c);case 16:return e.next=18,D.getExternalUser(t,a);case 18:return l=e.sent,n.recipient=l,e.abrupt("return",l);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:return e.t1=e.sent,e.next=10,e.t0.all.call(e.t0,e.t1);case 10:return n.users=e.sent,n.last_message=Object(l.a)(Object(l.a)({},n.last_message),{},{createdAt:null===(r=n.last_message)||void 0===r?void 0:r.createdAt.toDate()}),e.abrupt("return",n);case 15:e.prev=15,e.t2=e.catch(3),console.log("Failed to get user data",e.t2);case 18:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t){return e.apply(this,arguments)}}());case 8:return e.t1=e.sent,e.next=11,e.t0.all.call(e.t0,e.t1);case 11:s=e.sent,o(s);case 13:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}());return function(){return e()}}),[c,t]);return Object(n.useEffect)((function(){if(t.user)return m()}),[t.user]),s.a.createElement(vt.Provider,{value:{chats:c,setChats:o}},e.children)};function gt(e){var t=e.chat,a=e.to,n=M()(t.last_message.createdAt);return s.a.createElement(me.c,{activeClassName:"is-active",to:a,className:"job-item message-iitem mb-8 py-2 is-block card is-shadowless has-background-white-ter"},s.a.createElement("div",{className:"card-content"},s.a.createElement("div",{className:"container is-paddingless"},s.a.createElement("div",{className:"columns "},s.a.createElement("div",{className:"column is-narrow is-flex",style:{justifyContent:"center"}},s.a.createElement("figure",{className:"image is-flex is-48x48"},s.a.createElement("img",{className:"is-rounded",onError:function(e){return e.currentTarget.src=ot.a},src:t.recipient.profilePhoto}))),s.a.createElement("div",{className:"column"},s.a.createElement("div",{className:"columns mb-0 is-mobile is-vcentered name-bar"},s.a.createElement("div",{className:"has-text-left column has-text-weight-bold"},s.a.createElement("p",null,"".concat(t.recipient.firstName," ").concat(t.recipient.lastName))),s.a.createElement("div",{className:"has-text-right is-3-mobile column"},s.a.createElement("p",null,n.calendar({sameElse:"DD/MMM/YYYY"})))),s.a.createElement("div",{className:"content has-text-left has-text-centered-mobile"},s.a.createElement("p",null,t.last_message.text)))))))}function xt(e){var t=e.message,a=e.isCurrentUser,n=e.prevMessage,r=Object(de.a)(e,["message","isCurrentUser","prevMessage"]),c=R.isDifferentDay(t,n);return s.a.createElement(s.a.Fragment,null,!!c&&s.a.createElement("p",{className:"is-size-8 my-4 has-text-grey-light"},c.calendar({sameElse:"DD/MMM/YYYY"})),s.a.createElement("div",Object.assign({},r,{style:Object(l.a)({flexGrow:0},r.style),className:"container my-1 ".concat(r.className," ").concat(a?"mr-0":"ml-0")}),s.a.createElement("div",{className:"columns my-0 mx-0 is-vcentered ".concat(a?"is-flex-direction-row-reverse":"")},s.a.createElement("div",{className:"column is-paddingless is-narrow is-flex",style:{justifyContent:"center"}},s.a.createElement("div",{className:"column is-narrow is-flex",style:{justifyContent:"center"}},s.a.createElement("figure",{className:"image is-32x32 is-flex"},s.a.createElement("img",{className:"is-rounded",style:{border:"solid #eaeaea 0.5px"},onError:function(e){return e.currentTarget.src=ot.a},src:t.user.profileImageURL}))),s.a.createElement("div",{className:"column is-size-7"},s.a.createElement("span",null,t.user.firstName," ",t.user.lastName)))),s.a.createElement("article",{style:{borderRadius:"2em",border:a?"solid #dadada88 1px":0},className:"content px-4 py-2 ".concat(a?"has-background-white has-text-black":"has-background-link has-text-white")},s.a.createElement("p",null,t.text))))}function Nt(e){var t=e.onNewChat,a=void 0===t?function(){}:t,r=e.onOptionsClick,c=void 0===r?function(){}:r,l=e.className,m=void 0===l?"":l,p=Object(n.useContext)(vt).chats,h=Object(n.useState)(null),f=Object(i.a)(h,2),b=f[0],v=f[1],E=Object(n.useState)(""),g=Object(i.a)(E,2),x=g[0],N=g[1],y=Object(n.useState)(!1),w=Object(i.a)(y,2),j=w[0],O=w[1],k=Object(n.useCallback)(function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O(!0),e.prev=1,!(p.length<1)){e.next=4;break}throw new Error("There is no chat to search");case 4:t||v(null),a=new RegExp(t,"i"),n=p.filter((function(e){var t,n;return!!e.last_message&&e.last_message.text.search(a)>=0||(null===(t=e.recipient.firstName)||void 0===t?void 0:t.search(a))>=0||(null===(n=e.recipient.lastName)||void 0===n?void 0:n.search(a))>=0})),console.log(n),v(n),O(!1),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0),v([]),O(!1);case 17:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),[p]),C=Object(st.a)((function(e){e&&(e.stopPropagation(),e.preventDefault());var t=x.trim();t||v(null),t&&k(t)}),800);return Object(n.useEffect)((function(){C()}),[x]),s.a.createElement("div",{className:"".concat(m," panel job-panel has-background-white-ter is-flex is-size-7")},s.a.createElement("div",{className:"panel-heading is-flex is-vcentered pb-4"},s.a.createElement("p",{className:"has-text-left is-size-6"},"Recent Messages"),s.a.createElement("div",{className:"field is-grouped is-grouped-right"},s.a.createElement("p",{className:"control"},s.a.createElement("button",{className:"button is-rounded is-small",onClick:a},s.a.createElement("span",{className:"icon"},s.a.createElement(nt.a,null)))),s.a.createElement("p",{className:"control"},s.a.createElement("button",{className:"button is-rounded is-small",onClick:c},s.a.createElement("span",{className:"icon"},s.a.createElement(bt.a,null)))))),s.a.createElement("div",{className:"panel-block"},s.a.createElement("div",{className:"field has-addons",style:{flex:1}},s.a.createElement("form",{onSubmit:function(e){e.stopPropagation(),e.preventDefault(),C()},className:"control is-expanded has-icons-left"},s.a.createElement("input",{value:x,onChange:function(e){return N(e.target.value)},style:{borderRight:0},className:"input is-rounded",type:"search",placeholder:"Search Messages..."}),s.a.createElement("span",{className:"icon is-left"},s.a.createElement(ve.z,null))))),s.a.createElement("div",{className:"has-background-white-ter",style:{overflowY:"auto",overflowX:"hidden"}},s.a.createElement(o.b,{path:"".concat(U),render:function(){return j?s.a.createElement("div",{key:"meassages-loader",className:"px-6 my-6 is-flex"},s.a.createElement("progress",{style:{height:"0.4rem"},className:"progress is-small my-6",max:"100"},"loading")):x&&b&&b.length<1?s.a.createElement(ye,{key:"messages-search-empty",className:"my-6",style:{backgroundColor:"transparent"},text:"Search did not return any chat"}):p.length<1?s.a.createElement(ye,{key:"messages-empty",className:"my-6",style:{backgroundColor:"transparent"},text:"No chat started yet!"}):(x&&b?b:p).map((function(e){return s.a.createElement(gt,{key:e.id,chat:e,to:"".concat(U,"/").concat(e.id)})}))}})))}function yt(e){var t=e.chat,a=e.className,r=Object(n.useContext)(F),c=Object(n.useState)([]),l=Object(i.a)(c,2),o=l[0],m=l[1],p=Object(n.useState)(""),h=Object(i.a)(p,2),f=h[0],b=h[1],v=Object(n.useState)(!1),E=Object(i.a)(v,2),g=E[0],x=E[1],N=Object(n.useState)(null),y=Object(i.a)(N,2),w=y[0],j=y[1],O=Object(Se.useToasts)().addToast,k=Object(n.useRef)(null),C=Object(n.useRef)(null),S=Object(n.useCallback)(Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=2;break}return e.abrupt("return",j(null));case 2:(null===t||void 0===t?void 0:t.recipient)&&j(null===t||void 0===t?void 0:t.recipient);case 3:case"end":return e.stop()}}),e)}))),[null===t||void 0===t?void 0:t.recipient,w]),P=Object(n.useCallback)(Object(d.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x(!0),e.prev=1,a=f.trim()){e.next=5;break}throw new Error("Cannot send empty message!");case 5:if(t&&r.user){e.next=7;break}throw new Error("No chat thread available!");case 7:return e.next=9,R.sendMessage(r,t,{text:a,type:"text",user:r.user});case 9:b(""),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0),O(e.t0.message||"Failed to send message",{appearance:"error"});case 16:return e.prev=16,x(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,12,16,19]])}))),[f]);return Object(n.useEffect)((function(){if(t&&t.initialized){var e=R.listenForChatMessages(r,t,(function(e,t){e?console.log(e):t&&m(t)}));return function(){e()}}}),[null===t||void 0===t?void 0:t.recipient,null===t||void 0===t?void 0:t.initialized]),Object(n.useEffect)((function(){if(b(""),(null===t||void 0===t?void 0:t.recipient)&&w&&w.id!==(null===t||void 0===t?void 0:t.recipient.id)&&j(t.recipient),k.current){var e=k.current;e.scrollHeight>e.clientHeight&&e.scrollTop<e.scrollHeight-e.clientHeight&&(k.current.scroll?k.current.scroll(0,e.scrollHeight-e.clientHeight):k.current.scrollTop=e.scrollHeight-e.clientHeight)}var a;(null===t||void 0===t?void 0:t.recipient)&&document.activeElement!==C.current&&(null===(a=C.current)||void 0===a||a.focus())}),[null===t||void 0===t?void 0:t.recipient,o.length]),t?s.a.createElement("div",{className:"".concat(a," card job-detail is-fullheight is-flex-direction-column"),style:{zIndex:1,animation:"all 0.5s linear"}},s.a.createElement("div",{className:"card-content is-paddingless is-atleast-fullheight"},s.a.createElement("div",{className:"level py-4 mb-0 is-mobile",style:{zIndex:2}},s.a.createElement("div",{className:"level-item is-size-7"}),s.a.createElement("div",{className:"level-item is-size-5 has-text-weight-bold"},"".concat(t.recipient.firstName," ").concat(t.recipient.lastName)),s.a.createElement("div",{className:"level-item is-size-7 pr-4",style:{justifyContent:"flex-end"}},s.a.createElement("button",{onClick:S,className:"button is-rounded is-small"},s.a.createElement(bt.a,null)))),s.a.createElement("div",{className:"columns mx-0 my-0 is-fullheight is-clipped"},s.a.createElement("div",{className:"container is-fullheight is-fluid px-0 is-clipped ".concat(w?"column is-7 is-hidden-mobile":""),style:{position:"relative",paddingBottom:"6em"}},s.a.createElement("section",{ref:k,style:{overflowY:"auto"},className:"section is-flex pt-1 pb-0 is-fullheight is-flex-direction-column"},(!1===t.initialized||o.length<1)&&s.a.createElement("div",{className:"is-flex",style:{flexDirection:"column"}},s.a.createElement("div",{className:"card-content is-paddingless is-flex-centered has-text-grey my-6"},s.a.createElement("span",{className:"my-4"},s.a.createElement(ve.k,{fill:"#811",style:{height:"8rem",width:"8rem"}})),s.a.createElement("p",{className:"is-uppercase is-size-6 has-text-weight-bold"},"Send your first chat to `",t.recipient.firstName," ",t.recipient.lastName,"`"))),o.map((function(e,t){var a;return s.a.createElement(xt,{isCurrentUser:e.user.id===(null===(a=r.user)||void 0===a?void 0:a.id),message:e,prevMessage:o[t-1],key:e._id})}))),s.a.createElement("div",{className:"columns is-mobile is-fullheight mx-0 my-0",style:{position:"relative",left:0,right:0,bottom:0,height:"6em",borderTop:"solid #dadada88 1px"}},s.a.createElement("div",{className:"column is-8 is-mobile"},s.a.createElement("div",{className:"control ".concat(g&&"is-loading")},s.a.createElement("textarea",{autoFocus:!0,ref:C,onChange:function(e){return b(e.target.value)},value:f,style:{border:0,height:"100%",minHeight:"unset"},className:"textarea has-fixed-size",placeholder:"Type a message..."}))),s.a.createElement("div",{className:"column columns is-centered mx-0 my-0 is-4 is-mobile is-flex"},s.a.createElement("div",{className:"buttons"},s.a.createElement("button",{className:"button is-success is-rounded",disabled:!f||g,onClick:P},"SEND"))))),!!w&&s.a.createElement("div",{className:"column is-5",style:{borderLeft:"solid 1px #8884"}},s.a.createElement("div",{className:"container pt-4 pb-0 is-flex",style:{flexDirection:"column"}},s.a.createElement("div",{style:{borderBottom:"solid #aaa4 0.2px",alignItems:"stretch"},className:"columns is-centered mb-0 is-flex is-flex-direction-column px-4"},s.a.createElement("div",{className:"column is-narrow is-flex",style:{justifyContent:"center"}},s.a.createElement("figure",{className:"image is-128x128 is-flex"},s.a.createElement("img",{key:w.profilePhoto,className:"is-rounded",src:w.profilePhoto}))),s.a.createElement("div",{className:"column"},s.a.createElement("div",{className:"container has-text-centered "},s.a.createElement("p",{className:"is-size-6 has-text-weight-bold"},"".concat(w.firstName," ").concat(w.lastName)),s.a.createElement("div",{className:"content"},s.a.createElement("p",{className:"is-size-6"},s.a.createElement("span",{className:"icon has-text-info"},s.a.createElement(ve.C,null)),w.starRate),s.a.createElement("p",{className:"is-size-6"},w.profileBio),s.a.createElement("p",{className:"has-text-grey-light is-size-8"},s.a.createElement("span",{className:"is-uppercase"},"member since"),"\xa0 ",M()(w.dateCreated).calendar({sameElse:"DD/MMM/YYYY"})))))),s.a.createElement("div",{className:"is-flex py-4",style:{flexDirection:"column",justifyContent:"space-between",flex:1}},s.a.createElement("table",{className:"table is-hoverable is-fullwidth"},s.a.createElement("tbody",{className:"is-size-6"},s.a.createElement("tr",{className:"is-flex has-text-left"},s.a.createElement("td",{style:{flex:1},className:"has-text-grey is-size-6"},w.phoneNumber),s.a.createElement("td",{style:{flex:2},className:"has-text-right"},s.a.createElement(me.b,{to:{pathname:"".concat(te,"/").concat(w.id),state:{user:w}},className:"has-text-link pr-0 pb-0 is-size-6"},"View Profile"))))))))))):s.a.createElement("div",{className:"".concat(a," card job-detail"),style:{flexDirection:"column"}},s.a.createElement("div",{className:"card-content is-paddingless is-flex-centered has-text-grey my-6"},s.a.createElement("span",{className:"my-4"},s.a.createElement(ve.k,{fill:"#811",style:{height:"8rem",width:"8rem"}})),s.a.createElement("p",{className:"is-uppercase is-size-6 has-text-weight-bold"},"Select a contact to start a chat")))}function wt(){Object(n.useContext)(F);var e=Object(n.useContext)(vt).chats,t=Object(n.useState)(void 0),a=Object(i.a)(t,2),r=a[0],c=a[1],l=Object(o.h)(),m=Object(o.i)().id;return Object(n.useEffect)((function(){if(m){var t=e.find((function(e){return e.id===m}));if(t)c(t);else{var a=(l.state||{chat:null}).chat;c(a||void 0)}}else c(void 0)}),[l,e]),s.a.createElement("div",{className:"columns is-gapless px-4 py-4 is-fullheight is-multiline"},s.a.createElement(Nt,{onNewChat:function(){},className:"column is-3 is-12-mobile is-clipped is-fullheight"}),s.a.createElement(yt,{chat:r,className:"column is-7 is-12-mobile is-flex"}))}function jt(){var e=Object(n.useContext)(F),t=Object(n.useState)(),a=Object(i.a)(t,2),r=a[0],c=a[1],l=Object(n.useState)(!0),m=Object(i.a)(l,2),p=m[0],h=m[1],f=Object(n.useState)([]),b=Object(i.a)(f,2),v=b[0],E=b[1],g=Object(n.useState)(!0),x=Object(i.a)(g,2),N=x[0],y=x[1],w=Object(o.h)(),j=Object(o.i)().id,O=Object(Se.useToasts)().addToast;return Object(n.useEffect)((function(){Object(d.a)(u.a.mark((function t(){var a,n,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,h(!0),a=w.state||{user:null},!(n=a.user)){t.next=7;break}c(n),t.next=13;break;case 7:if(j){t.next=9;break}throw new Error("No user found!");case 9:return t.next=11,D.getExternalUser(e,j);case 11:s=t.sent,c(s);case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(0),console.log(t.t0),O(t.t0.message||"Failed to load user data!",{appearance:"error"});case 19:return t.prev=19,h(!1),t.finish(19);case 22:case"end":return t.stop()}}),t,null,[[0,15,19,22]])})))()}),[w]),Object(n.useEffect)((function(){Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=3;break}return y(!1),e.abrupt("return");case 3:return e.prev=3,y(!0),e.next=7,D.getComments(j);case 7:t=e.sent,E(t),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0),O(e.t0.message||"Failed to load comments!",{appearance:"error"});case 15:return e.prev=15,y(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,11,15,18]])})))()}),[r]),s.a.createElement("div",{className:"is-1 is-variable px-3 py-3 my-0 is-fullheight is-multiline"},s.a.createElement("div",{className:"has-background-link",style:{height:"10em",width:"100%",borderRadius:"1em 1em 0 0",border:"solid #dadada88 1px",borderBottom:0}}),p?s.a.createElement("div",{className:"columns is-flex-centered is-gapless is-clipped",style:{marginBottom:"0.8em",borderRadius:"0 0 1em 1em",backgroundColor:"#fafafa",border:"solid #dadada88 1px",borderTop:0,height:"76%"}},s.a.createElement("div",{className:"column is-4 is-12-mobile"},s.a.createElement("div",{className:"section px-6"},s.a.createElement("progress",{className:"progress is-small is-danger",max:"100"},"loading")))):r?s.a.createElement("div",{className:"columns is-gapless",style:{marginBottom:"0.8em",borderRadius:"0 0 1em 1em",backgroundColor:"#fafafa",border:"solid #dadada88 1px",borderTop:0,minHeight:"68%"}},s.a.createElement("div",{className:"column is-3 is-flex is-flex-direction-column has-text-left",style:{alignItems:"stretch"}},s.a.createElement("figure",{className:"image is-flex is-128x128",style:{top:"-5.6em",alignSelf:"center"}},s.a.createElement("img",{className:"is-rounded",onError:function(e){return e.currentTarget.src=ot.a},src:Ce.getPhotoURL(e,r.id),style:{background:"radial-gradient(#fff ,#3273dc 300% 4%)",border:"solid #8884 0.1px"}})),s.a.createElement("div",{className:"is-flex mb-4 is-flex-direction-column px-5",style:{justifyContent:"space-between",alignItems:"stretch",flexGrow:1,position:"relative"}},s.a.createElement("div",{className:"content has-text-left",style:{position:"relative",top:"-4em",width:"100%"}},s.a.createElement("p",{className:"mb-1 has-text-weight-bold"},r.firstName," ",r.lastName),s.a.createElement("p",{className:"mb-2 is-inline-flex has-text-grey-light"},s.a.createElement("span",{className:"is-capitalized mr-2"},r.occupation),s.a.createElement("span",{className:"is-inline-flex"},s.a.createElement("span",{className:"icon has-text-info"},s.a.createElement(ve.C,null)),s.a.createElement("span",null,r.starRate))),s.a.createElement("p",{className:"mb-2"},r.profileBio),s.a.createElement("p",{className:"mb-1 is-flex has-text-grey",style:{alignItems:"center"}},s.a.createElement("span",{className:"icon mr-2"},s.a.createElement(ve.v,null)),r.city||s.a.createElement("span",{className:"has-text-grey-light is-italic is-size-7"},"Not Specified")),s.a.createElement("p",{className:"mb-1 is-flex has-text-grey",style:{alignItems:"center"}},s.a.createElement("span",{className:"icon mr-2"},s.a.createElement(ve.n,null)),r.email||s.a.createElement("span",{className:"has-text-grey-light is-italic is-size-7"},"Not Specified")),s.a.createElement("p",{className:"mb-1 is-flex has-text-grey",style:{alignItems:"center"}},s.a.createElement("span",{className:"icon mr-2 is-size-5"},s.a.createElement(ve.s,null)),r.educationalBackground[0]||s.a.createElement("span",{className:"has-text-grey-light is-italic is-size-7"},"Not Specified"))),s.a.createElement("div",{className:"has-text-grey-light is-uppercase has-text-left is-size-7"},"Joined ",M()(r.dateCreated).calendar({sameElse:"DD/MMM/YYYY"})))),s.a.createElement("div",{className:"column is-5 is-flex is-flex-direction-column has-text-left",style:{alignItems:"stretch",border:"solid #dadada88 1px"}},s.a.createElement("div",{className:"is-flex is-flex-direction-column",style:{justifyContent:"flex-start",alignItems:"stretch",flexGrow:1,position:"relative"}},s.a.createElement("header",{className:"px-5 py-3 is-size-7 has-text-weight-bold is-uppercase"},"Comments"),s.a.createElement("div",{className:"content has-text-left px-5 py-2 is-size-7 has-background-white",style:{flexGrow:1}},N?s.a.createElement("div",{className:"section px-6"},s.a.createElement("progress",{className:"progress is-small is-danger",max:"100"},"loading")):s.a.createElement(s.a.Fragment,null,v.length<1&&s.a.createElement(ye,{className:"mb-4",icon:s.a.createElement(ve.o,{className:"has-text-warning-dark is-size-2 mb-3"}),style:{backgroundColor:"transparent"},text:"".concat(r.id===e.user.id?"You have":"User has"," not received any comment yet!")}),v.map((function(e){return s.a.createElement("p",{className:"my-3"},s.a.createElement("span",null,'"',e.text,'"'),s.a.createElement("span",null,"-","".concat(e.first_name," ").concat(e.last_name)))})))))),s.a.createElement("div",{className:"column is-4 is-flex is-flex-direction-column has-text-left",style:{alignItems:"stretch"}},s.a.createElement("div",{className:"is-flex is-flex-direction-column",style:{justifyContent:"flex-start",alignItems:"stretch",flexGrow:1,position:"relative"}},s.a.createElement("header",{className:"px-5 py-3 is-size-7 has-text-weight-bold is-uppercase"},"Skills"),s.a.createElement("div",{className:"has-text-left px-5 py-2 is-size-7 has-background-white"},r.skills.length<1&&s.a.createElement(ye,{className:"mb-4",icon:s.a.createElement(ve.o,{className:"has-text-warning-dark is-size-2 mb-3"}),style:{backgroundColor:"transparent"},text:"".concat(r.id===e.user.id?"You have":"User has"," not selected any skill yet!")}),r.skills.map((function(e){return s.a.createElement("p",{className:"my-3"},"- ",e)}))),s.a.createElement("header",{className:"px-5 py-3 is-size-7 has-text-weight-bold is-uppercase"},"Licenses"),s.a.createElement("div",{className:"has-text-left px-5 py-2 is-size-7 has-background-white",style:{flexGrow:1}},r.licenses.length<1&&s.a.createElement(ye,{icon:s.a.createElement(ve.o,{className:"has-text-warning-dark is-size-2 mb-3"}),style:{backgroundColor:"transparent"},text:"".concat(r.id===e.user.id?"You have":"User has"," not provided any licnese yet!")}),r.licenses.map((function(e){return s.a.createElement("div",{className:"columnsmy-3 has-text-centered-mobile"},s.a.createElement("p",{className:"column"},"- ",e.license_number),s.a.createElement("p",{className:"column is-3"},"Expires ",M()(e.expiration_date).calendar({sameElse:"DD/MMM/YYYY"})))})))))):s.a.createElement(ye,{className:"is-flex is-flex-direction-column is-size-5 is-flex-centered",icon:s.a.createElement(ve.o,{className:"has-text-danger is-size-1 mb-4"}),style:{marginBottom:"0.8em",borderRadius:"0 0 1em 1em",backgroundColor:"#fafafa",border:"solid #dadada88 1px",borderTop:0,height:"76%"}},s.a.createElement("p",{className:"block has-text-grey is-size-6"},"No user found!")))}function Ot(){var e=Object(n.useContext)(q),t=Object(n.useState)({showModal:!1}),a=Object(i.a)(t,2),r=(a[0],a[1],Object(n.useState)({first_name:"",last_name:"",password:"",password_verify:"",email:"",phone_number:"",showPassword:!1,showPasswordVerify:!1})),c=Object(i.a)(r,2);c[0],c[1];return Object(n.useEffect)((function(){return e.showToolbar(!1),e.showFooter(!1),function(){e.showFooter(!0),e.showToolbar(!0)}})),s.a.createElement(he,null,s.a.createElement("div",{className:"columns is-gapless is-fullheight is-multiline"},s.a.createElement("div",{className:"column is-flex-centered is-atleast-fullheight"},s.a.createElement(mt,null)),s.a.createElement("div",{className:"column is-6 is-hidden-touch is-flex has-background-success"})))}function kt(e){var t=e.title,a=e.children,n=void 0===a?s.a.createElement(s.a.Fragment,null):a;return s.a.createElement("div",{className:"container is-fluid settings-detail"},s.a.createElement("div",{className:"content mb-0 py-4"},s.a.createElement("p",{className:"has-text-weight-bold is-size-4 has-text-left has-text-centered-mobile"},t)),n)}function Ct(){Object(n.useContext)(F);return s.a.createElement("div",{className:"columns is-gapless px-4 py-4 is-fullheight is-multiline"},s.a.createElement("div",{className:"box px-0 py-0",style:{flexDirection:"column",flex:1}},s.a.createElement("div",{className:"card-content is-paddingless is-atleast-fullheight is-flex",style:{flexDirection:"column"}},s.a.createElement("div",{className:"level py-4 mb-0",style:{boxShadow:"0 0.125em 0.25em rgba(10, 10, 10, .1)"}},s.a.createElement("div",{className:"level-left-item is-size-6"},s.a.createElement("p",{className:"title is-size-6 has-text-weight-bold pl-4"},"Settings"))),s.a.createElement("div",{className:"container is-flex is-fluid px-0"},s.a.createElement("div",{className:"columns mx-0 is-multiline",style:{flexGrow:1}},s.a.createElement("div",{className:"column is-2-fullhd is-3-desktop is-12 px-0"},s.a.createElement("div",{className:"container"},s.a.createElement(me.c,{className:"has-text-black",activeClassName:"is-active",to:ce,exact:!0},s.a.createElement("div",{className:"py-4 is-size-5 settings-link"},s.a.createElement("p",{className:"mx-4"},"Login and Security"))),s.a.createElement(me.c,{className:"has-text-black",activeClassName:"is-active",to:le},s.a.createElement("div",{className:"py-4 is-size-5 settings-link"},s.a.createElement("p",{className:"mx-4"},"Payment Methods"))),s.a.createElement(me.c,{className:"has-text-black",activeClassName:"is-active",to:ie},s.a.createElement("div",{className:"py-4 is-size-5 settings-link"},s.a.createElement("p",{className:"mx-4"},"Additional Features"))),s.a.createElement(me.c,{className:"has-text-black",activeClassName:"is-active",to:oe},s.a.createElement("div",{className:"py-4 is-size-5 settings-link"},s.a.createElement("p",{className:"mx-4"},"Legal Documents"))))),s.a.createElement("div",{className:"column is-10-fullhd is-9-desktop is-12 is-flex px-0"},s.a.createElement(o.d,null,s.a.createElement(o.b,{path:ce,exact:!0,render:function(){return s.a.createElement(St,null)}}),s.a.createElement(o.b,{path:le,exact:!0,render:function(){return s.a.createElement(Pt,null)}}),s.a.createElement(o.b,{path:oe,exact:!0,render:function(){return s.a.createElement(zt,null)}}),s.a.createElement(o.b,{render:function(){return s.a.createElement("div",{className:"container is-fluid is-flex-centered settings-detail py-6"},s.a.createElement("div",{className:"content has-text-grey"},s.a.createElement("span",{className:"my-4"},s.a.createElement(ve.j,{fill:"#811",style:{height:"8rem",width:"8rem"}})),s.a.createElement("p",{className:"is-uppercase is-size-6 has-text-weight-bold"},"Manage your account")))}}))))))))}function St(){var e,t,a,r,c=Object(n.useContext)(F),o=Object(n.useState)({email:null===(e=c.user)||void 0===e?void 0:e.email,editEmail:!1,isLoadingEmail:!1,lastPasswordChanged:(null===(t=c.user)||void 0===t?void 0:t.lastPasswordChanged)?Object(A.unix)((null===(a=c.user)||void 0===a?void 0:a.lastPasswordChanged)/1e3):null}),m=Object(i.a)(o,2),u=m[0],d=m[1];return s.a.createElement(kt,{title:"Login and Security",children:s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column has-text-left has-text-centered-mobile"},s.a.createElement("p",{className:"title input is-size-5 pb-2 is-shadowless px-0",style:{border:0}},"Email Address"),s.a.createElement("p",{className:"subtitle has-text-grey"},"Email address connected to your account")),s.a.createElement("div",{className:"column has-text-right has-text-centered-mobile"},s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input ".concat(u.editEmail?"":"is-static"," has-text-black is-size-5 has-text-right has-text-centered-mobile"),value:u.email,contentEditable:!1,disabled:!u.editEmail,onChange:function(e){return d(Object(l.a)(Object(l.a)({},u),{},{email:e.target.value}))}})),s.a.createElement("div",{className:"field is-grouped is-grouped-right"},s.a.createElement("div",{className:"control"},s.a.createElement("button",{className:"button",onClick:function(){return d(Object(l.a)(Object(l.a)({},u),{},{editEmail:!u.editEmail}))}},"Change")),u.editEmail?s.a.createElement("div",{className:"control"},s.a.createElement("button",{className:"button is-info ".concat(u.isLoadingEmail?"is-loading":""),onClick:function(){d(Object(l.a)(Object(l.a)({},u),{},{isLoadingEmail:!0}))}},"Change")):null))),s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column has-text-left has-text-centered-mobile"},s.a.createElement("p",{className:"title input is-size-5 pb-2 is-shadowless px-0",style:{border:0}},"Phone Number"),s.a.createElement("p",{className:"subtitle has-text-grey"},"Your phone number provided upon signing-up")),s.a.createElement("div",{className:"column has-text-right has-text-centered-mobile"},s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input is-static has-text-right has-text-black is-size-5 has-text-centered-mobile",disabled:!0,value:null===(r=c.user)||void 0===r?void 0:r.phoneNumber})),s.a.createElement("p",{className:"subtitle has-text-grey"},"Due to restrictions, contact support to modify your phone number"))),s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column has-text-left has-text-centered-mobile"},s.a.createElement("p",{className:"title input is-size-5 pb-2 is-shadowless px-0",style:{border:0}},"Password"),s.a.createElement("p",{className:"subtitle has-text-grey"},"Maintain a strong, unique password to protect your account")),s.a.createElement("div",{className:"column has-text-right has-text-centered-mobile"},s.a.createElement("div",{className:"control title"},s.a.createElement("button",{className:"button is-link",onClick:function(){return d(Object(l.a)(Object(l.a)({},u),{},{editEmail:!u.editEmail}))}},"Change")),s.a.createElement("p",{className:"subtitle has-text-grey"},u.lastPasswordChanged?"Last modified ".concat(u.lastPasswordChanged.calendar({sameElse:"DD/MMM/YYYY"})):"Never Changed"))))})}function Pt(){var e,t,a,r=Object(n.useContext)(F),c=Object(n.useState)({email:null===(e=r.user)||void 0===e?void 0:e.email,editEmail:!1,isLoadingEmail:!1,lastPasswordChanged:(null===(t=r.user)||void 0===t?void 0:t.lastPasswordChanged)?Object(A.unix)((null===(a=r.user)||void 0===a?void 0:a.lastPasswordChanged)/1e3):null}),l=Object(i.a)(c,2);l[0],l[1];return s.a.createElement(kt,{title:"Payment Methods",children:s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"columns is-unselectable"},s.a.createElement("div",{className:"column has-text-left has-text-centered-mobile"},s.a.createElement("p",{className:"title is-size-5 pb-2 is-shadowless px-0",style:{border:0}},"Preferred Method"),s.a.createElement("p",{className:"subtitle has-text-grey"},"Selected method of payment for jobs")),s.a.createElement("div",{className:"column has-text-right has-text-centered-mobile"},s.a.createElement("p",{className:"is-size-5 pb-2 is-shadowless px-0",style:{border:0}},"VI 534***1234 12/22"),s.a.createElement(me.b,{to:"".concat(le,"/change")},"Change"))),s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column has-text-left has-text-centered-mobile"},s.a.createElement("p",{className:"title is-size-5 pb-2 is-shadowless px-0",style:{border:0}},"Other Methods"))),s.a.createElement("div",{className:"columns",style:{borderTop:0}},s.a.createElement("div",{className:"column has-text-right has-text-centered-mobile"},s.a.createElement("div",{className:"button is-white is-large"},s.a.createElement("span",{className:"icon"},s.a.createElement(ve.b,{size:80})),s.a.createElement("span",null,"Apple Pay"),s.a.createElement("span",{className:"icon"},s.a.createElement(ve.h,{size:20}))))),s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column has-text-right has-text-centered-mobile"},s.a.createElement("div",{className:"button is-white is-large"},s.a.createElement("span",{className:"icon"},s.a.createElement(ve.x,{size:80})),s.a.createElement("span",null,"PayPal"),s.a.createElement("span",{className:"icon"},s.a.createElement(ve.h,{size:20}))))),s.a.createElement("div",{className:"columns",style:{borderBottom:0}},s.a.createElement("div",{className:"column has-text-right has-text-centered-mobile"},s.a.createElement(me.b,{to:"".concat(le,"/add")},"+ Add a Payment Method"))))})}function zt(){var e,t,a,r=Object(n.useContext)(F),c=Object(n.useState)({email:null===(e=r.user)||void 0===e?void 0:e.email,editEmail:!1,isLoadingEmail:!1,lastPasswordChanged:(null===(t=r.user)||void 0===t?void 0:t.lastPasswordChanged)?Object(A.unix)((null===(a=r.user)||void 0===a?void 0:a.lastPasswordChanged)/1e3):null}),l=Object(i.a)(c,2);l[0],l[1];return s.a.createElement(kt,{title:"Legal Documents",children:s.a.createElement(s.a.Fragment,null,s.a.createElement(me.b,{to:"".concat(oe,"/useragreement"),className:"columns is-vcentered is-unselectable"},s.a.createElement("div",{className:"column has-text-left has-text-centered-mobile"},s.a.createElement("p",{className:"title is-size-5 pb-2 px-0"},"User Agreement")),s.a.createElement("div",{className:"column has-text-right has-text-centered-mobile"},s.a.createElement("p",{className:"is-size-5 pb-2 px-0",style:{border:0}},s.a.createElement("span",{className:"icon"},s.a.createElement(ve.h,null))))),s.a.createElement(me.b,{to:"".concat(oe,"/privacy"),className:"columns is-vcentered is-unselectable"},s.a.createElement("div",{className:"column has-text-left has-text-centered-mobile"},s.a.createElement("p",{className:"title is-size-5 pb-2 px-0"},"Privacy Policy")),s.a.createElement("div",{className:"column has-text-right has-text-centered-mobile"},s.a.createElement("p",{className:"is-size-5 pb-2 px-0",style:{border:0}},s.a.createElement("span",{className:"icon"},s.a.createElement(ve.h,null))))),s.a.createElement(me.b,{to:"".concat(oe,"/terms"),className:"columns is-vcentered is-unselectable"},s.a.createElement("div",{className:"column has-text-left has-text-centered-mobile"},s.a.createElement("p",{className:"title is-size-5 pb-2 px-0"},"Terms of Service")),s.a.createElement("div",{className:"column has-text-right has-text-centered-mobile"},s.a.createElement("p",{className:"is-size-5 pb-2 px-0",style:{border:0}},s.a.createElement("span",{className:"icon"},s.a.createElement(ve.h,null))))),s.a.createElement(me.b,{to:"".concat(oe,"/cookie"),className:"columns is-vcentered is-unselectable"},s.a.createElement("div",{className:"column has-text-left has-text-centered-mobile"},s.a.createElement("p",{className:"title is-size-5 pb-2 px-0"},"Cookie Policy")),s.a.createElement("div",{className:"column has-text-right has-text-centered-mobile"},s.a.createElement("p",{className:"is-size-5 pb-2 px-0",style:{border:0}},s.a.createElement("span",{className:"icon"},s.a.createElement(ve.h,null))))))})}function Dt(){var e,t=Object(n.useContext)(F),a=Object(n.useState)([]),r=Object(i.a)(a,2),c=r[0],l=r[1],m=Object(n.useState)(!0),p=Object(i.a)(m,2),h=p[0],f=p[1],b=(Object(o.h)(),Object(o.i)().id,Object(Se.useToasts)().addToast),v=Object(n.useCallback)(Object(d.a)(u.a.mark((function e(){var a,n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),a=Math.max(0,Math.floor(c.length/30))+1,n=30-c.length%30+30,e.next=6,Ve.getInvoices(t,a,n);case 6:s=e.sent,l([].concat(Object(Ye.a)(c),Object(Ye.a)(s))),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),b(e.t0.message||"Failed to fetch invoices",{appearance:"error"}),console.log(e.t0,"failed to fetch invoices");case 14:return e.prev=14,f(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,10,14,17]])}))),[c]);return Object(n.useEffect)((function(){v()}),[t.user,null===(e=t.user)||void 0===e?void 0:e.id]),s.a.createElement("div",{className:"is-1 is-variable px-3 py-3 my-0 is-fullheight is-uppercase is-multiline"},s.a.createElement("nav",{style:{width:"100%",borderRadius:"1em 1em 0 0",border:"solid #dadada88 1px"}},s.a.createElement("div",{className:"level py-3 px-5 mb-0"},s.a.createElement("div",{className:"level-item py-1 is-size-7"},s.a.createElement("span",{className:"is-flex-grow-1 has-text-left has-text-centered-mobile"},"Invoices")),s.a.createElement("div",{className:"level-item py-1 is-size-7 has-text-centered"},"search"),s.a.createElement("div",{className:"level-item py-1 is-size-7"},s.a.createElement("span",{className:"is-flex-grow-1 has-text-right has-text-centered-mobile"},"Page 1 of 10")))),h?s.a.createElement("div",{className:"columns is-flex-centered is-gapless is-clipped",style:{marginBottom:"0.8em",borderRadius:"0 0 1em 1em",backgroundColor:"#fafafa",border:"solid #dadada88 1px",borderTop:0,height:"80%"}},s.a.createElement("div",{className:"column is-4 is-12-mobile"},s.a.createElement("div",{className:"section px-6"},s.a.createElement("progress",{className:"progress is-small is-danger",max:"100"},"loading")))):s.a.createElement("div",{className:"columns is-gapless",style:{marginBottom:"0.8em",borderRadius:"0 0 1em 1em",backgroundColor:"#fafafa",border:"solid #dadada88 1px",borderTop:0,minHeight:"80%"}},c.length<=0&&s.a.createElement(ye,{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",backgroundColor:"transparent",width:"100%"},text:"No invoice available yet"}),c.length>0&&s.a.createElement("div",{className:"table-container",style:{width:"100%"}},s.a.createElement("table",{className:"table is-clipped is-bordered is-striped is-hoverable is-fullwidth",style:{minWidth:"100%",minHeight:"100%",borderRadius:"0 0 1em 1em",border:"solid #dadada88 1px"}},s.a.createElement("thead",null,s.a.createElement("tr",{className:"is-size-7 py-2"},s.a.createElement("th",null,"Invoice ID"),s.a.createElement("th",null,"Invoice Date"),s.a.createElement("th",null,"Job title"),s.a.createElement("th",null,"Location"),s.a.createElement("th",null,"Amount"),s.a.createElement("th",null,"Contractor Name"),s.a.createElement("th",null,"Payment Method"),s.a.createElement("th",null,"Invoice PDF"))),s.a.createElement("tbody",{className:"is-size-7 py-2"},c.map((function(e){return s.a.createElement("tr",null,s.a.createElement("td",null,e.invoiceReference),s.a.createElement("td",null,M()(e.dateCreated).format("DD-MMM-YYYY")),s.a.createElement("td",null,e.jobTitle),s.a.createElement("td",null,e.location),s.a.createElement("td",null,e.amount),s.a.createElement("td",null,e.deployee),s.a.createElement("td",null,e.paymentMethod),s.a.createElement("td",null,s.a.createElement(me.b,{to:e.invoiceURL},"View PDF ",s.a.createElement(ve.m,null))))})))))))}var Tt=function(){var e=Object(n.useContext)(F),t=Object(n.useState)({ready:!1}),a=Object(i.a)(t,2),r=a[0],c=a[1],m=Object(n.useState)(!0),u=Object(i.a)(m,2),d=u[0],p=u[1],h=Object(n.useState)(!0),f=Object(i.a)(h,2),b=f[0],v=f[1],E=Object(n.useState)(null),g=Object(i.a)(E,2),x={signedIn:g[0],setSignedIn:g[1],setAppReady:function(e){return c(Object(l.a)(Object(l.a)({},r),{},{ready:e}))},showToolbar:v,showFooter:function(e){return p(e)}};return Object(n.useEffect)((function(){e.loginListener=function(){e.signedIn()&&x.setSignedIn(e.user)},e.logoutListener=function(){return x.setSignedIn(null)},e.ready.then((function(e){if(!e)return console.log("Failed to start application due to an internal error.","Please contact application admin");c(Object(l.a)(Object(l.a)({},r),{},{ready:!0}))})).catch((function(e){console.log(e)}))}),[]),s.a.createElement(qe,null,s.a.createElement(Et,null,s.a.createElement(q.Provider,{value:x},r.ready?s.a.createElement(s.a.Fragment,null,b?s.a.createElement(xe,null):null,s.a.createElement("div",{className:"App-Body"},s.a.createElement("div",{className:"is-fullheight"},s.a.createElement(o.d,null,s.a.createElement(o.b,{component:ht,path:J,exact:!0}),s.a.createElement(o.b,{component:Ot,path:B,exact:!0}),s.a.createElement(o.b,{component:ft,path:se,exact:!0}),s.a.createElement(pe,{component:Ct,path:re}),s.a.createElement(pe,{render:function(e){return s.a.createElement(o.a,{to:{pathname:X,state:e.location.state}})},path:W,exact:!0}),s.a.createElement(pe,{component:ct,path:Q.active}),s.a.createElement(pe,{component:ct,path:Q.inactive}),s.a.createElement(pe,{component:wt,path:H}),s.a.createElement(pe,{component:jt,path:ae}),s.a.createElement(pe,{component:Dt,path:K,exact:!0}),s.a.createElement(pe,{component:We,path:G,exact:!0}),s.a.createElement(o.b,{path:V,strict:!1,exact:!0},e.signedIn()&&x.signedIn?s.a.createElement(o.a,{to:G}):s.a.createElement(o.a,{to:J})),s.a.createElement(pe,null)))),d?s.a.createElement(ue,null):null):s.a.createElement(we,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(Se.ToastProvider,{autoDismiss:5e3,placement:"top-center"},s.a.createElement(me.a,{basename:"/contractoradmin"},s.a.createElement(F.Provider,{value:Y},s.a.createElement(Tt,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},73:function(e,t,a){e.exports=a.p+"static/media/logo_runner.f7055140.jpg"}},[[258,1,2]]]);
//# sourceMappingURL=main.9ee88a7a.chunk.js.map