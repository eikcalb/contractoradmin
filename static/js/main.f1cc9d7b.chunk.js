(this.webpackJsonpgigchasers=this.webpackJsonpgigchasers||[]).push([[0],{162:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},257:function(e,t,a){e.exports=a(599)},491:function(e,t,a){},493:function(e,t,a){},599:function(e,t,a){"use strict";a.r(t);a(258),a(185),a(307);var n=a(1),s=a.n(n),r=a(64),c=a.n(r),l=(a(491),a(492),a(5)),i=a(16),o=a(33),m=(a(493),a(6)),u=a.n(m),d=a(11),p=a(56),h=a(57),b=a(58),f=a.n(b),v={name:"Gigchasers Admin",description:"Gigchasers admin dashboard",version:"1.0",hostname:"https://contractor-app-test-api.herokuapp.com/v1",Google:{mapKey:"AIzaSyB8xVAMRa2hoq8lRXEG1wXG3v2yR1KkHsQ"}},E=a(77),g=a.n(E),x="app.user.session",N="app.data";function w(e){return y.apply(this,arguments)}function y(){return(y=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g.a.config({driver:[g.a.INDEXEDDB,g.a.LOCALSTORAGE,g.a.WEBSQL],name:"".concat(t.config.name," v").concat(t.config.version),version:1,storeName:"adminstore",description:"Storage for Contractor application administrative interface"}),e.next=3,g.a.ready();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=g.a,O=a(255),k=a(254),C=function(e){Object(O.a)(a,e);var t=Object(k.a)(a);function a(e,n){var s;return Object(p.a)(this,a),(s=t.call(this,e,n)).token=void 0,s.jobType=void 0,s.activeTask=void 0,s.lastPasswordChanged=void 0,s.token=e.token,s.jobType=e.jobType,s.activeTask=e.activeTask,s.lastPasswordChanged=e.lastPasswordChanged,s}return Object(h.a)(a,[{key:"profileImageURL",get:function(){return this.profilePhoto}}]),Object(h.a)(a,null,[{key:"getUser",value:function(){var e=Object(d.a)(u.a.mark((function e(t,n,s){var r,c,l,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.initiateNetworkRequest("/users/".concat(n),{method:"GET",referrerPolicy:"no-referrer",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(s)}});case 3:if((r=e.sent).ok){e.next=22;break}return e.t0=Error,e.next=8,r.json();case 8:if(e.t3=c=e.sent,e.t2=null===e.t3,e.t2){e.next=12;break}e.t2=void 0===c;case 12:if(!e.t2){e.next=16;break}e.t4=void 0,e.next=17;break;case 16:e.t4=c.message;case 17:if(e.t1=e.t4,e.t1){e.next=20;break}e.t1="Failed to fetch user data!";case 20:throw e.t5=e.t1,new e.t0(e.t5);case 22:return e.next=24,r.json();case 24:return l=e.sent,(i=new a(l,!0)).id=n,i.token=s,e.abrupt("return",i);case 31:throw e.prev=31,e.t6=e.catch(0),e.t6;case 34:case"end":return e.stop()}}),e,null,[[0,31]])})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"getExternalUser",value:function(){var e=Object(d.a)(u.a.mark((function e(t,n){var s,r,c,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.initiateNetworkRequest("/users/".concat(n),{method:"GET",referrerPolicy:"no-referrer",headers:{"Content-Type":"application/json"}},!0);case 3:if((s=e.sent).ok){e.next=22;break}return e.t0=Error,e.next=8,s.json();case 8:if(e.t3=r=e.sent,e.t2=null===e.t3,e.t2){e.next=12;break}e.t2=void 0===r;case 12:if(!e.t2){e.next=16;break}e.t4=void 0,e.next=17;break;case 16:e.t4=r.message;case 17:if(e.t1=e.t4,e.t1){e.next=20;break}e.t1="Failed to fetch user data!";case 20:throw e.t5=e.t1,new e.t0(e.t5);case 22:return e.next=24,s.json();case 24:return c=e.sent,(l=new a(c,!0)).id=n,e.abrupt("return",l);case 30:return e.prev=30,e.t6=e.catch(0),console.log("failed to fetch user data",e.t6),e.abrupt("return",new a({}));case 34:case"end":return e.stop()}}),e,null,[[0,30]])})));return function(t,a){return e.apply(this,arguments)}}()}]),a}((function e(t,a){Object(p.a)(this,e),this.id=void 0,this.role=void 0,this.firstName=void 0,this.lastName=void 0,this.occupation=void 0,this.city=void 0,this.state=void 0,this.starRate=5,this.email=void 0,this.password=void 0,this.phoneNumber=void 0,this.profilePhoto=void 0,this.profileBio=void 0,this.dateCreated=void 0,this.accountStatus="Pending",this.workHistory=[],this.educationalBackground=[],this.skills=[],this.licenses=[],a?(this.role=t.role,this.firstName=t.first_name,this.lastName=t.last_name,this.occupation=t.occupation,this.starRate=t.star_rate,this.dateCreated=t.date_created,this.city=t.city,this.email=t.email,this.accountStatus=t.account_status,this.educationalBackground=t.educational_background,this.phoneNumber=t.phone_number,this.profilePhoto=t.profile_photo,this.state=t.state,this.skills=t.skills):(this.role=t.role,this.firstName=t.firstName,this.lastName=t.lastName,this.occupation=t.occupation,this.starRate=t.starRate,this.dateCreated=t.dateCreated,this.city=t.city,this.email=t.email,this.accountStatus=t.accountStatus,this.educationalBackground=t.educationalBackground,this.phoneNumber=t.phoneNumber,this.profilePhoto=t.profilePhoto,this.state=t.state,this.skills=t.skills),this.id=t.id})),P=new C({});P.firstName="Johnathan",P.lastName="Doe",P.id="unique",P.email="a@example.com",P.profileBio="Lorem ipsum dolor sit amet consectetur adipisicing elit. Ullam vero iure, ducimus, explicabo vel nesciunt eveniet, enim quis quos ex autem!",P.jobType="onsite",P.phoneNumber="080838111111",P.starRate=4.2,P.lastPasswordChanged=Date.now(),P.dateCreated=new Date("20/07/2020"),P.skills=["Farming","Poultry"];var S=function(){function e(){Object(p.a)(this,e),this.content=void 0,this.sender=void 0}return Object(h.a)(e,[{key:"isSameUser",value:function(e){return e.sender===this.sender}},{key:"isSameDay",value:function(){}}]),e}(),T={lastUserName:""},z=new(function(){function e(t){var a=this;Object(p.a)(this,e),this.config=void 0,this.user=void 0,this.ready=void 0,this.settings=T,this.logoutListener=void 0,this.loginListener=void 0,this.config=t,this.ready=new Promise(function(){var e=Object(d.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.init();case 3:t(!0),e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",n(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}())}return Object(h.a)(e,[{key:"init",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(this);case 2:return e.prev=2,e.next=5,j.getItem(N);case 5:(t=e.sent)&&(this.settings=t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.info(e.t0,"No app data persisted!");case 12:return e.prev=12,e.next=15,this.inflateUser();case 15:this.loginListener&&this.loginListener(),e.next=21;break;case 18:e.prev=18,e.t1=e.catch(12),console.log(e.t1);case 21:return e.abrupt("return",!0);case 22:case"end":return e.stop()}}),e,this,[[2,9],[12,18]])})));return function(){return e.apply(this,arguments)}}()},{key:"signedIn",value:function(){var e;return this.user&&(null===(e=this.user)||void 0===e?void 0:e.token)}},{key:"updateSettings",value:function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Empty options provided!");case 2:if(JSON.stringify(t)!==JSON.stringify(this.settings)){e.next=4;break}return e.abrupt("return");case 4:return this.settings=Object(l.a)(Object(l.a)({},this.settings),t),e.next=7,j.setItem(N,this.settings);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"initiateNetworkRequest",value:function(){var e=Object(d.a)(u.a.mark((function e(t,a){var n,s,r,c,i,o,m,d,p,h=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>2&&void 0!==h[2]&&h[2],c=!(h.length>3&&void 0!==h[3])||h[3],i=Object(l.a)(Object(l.a)({},null===a||void 0===a?void 0:a.headers),{},{Accept:"application/json",Authorization:r?"Bearer ".concat(null===(n=this.user)||void 0===n?void 0:n.token):null===a||void 0===a||null===(s=a.headers)||void 0===s?void 0:s.Authorization}),c&&(i["Content-Type"]="application/json"),o=Object(l.a)(Object(l.a)({},a),{},{referrerPolicy:"no-referrer",mode:"cors",headers:i}),e.next=7,fetch("".concat(this.config.hostname).concat(t),o);case 7:if(401!==(m=e.sent).status){e.next=28;break}if(this.user){e.next=11;break}throw new Error("Unauthenticated access not allowed!");case 11:return e.prev=11,e.next=14,this.reauthenticate();case 14:return d=e.sent,p=d.token,this.user.token=p,o&&o.headers&&o.headers.Authorization&&(o.headers.Authorization="Bearer ".concat(p)),e.next=20,this.initiateNetworkRequest(t,o);case 20:return e.abrupt("return",e.sent);case 23:return e.prev=23,e.t0=e.catch(11),e.next=27,this.logout();case 27:throw e.t0||new Error("App session expired. Login to continue!");case 28:return e.abrupt("return",m);case 29:case"end":return e.stop()}}),e,this,[[11,23]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"reauthenticate",value:function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Failed to authenticate user!");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"inflateUser",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getItem(x);case 2:if(t=e.sent){e.next=5;break}throw new Error("No session available for user!");case 5:return this.user=new C(t),e.abrupt("return",this.user);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"persistUser",value:function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.user){e.next=2;break}throw new Error("No user created!");case 2:return e.next=4,j.setItem(x,this.user);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"validateNumber",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Phone number must be provided!");case 2:if((t=t.trim())&&f.a.isMobilePhone(t)){e.next=5;break}throw new Error("Invalid phone number provided!");case 5:if(t.startsWith("+")){e.next=7;break}throw new Error("Phone number must begin with '+' and contain country code!");case 7:return e.next=9,this.initiateNetworkRequest("/users/phone/".concat(encodeURIComponent(t)),{method:"GET"});case 9:if((a=e.sent).ok){e.next=28;break}return e.t0=Error,e.next=14,a.json();case 14:if(e.t3=n=e.sent,e.t2=null===e.t3,e.t2){e.next=18;break}e.t2=void 0===n;case 18:if(!e.t2){e.next=22;break}e.t4=void 0,e.next=23;break;case 22:e.t4=n.message;case 23:if(e.t1=e.t4,e.t1){e.next=26;break}e.t1="Verification failed!";case 26:throw e.t5=e.t1,new e.t0(e.t5);case 28:return e.next=30,a.json();case 30:if(e.sent.valid){e.next=33;break}throw new Error("Invalid phone number (ensure phone number is associated with a user)!");case 33:return e.abrupt("return",!0);case 34:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"triggerVerification",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,s,r=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.length>1&&void 0!==r[1]?r[1]:"sms",t){e.next=3;break}throw new Error("Phone number must be provided!");case 3:if((t=t.trim())&&f.a.isMobilePhone(t)){e.next=6;break}throw new Error("Invalid phone number provided!");case 6:if(t.startsWith("+")){e.next=8;break}throw new Error("Phone number must begin with '+' and contain country code!");case 8:return e.next=10,this.initiateNetworkRequest("/users/sms_registration",{method:"POST",body:JSON.stringify({phone_number:t,channel:a})});case 10:if((n=e.sent).ok){e.next=29;break}return e.t0=Error,e.next=15,n.json();case 15:if(e.t3=s=e.sent,e.t2=null===e.t3,e.t2){e.next=19;break}e.t2=void 0===s;case 19:if(!e.t2){e.next=23;break}e.t4=void 0,e.next=24;break;case 23:e.t4=s.message;case 24:if(e.t1=e.t4,e.t1){e.next=27;break}e.t1="Verification failed!";case 27:throw e.t5=e.t1,new e.t0(e.t5);case 29:return e.abrupt("return",!0);case 30:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(d.a)(u.a.mark((function e(t,a,n){var s,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.validateLogin(t,a,n);case 3:return e.next=5,this.initiateNetworkRequest("/users/login",{method:"POST",referrerPolicy:"no-referrer",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({phone_number:t,code:a,password:n})});case 5:if((s=e.sent).ok){e.next=24;break}return e.t0=Error,e.next=10,s.json();case 10:if(e.t3=r=e.sent,e.t2=null===e.t3,e.t2){e.next=14;break}e.t2=void 0===r;case 14:if(!e.t2){e.next=18;break}e.t4=void 0,e.next=19;break;case 18:e.t4=r.message;case 19:if(e.t1=e.t4,e.t1){e.next=22;break}e.t1="Login failed!";case 22:throw e.t5=e.t1,new e.t0(e.t5);case 24:return e.next=26,s.json();case 26:if((c=e.sent).success){e.next=29;break}throw new Error("Login failed!");case 29:return e.next=31,C.getUser(this,c.userName,c.token);case 31:return this.user=e.sent,this.user.role,e.next=35,this.persistUser();case 35:return this.loginListener&&this.loginListener(),e.abrupt("return",this.user);case 39:throw e.prev=39,e.t6=e.catch(0),e.t6;case 42:case"end":return e.stop()}}),e,this,[[0,39]])})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"validateLogin",value:function(){var e=Object(d.a)(u.a.mark((function e(t,a,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n&&a){e.next=2;break}throw new Error("Credentials not provided!");case 2:if((t=t.trim())&&f.a.isMobilePhone(t)){e.next=5;break}throw new Error("Invalid phone number provided!");case 5:if(t.startsWith("+")){e.next=7;break}throw new Error("Phone number must begin with '+' and contain country code!");case 7:if(f.a.matches(n,/.{6,}/i)){e.next=9;break}throw new Error("Invalid password provided (Password must be more than 6 characters)!");case 9:if(f.a.matches(a,/[0-9]{4}/)){e.next=11;break}throw new Error("Invalid code provided (provided code must have 4 digits)!");case 11:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"addAdmin",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.validateRegister(t);case 3:return e.next=5,this.initiateNetworkRequest("/users/new",{method:"POST",body:JSON.stringify(Object(l.a)(Object(l.a)({},t),{},{role:"admin",account_status:"pending"}))});case 5:if((a=e.sent).ok){e.next=21;break}return e.t0=Error,e.next=10,a.json();case 10:if(e.t2=n=e.sent,e.t1=null===e.t2,e.t1){e.next=14;break}e.t1=void 0===n;case 14:if(!e.t1){e.next=18;break}e.t3=void 0,e.next=19;break;case 18:e.t3=n.message;case 19:throw e.t4=e.t3,new e.t0(e.t4);case 21:return e.next=23,a.json();case 23:return s=e.sent,e.abrupt("return",s);case 27:throw e.prev=27,e.t5=e.catch(0),e.t5;case 30:case"end":return e.stop()}}),e,this,[[0,27]])})));return function(t){return e.apply(this,arguments)}}()},{key:"validateRegister",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,s,r,c,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.email,n=t.password,s=t.first_name,r=t.last_name,c=t.password_verify,l=t.phone_number,a&&n){e.next=3;break}throw new Error("Credentials not provided!");case 3:if(n===c){e.next=5;break}throw new Error("Passwords do not match!");case 5:if(a=a.trim(),s=s.trim(),r=r.trim(),s&&r){e.next=10;break}throw new Error("Firstname and lastname must be provided!");case 10:if(a&&f.a.isEmail(a)){e.next=12;break}throw new Error("Invalid username provided!");case 12:if(l&&f.a.isMobilePhone(l)){e.next=14;break}throw new Error("Invalid phone number provided!");case 14:if(l.startsWith("+")){e.next=16;break}throw new Error("Phone number must begin with '+' and contain country code!");case 16:if(f.a.matches(n,/.{6,}/i)){e.next=18;break}throw new Error("Invalid password provided (Password must be more than 6 characters)!");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return new S,this.user=void 0,e.next=4,j.removeItem(x);case 4:this.logoutListener&&this.logoutListener();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}())(v);z.user=P;var _=Object(n.createContext)(z),L=Object(n.createContext)({setSignedIn:function(e){},signedIn:null,setAppReady:function(e){},showToolbar:function(e){},showFooter:function(e){}}),D="/register",A="/login",I="/messages",R="/messages/:id?",q="/",F="/dashboard",M="/invoices",J="/jobs",B="/jobs/active",U="/jobs/inactive",V={active:"/jobs/active/:id?",inactive:"/jobs/inactive/:id?"},G="/privacyPolicy",H="/terms",K="/profile",W="/help",Y="/logout",X="/settings",Q="/settings",$="/settings/payment",Z="/settings/features",ee="/settings/legal",te=a(13);function ae(){var e=Object(n.useContext)(_);return s.a.createElement("footer",{className:"footer is-unselectable"},s.a.createElement("div",{className:"content has-text-centered is-size-7-touch"},s.a.createElement("p",null,"\xa9 ",e.config.name," ",(new Date).getFullYear(),". All Rights Reserved | ",s.a.createElement(te.b,{to:G},"Privacy Policy")," | ",s.a.createElement(te.b,{to:H},"Terms of Service")," ")))}var ne=a(122);function se(e){var t=e.children,a=Object(ne.a)(e,["children"]),r=Object(n.useContext)(_),c=Object(n.useContext)(L),l=Object(o.h)();return s.a.createElement(o.b,a,r.signedIn()&&c.signedIn?t:s.a.createElement(o.a,{to:{pathname:A,state:{from:l}}}))}function re(e){var t=e.children,a=Object(n.useContext)(_),r=Object(n.useContext)(L),c=Object(o.h)();if(a.signedIn()&&r.signedIn){var l=(c.state||{from:{pathname:"/"}}).from;return s.a.createElement(o.a,{to:l})}return t}var ce,le={toolbar:{boxShadow:"-2px 2px 3px 0px #8888"},appLogoIcon:{fontSize:"2em",marginRight:".5em",color:"blue"},appLogoText:{fontSize:"1.2em",fontWeight:"bold"},jobProgressBar:{height:".4em"}},ie=a(9);function oe(){var e,t,a=Object(n.useState)({showMenu:!1}),r=Object(i.a)(a,2),c=r[0],o=r[1],m=Object(n.useContext)(_);Object(n.useContext)(L);return s.a.createElement("nav",{className:"navbar",role:"navigation",style:le.toolbar,"aria-label":"main navigation"},s.a.createElement("div",{className:"navbar-brand"},s.a.createElement(te.b,{className:"navbar-item",to:q},s.a.createElement(ie.k,{style:le.appLogoIcon}),s.a.createElement("span",{style:le.appLogoText},m.config.name)),s.a.createElement("a",{role:"button",className:"navbar-burger burger ".concat(c.showMenu?"is-active":""),"aria-label":"menu","aria-expanded":"false","data-target":"navbar",onClick:function(){clearTimeout(ce),c.showMenu?o(Object(l.a)(Object(l.a)({},c),{},{showMenu:!1})):(o(Object(l.a)(Object(l.a)({},c),{},{showMenu:!0})),ce=setTimeout((function(){o(Object(l.a)(Object(l.a)({},c),{},{showMenu:!1}))}),2e4))}},s.a.createElement("span",{"aria-hidden":"true"}),s.a.createElement("span",{"aria-hidden":"true"}),s.a.createElement("span",{"aria-hidden":"true"}))),s.a.createElement("div",{className:"navbar-menu ".concat(c.showMenu?"is-active":"")},s.a.createElement("div",{className:"navbar-start"},s.a.createElement(te.c,{to:F,exact:!0,activeClassName:"is-active",className:"navbar-item is-tab"},"Dashboard"),s.a.createElement(te.c,{to:I,activeClassName:"is-active",className:"navbar-item is-tab"},"Messages"),s.a.createElement(te.c,{to:M,activeClassName:"is-active",className:"navbar-item is-tab"},"Invoices"),s.a.createElement(te.c,{to:J,activeClassName:"is-active",className:"navbar-item is-tab"},"Jobs")),s.a.createElement("div",{className:"navbar-end"},s.a.createElement("div",{className:"navbar-item"},s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control has-icons-left"},s.a.createElement("input",{className:"input is-rounded",type:"search",placeholder:"Type to search..."}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement(ie.x,{className:"is-size-5"}))))),s.a.createElement("div",{className:"navbar-item has-dropdown is-hoverable"},s.a.createElement("span",{className:"navbar-link"},"".concat(null===(e=m.user)||void 0===e?void 0:e.firstName," ").concat(null===(t=m.user)||void 0===t?void 0:t.lastName)),s.a.createElement("div",{className:"navbar-dropdown"},s.a.createElement(te.b,{to:K,className:"navbar-item"},"Profile"),s.a.createElement(te.b,{to:W,className:"navbar-item"},"Help Center"),s.a.createElement(te.b,{to:Y,className:"navbar-item"},"Sign Out"))),s.a.createElement("div",{className:"navbar-item"},s.a.createElement(te.b,{to:X,className:"button is-rounded is-light is-fullwidth"},s.a.createElement(ie.h,null))))))}function me(e){var t=e.content,a=e.icon,n=e.onDismiss,r=e.text,c=Object(ne.a)(e,["content","icon","onDismiss","text"]);return s.a.createElement("div",{className:"notification px-4 is-light is-uppercase is-warning has-text-centered"},!!n&&s.a.createElement("button",{onClick:n,className:"delete"}),a||s.a.createElement(ie.n,{className:"has-text-warning-dark is-size-4 mb-2"}),c.children?c.children:t||s.a.createElement("p",{className:"block has-text-grey is-size-7"},r||"No data"))}function ue(){return s.a.createElement("section",{className:"hero is-fullheight is-bold is-flex-centered",style:{alignItems:"stretch",padding:"2em"}},s.a.createElement("div",{className:"hero-body is-flex-centered has-text-centered"},s.a.createElement("div",{className:"column is-4 is-12-mobile"},s.a.createElement("div",{className:"section px-6"},s.a.createElement("progress",{className:"progress is-small is-danger",max:"100"},"loading")))))}function de(e){var t=e.header,a=e.optionsElement,n=e.optionsText,r=e.onOptionsTextClick,c=e.children,l=e.style;return s.a.createElement("div",{className:"card",style:l},s.a.createElement("header",{className:"card-header"},s.a.createElement("p",{className:"card-header-title"},t),s.a.createElement("p",{className:"card-header-icon"},a||s.a.createElement("span",{className:"has-text-link",onClick:r},n))),s.a.createElement("div",{className:"card-content"},s.a.createElement("div",{className:"container is-fluid px-0"},c)))}var pe=a(161),he=(a(573),a(250));pe.a.initializeApp({apiKey:"AIzaSyDjXx1AqIQnkyKkCPh8HZKZYyiKGfiLcbc",authDomain:"contracting-app.firebaseapp.com",databaseURL:"https://contracting-app.firebaseio.com",projectId:"contracting-app",storageBucket:"contracting-app.appspot.com",messagingSenderId:"557426956160",appId:"1:557426956160:web:c1393a9710ed0e40151365"});var be=pe.a.firestore(),fe=new he.GeoFirestore(be);be.enablePersistence({synchronizeTabs:!0});var ve=a(99),Ee=function(){function e(){Object(p.a)(this,e)}return Object(h.a)(e,null,[{key:"getJobTypes",value:function(){var t=Object(d.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.types.doc("jobs").get().then(function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.exists&&(a=t.data().types),e.abrupt("return",Promise.resolve(a||[]));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"addJobType",value:function(){var t=Object(d.a)(u.a.mark((function t(a,n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=n.toLowerCase(),t.abrupt("return",e.types.doc("jobs").update({types:ve.a.firestore.FieldValue.arrayUnion(n)}));case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},{key:"addNewJob",value:function(){var t=Object(d.a)(u.a.mark((function t(a,n){var s,r,c,i,o,m=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=m.length>2&&void 0!==m[2]?m[2]:[],n.posted_by&&n.job_title&&n.salary&&n.wage&&(n.location||n.location_address)){t.next=3;break}throw new Error("Complete all required fields to continue!");case 3:if(!(n.tasks.length<1)){t.next=5;break}throw new Error("You must add at least 1 task for this job!");case 5:if(!(n.job_title.length<8||n.job_description.length<20)){t.next=7;break}throw new Error("Kindly enter a more meaningful title and description!");case 7:if(!(n.required_count<1)){t.next=9;break}throw new Error("Provide the number of people you require for this job!");case 9:if(!(n.salary<0)){t.next=11;break}throw new Error("Salary must be more than $0!");case 11:if(n.coordinates=new ve.a.firestore.GeoPoint(n.location.coords.latitude,n.location.coords.longitude),r=e.db.doc(),!(s&&s.length>0)){t.next=31;break}return i=new FormData,s.map((function(e){i.append("photo",e)})),t.next=18,a.initiateNetworkRequest("/job/upload",{method:"POST",headers:{"x-job-id":r.id},body:i},!0,!1);case 18:if((o=t.sent).ok){t.next=28;break}return t.t0=Error,t.next=23,o.json();case 23:if(t.t1=t.sent.message,t.t1){t.next=26;break}t.t1="Failed to upload job";case 26:throw t.t2=t.t1,new t.t0(t.t2);case 28:return t.next=30,o.json();case 30:c=t.sent.data;case 31:return n.id=r.id,t.abrupt("return",r.set(Object(l.a)(Object(l.a)({},n),{},{photo_files:c})));case 33:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},{key:"cancelJob",value:function(){var t=Object(d.a)(u.a.mark((function t(a,n){var s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("complete"!==n.status){t.next=2;break}throw new Error("You cannot cancel a completed job!");case 2:if("accepted"!==n.status){t.next=7;break}return t.next=5,a.initiateNetworkRequest("users/cancelJob",{method:"DELETE",body:JSON.stringify({jobID:n.id,role:null===(s=a.user)||void 0===s?void 0:s.role})},!0);case 5:t.next=9;break;case 7:return t.next=9,e.db.doc(n.id).delete();case 9:return t.abrupt("return",!0);case 10:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},{key:"getInactiveJobs",value:function(){var t=Object(d.a)(u.a.mark((function t(){var a,n=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.length>0&&void 0!==n[0]?n[0]:20,t.abrupt("return",e.db.where("status","==","complete").native.orderBy("date_created","desc").limit(a).get().then(function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],t.forEach((function(e){var t,n=e.data();n.id=e.id,(null===(t=n.location)||void 0===t?void 0:t.address)&&(n.location_address=n.location.address),a.push(n)})),e.abrupt("return",Promise.resolve(a));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"getActiveJobs",value:function(){var t=Object(d.a)(u.a.mark((function t(){var a,n=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.length>0&&void 0!==n[0]?n[0]:20,t.abrupt("return",e.db.where("status","in",["available","in review","accepted","in progress"]).native.orderBy("date_created","desc").limit(a).get().then(function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],t.forEach(function(){var e=Object(d.a)(u.a.mark((function e(t){var n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(s=t.data()).id=t.id,(null===(n=s.location)||void 0===n?void 0:n.address)&&(s.location_address=s.location.address),a.push(s);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",Promise.resolve(a));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"listenForActiveAndPendingJobs",value:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=e.db.where("status","in",["available","in review","accepted","in progress"]).limit(a).onSnapshot(function(){var e=Object(d.a)(u.a.mark((function e(a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a.native.forEach((function(e){var t,a=e.data();a.id=e.id,(null===(t=a.location)||void 0===t?void 0:t.address)&&(a.location_address=a.location.address),n.push(a)})),t(null,n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return t(e,null)}));return n}},{key:"listenForActiveJobs",value:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9,n=e.db.where("status","in",["in review","accepted","in progress"]).limit(a).onSnapshot(function(){var e=Object(d.a)(u.a.mark((function e(a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a.native.forEach((function(e){var t,a=e.data();a.id=e.id,(null===(t=a.location)||void 0===t?void 0:t.address)&&(a.location_address=a.location.address),n.push(a)})),t(null,n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return t(e,null)}));return n}},{key:"listenForActiveJobsWithChangeHandler",value:function(t){var a=t.added,n=t.modified,s=t.removed;return e.db.where("status","in",["available","in review","accepted","in progress"]).limit(6).onSnapshot(function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.native.docChanges().forEach((function(e){switch(e.type){case"added":a(e.doc);break;case"modified":n(e.doc);break;case"removed":s(e.doc)}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"getPhotoURL",value:function(e,t){return"".concat(e.config.hostname,"/images/").concat(t,".jpg")}}]),e}();Ee.db=fe.collection("jobs"),Ee.types=fe.collection("types");var ge=a(48),xe=a(34),Ne=a.n(xe),we=a(252),ye=a(251),je=function(e){var t=Object(n.useContext)(_),a=(new ye.a({apiKey:t.config.Google.mapKey,version:"weekly"}),e.job.coordinates);return Object(n.useEffect)((function(){}),[a]),s.a.createElement("div",Object.assign({id:"mapview",style:{width:"100%",height:"100%",backgroundColor:"#dadada"},ref:function(e){}},e))};function Oe(e){var t,a,r,c=e.job,l=Object(n.useContext)(_),i=Ne()(c.date_created.toDate());return s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-content"},s.a.createElement("div",{className:"columns mb-0"},s.a.createElement("div",{className:"column is-6 has-text-centered-touch has-text-left"},s.a.createElement("p",{style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}},c.job_title)),s.a.createElement("div",{className:"column has-text-centered-touch has-text-right"},s.a.createElement("p",null,c.location_address))),s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column has-text-left"},s.a.createElement("p",null,c.job_type)))),s.a.createElement("div",{className:"card-footer"},s.a.createElement("div",{className:"card-footer-item"},s.a.createElement("div",{className:"columns px-4 is-vcentered is-mobile",style:{flexDirection:"column",flex:1}},s.a.createElement("div",{className:"column is-12"},s.a.createElement("div",{className:"columns is-vcentered is-mobile"},s.a.createElement("div",{className:"column is-narrow is-flex",style:{justifyContent:"center"}},s.a.createElement("figure",{className:"image is-flex is-32x32"},s.a.createElement("img",{className:"is-rounded",src:Ee.getPhotoURL(l,null===(t=c.user)||void 0===t?void 0:t.id)}))),s.a.createElement("div",{className:"column is-narrow"},s.a.createElement("div",{className:"title is-6"},"".concat(null===(a=c.user)||void 0===a?void 0:a.firstName," ").concat(null===(r=c.user)||void 0===r?void 0:r.lastName))),s.a.createElement("div",{className:"column has-text-right"},i.calendar()))),s.a.createElement("div",{className:"column is-12"},s.a.createElement("progress",{className:"progress is-info",style:le.jobProgressBar,value:0,max:"100"},0))))))}function ke(e){var t,a,r,c,l=e.job,i=e.to,o=Object(n.useContext)(_);if("available"===l.status)return s.a.createElement(Ce,{job:l,to:i,key:"pending-".concat(l.id)});var m,u=Ne()(l.date_created.toMillis());return l.date_completed&&(m=Ne()(l.date_completed.toMillis())),s.a.createElement(te.c,{activeClassName:"is-active",to:i,style:{overflowX:"auto"},className:"job-item is-size-7 px-1 py-1 is-block card is-shadowless is-radiusless has-background-white"},s.a.createElement("div",{className:"card-content py-2 px-2"},s.a.createElement("div",{className:"container is-paddingless"},s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-6 has-text-centered-touch has-text-left"},s.a.createElement("p",{style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}},l.job_type)),s.a.createElement("div",{className:"column has-text-centered-touch has-text-right has-text-grey"},s.a.createElement("p",null,l.location_address))),s.a.createElement("div",{className:"columns is-vcentered is-mobile"},s.a.createElement("div",{className:"column is-narrow is-flex",style:{justifyContent:"center"}},s.a.createElement("figure",{className:"image is-flex is-48x48"},s.a.createElement("img",{className:"is-rounded",src:Ee.getPhotoURL(o,null===(t=l.user)||void 0===t?void 0:t.id)}))),s.a.createElement("div",{className:"column px-0 has-text-left"},s.a.createElement("div",{className:"title is-7 mb-1"},"".concat((null===(a=l.user)||void 0===a?void 0:a.firstName)||"John"," ").concat((null===(r=l.user)||void 0===r?void 0:r.lastName)||"Doe")),s.a.createElement("p",{className:"is-size-6"},s.a.createElement("span",{className:"icon has-text-info"},s.a.createElement(ie.A,null)),null===(c=l.user)||void 0===c?void 0:c.starRate)),s.a.createElement("div",{className:"column has-text-grey has-text-right"},u.calendar()))),s.a.createElement("div",{className:"columns mb-0 is-vcentered has-text-grey is-mobile",style:{flexDirection:"column",flex:1}},s.a.createElement("div",{className:"column is-12"},l.progress&&l.progress>=100?s.a.createElement("p",null,"Completed ",m.calendar()):s.a.createElement("progress",{className:"progress is-info",style:le.jobProgressBar,value:l.progress||0,max:"100"},l.progress))),s.a.createElement("div",{className:"content has-text-left has-text-grey is-flex is-flex-align-items-center"},s.a.createElement("span",{className:"icon has-text-info is-size-6"},s.a.createElement(ie.g,null)),s.a.createElement("span",{style:{lineHeight:"2em"}},l.job_title))))}function Ce(e){var t=e.job,a=e.to;Object(n.useContext)(_);return s.a.createElement(te.c,{activeClassName:"is-active",to:a,style:{overflowX:"auto"},className:"job-item is-size-7 px-1 py-1 is-block card is-shadowless is-radiusless has-background-white"},s.a.createElement("div",{className:"card-content py-2 px-2"},s.a.createElement("div",{className:"container is-paddingless"},s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-6 has-text-centered-touch has-text-left"},s.a.createElement("p",{style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}},t.job_type)),s.a.createElement("div",{className:"column has-text-centered-touch has-text-right has-text-grey"},s.a.createElement("p",null,t.location_address))),s.a.createElement("div",{className:"columns is-vcentered is-mobile"},s.a.createElement("div",{className:"column has-text-left"},s.a.createElement("p",{className:"is-size-7 is-flex is-vcentered"},s.a.createElement("span",{className:"icon is-size-6 has-text-info spinner"},s.a.createElement(we.a,null)),s.a.createElement("span",{style:{lineHeight:"2em"}},"Pending"))),s.a.createElement("div",{className:"column has-text-right"},s.a.createElement("p",null,"Searching for deployee"))))))}function Pe(e){var t=e.job,a=e.className,n=e.onCancel;if(!t)return s.a.createElement("div",{className:"".concat(a," card job-detail"),style:{flexDirection:"column"}},s.a.createElement("div",{className:"card-content is-paddingless is-flex-centered has-text-grey my-6"},s.a.createElement("span",{className:"my-4"},s.a.createElement(ie.s,{fill:"#811",style:{height:"8rem",width:"8rem"}})),s.a.createElement("p",{className:"is-uppercase is-size-6 has-text-weight-bold"},"View and manage job listings")));var r=Ne()(t.date_created.toMillis());return s.a.createElement("div",{className:"".concat(a," card job-detail is-size-6"),style:{flexDirection:"column"}},s.a.createElement("div",{className:"card-content is-paddingless"},s.a.createElement("div",{className:"level py-4 mb-0"},s.a.createElement("div",{className:"level-item is-size-7"},"POSTED ",r.calendar()),s.a.createElement("div",{className:"level-item is-size-6 has-text-weight-bold"},t.job_title),s.a.createElement("div",{className:"level-item is-size-7 has-text-grey"},t.id)),s.a.createElement("div",{className:"container is-fluid px-0"},s.a.createElement("div",{className:"columns is-fullheight mx-0 my-0 is-multiline animate__animated animate__fadeIn"},s.a.createElement("div",{className:"column is-8-fullhd is-7-desktop is-12 px-0 pt-0"},s.a.createElement(Se,{onJobCancel:n,job:t})),"available"===t.status||"in review"===t.status?s.a.createElement("div",{style:{borderLeft:"solid 1px #8881"},className:"column is-4-fullhd is-5-desktop is-12 is-flex is-paddingless"},s.a.createElement(je,{job:t,className:"container pt-4 pb-0 is-flex"})):s.a.createElement("div",{style:{borderLeft:"solid 1px #8881"},className:"column is-4-fullhd is-5-desktop is-12 is-flex"},s.a.createElement(Te,{job:t}))))))}function Se(e){var t,a,r,c,o,m,p=e.job,h=e.onJobCancel,b=Object(n.useContext)(_),f=Object(n.useState)({loadingCancel:!1}),v=Object(i.a)(f,2),E=v[0],g=v[1],x=Object(ge.useToasts)().addToast;p.date_completed&&(c=Object(xe.unix)(p.date_completed.toMillis()/1e3)),p.date_created&&(o=Object(xe.unix)(p.date_created.toMillis()/1e3)),c&&o&&(m=c.diff(o,"h",!0));var N=Object(n.useCallback)(Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,window.confirm("Are you sure you want to cancel this job? If Job is accepted, it will return to the job pool. Otherwise, the job will be deleted")){e.next=4;break}return e.abrupt("return");case 4:return g(Object(l.a)(Object(l.a)({},E),{},{loadingCancel:!0})),e.next=7,Ee.cancelJob(b,p);case 7:x("Cancelled job successfully!",{appearance:"success"}),h(p),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),x(e.t0.message||"Failed to cancel job!",{appearance:"error"});case 14:return e.prev=14,g(Object(l.a)(Object(l.a)({},E),{},{loadingCancel:!1})),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,11,14,17]])}))),[p,E]);return s.a.createElement("div",{className:"is-atleast-fullheight is-flex",style:{flexDirection:"column"}},"available"===p.status?s.a.createElement("div",{className:"section has-text-centered is-size-6"},s.a.createElement("span",{className:"px-4 py-4 is-flex is-flex-centered"},"Searching for deployees within ",10," mile radius from you")):s.a.createElement("figure",{className:"image is-16by9",style:{position:"relative",paddingTop:"30%"}},s.a.createElement("img",{src:"https://via.placeholder.com/728x90.png"}),s.a.createElement("a",{className:"button is-large",style:{position:"absolute",bottom:4,right:4,background:"transparent",border:0}},s.a.createElement("span",{className:"icon is-size-2"},s.a.createElement(ie.o,null)))),s.a.createElement("div",{className:"is-flex py-4",style:{flexDirection:"column",justifyContent:"space-between",flex:1}},s.a.createElement("div",{className:"section py-2 pb-3"},s.a.createElement("table",{className:"table is-hoverable is-fullwidth"},s.a.createElement("tbody",{className:"is-flex is-flex-direction-column is-size-7"},s.a.createElement("tr",{className:"is-flex has-text-left"},s.a.createElement("td",{style:{flex:1},className:"has-text-grey"},"TYPE"),s.a.createElement("td",{style:{flex:2},className:" has-text-left"},p.job_type)),s.a.createElement("tr",{className:"is-flex has-text-left"},s.a.createElement("td",{style:{flex:1},className:"has-text-grey"},"LOCATION"),s.a.createElement("td",{style:{flex:2},className:" has-text-left"},p.location_address)),s.a.createElement("tr",{className:"is-flex has-text-left"},s.a.createElement("td",{style:{flex:1},className:"has-text-grey"},"DESCRIPTION"),s.a.createElement("td",{style:{flex:2},className:" has-text-left"},p.job_description)),s.a.createElement("tr",{className:"is-flex has-text-left"},s.a.createElement("td",{style:{flex:1},className:"has-text-grey"},"PAY"),s.a.createElement("td",{style:{flex:2},className:"is-flex-align-items-center is-flex has-text-left"},s.a.createElement("span",null,"$",p.salary),"\xa0",s.a.createElement("span",{className:"has-text-grey-light"},"/",p.wage))),p.tasks&&p.tasks.length>0?s.a.createElement("tr",{className:"is-flex has-text-left"},s.a.createElement("td",{style:{flex:1},className:"has-text-grey"},"TASKS"),s.a.createElement("td",{style:{flex:2},className:" has-text-left"},null===(t=p.tasks)||void 0===t?void 0:t.map((function(e){return s.a.createElement("p",{key:e.text},"- ",e.text)})))):null,s.a.createElement("tr",{className:"is-flex has-text-left"},s.a.createElement("td",{style:{flex:1},className:"has-text-grey"}," START"),s.a.createElement("td",{style:{flex:2},className:"has-text-left"},o.calendar()||"-")),s.a.createElement("tr",{className:"is-flex has-text-left"},s.a.createElement("td",{style:{flex:1},className:"has-text-grey"},"END"),s.a.createElement("td",{style:{flex:2},className:" has-text-left"},(null===(a=c)||void 0===a?void 0:a.calendar())||"-")),s.a.createElement("tr",{className:"is-flex has-text-left"},s.a.createElement("td",{style:{flex:1},className:"has-text-grey"},"TOTAL TIME"),s.a.createElement("td",{style:{flex:2},className:" has-text-left"},(null===(r=m)||void 0===r?void 0:r.toFixed(2))||"-"))))),p.progress&&p.progress>=100?s.a.createElement("button",{className:"button is-info is-uppercase mx-4",style:{alignSelf:"flex-end"}},"View Invoice"):s.a.createElement("button",{disabled:E.loadingCancel,onClick:N,className:"button is-white is-uppercase is-inverted mx-4 ".concat(E.loadingCancel?"is-loading":""),style:{alignSelf:"flex-start",color:"white"}},"Cancel Job")))}function Te(e){var t,a,r,c,l,i,o,m,u,d,p=e.job,h=Object(n.useContext)(_);return p.date_created&&(d=Ne()(p.date_created.toMillis())),s.a.createElement("div",{className:"container pt-4 pb-0 is-flex",style:{flexDirection:"column"}},s.a.createElement("div",{style:{borderBottom:"solid #aaa4 0.2px"},className:"columns is-vcentered"},s.a.createElement("div",{className:"column is-narrow is-flex",style:{justifyContent:"center"}},s.a.createElement("figure",{className:"image is-80x80 is-flex"},s.a.createElement("img",{className:"is-rounded",src:Ee.getPhotoURL(h,null===(t=p.user)||void 0===t?void 0:t.id)}))),s.a.createElement("div",{className:"column"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"columns is-marginless is-vcentered is-mobile"},s.a.createElement("div",{className:"column pb-0 pl-0"},s.a.createElement("p",{className:"is-size-6 has-text-left has-text-weight-bold"},"".concat((null===(a=p.user)||void 0===a?void 0:a.firstName)||"John"," ").concat((null===(r=p.user)||void 0===r?void 0:r.lastName)||"Doe"))),s.a.createElement("div",{className:"column is-narrow has-text-right has-text-info pr-0 pb-0 is-size-7"},"View Profile")),s.a.createElement("div",{className:"content has-text-left"},s.a.createElement("p",{className:"is-size-6"},s.a.createElement("span",{className:"icon has-text-info"},s.a.createElement(ie.A,null)),null===(c=p.user)||void 0===c?void 0:c.starRate),s.a.createElement("p",{className:"is-size-7"},null===(l=p.user)||void 0===l?void 0:l.profileBio),s.a.createElement("p",{className:"has-text-left has-text-grey-light is-size-7"},s.a.createElement("span",{className:"is-uppercase"},"member since"),"\xa0 ",Ne()(null===(i=p.user)||void 0===i?void 0:i.dateCreated).calendar()))))),s.a.createElement("div",{className:"is-flex py-4",style:{flexDirection:"column",justifyContent:"space-between",flex:1}},s.a.createElement("table",{className:"table is-hoverable is-fullwidth"},s.a.createElement("tbody",{className:"is-size-7"},s.a.createElement("tr",{className:"is-flex has-text-left"},s.a.createElement("td",{style:{flex:1},className:"has-text-grey"},"CONTACT"),s.a.createElement("td",{style:{flex:2},className:"has-text-left"},null===(o=p.user)||void 0===o?void 0:o.phoneNumber)),s.a.createElement("tr",{className:"is-flex has-text-left"},s.a.createElement("td",{style:{flex:1},className:"has-text-grey"},"START TIME"),s.a.createElement("td",{style:{flex:2},className:"has-text-left"},d.calendar())),s.a.createElement("tr",{className:"is-flex has-text-left"},s.a.createElement("td",{style:{flex:1},className:"has-text-grey"},"HIGHLIGHTED SKILLS AND LICENSES"),s.a.createElement("td",{style:{flex:2},className:"has-text-left"},(null===(m=p.user)||void 0===m?void 0:m.skills)&&p.user.skills.length>0?null===(u=p.user.skills)||void 0===u?void 0:u.map((function(e){return s.a.createElement("p",null,"- ",e)})):"-")))),s.a.createElement("button",{className:"button is-info is-uppercase mx-4",style:{alignSelf:"flex-start"}},"Message")))}Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now();function ze(e){var t=e.className,a=Object(n.useContext)(_),r=Object(n.useState)({jobs:new Array,loading:!1}),c=Object(i.a)(r,2),o=c[0],m=c[1],p=Object(ge.useToasts)().addToast;return Object(n.useEffect)((function(){return m(Object(l.a)(Object(l.a)({},o),{},{loading:!0})),Ee.listenForActiveJobs(function(){var e=Object(d.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return m(Object(l.a)(Object(l.a)({},o),{},{loading:!1})),e.abrupt("return",p(t.message||"Failed to get jobs!"));case 3:return e.next=5,Promise.all(n.map(function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("available"===t.status||!t.executed_by){e.next=4;break}return e.next=3,C.getExternalUser(a,t.executed_by);case 3:t.user=e.sent;case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:n=e.sent,m(Object(l.a)(Object(l.a)({},o),{},{jobs:n,loading:!1}));case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())}),[]),s.a.createElement("div",{className:t},o.loading?s.a.createElement("progress",{className:"progress is-small is-info my-6",max:"100"},"loading"):o.jobs.map((function(e){return s.a.createElement(te.b,{key:e.id,to:"".concat(B,"/").concat(e.id),className:"column is-4-fullhd is-6-desktop is-12-touch list-item"},s.a.createElement(Oe,{job:e}))})))}function _e(e){var t=e.notification,a=Ne.a.unix(t.timestamp/1e3);return s.a.createElement("div",{className:"container is-fluid is-paddingless list-item py-2",title:t.title},s.a.createElement("div",{className:"columns is-variable is-1 py-1 px-1 is-vcentered"},s.a.createElement("div",{className:"column is-paddingless is-6 has-text-left has-text-centered-mobile  list-item-title"},s.a.createElement("p",{style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}},function(e){switch(e.type){case"discovery":return s.a.createElement("span",{className:"icon has-text-white has-background-info is-small",style:{borderRadius:"50%",fontSize:"0.6em"}}," ",s.a.createElement(ie.x,null)," ");case"location":return s.a.createElement("span",{className:"icon has-text-white has-background-info is-small",style:{borderRadius:"50%",fontSize:"0.6em"}}," ",s.a.createElement(ie.u,null)," ");case"progress":return s.a.createElement("span",{className:"icon has-text-white has-background-info is-small",style:{borderRadius:"50%",fontSize:"0.6em"}}," ",s.a.createElement(ie.e,null)," ")}}(t)," ",t.title)),s.a.createElement("div",{className:"column is-paddingless has-text-right has-text-centered-mobile list-item-subtitle"},s.a.createElement("p",{style:{maxLines:2}},a.fromNow()))),s.a.createElement("div",{className:"content"},s.a.createElement("p",null,t.content)))}function Le(e){var t=e.className,a=Object(n.useState)(!0),r=Object(i.a)(a,2),c=r[0],l=r[1];return s.a.createElement("nav",{className:t},s.a.createElement("div",{className:"panel is-clipped"},s.a.createElement("div",{onClick:function(){return l(!c)},className:"panel-heading is-size-6 has-text-left has-background-white-bis is-align-items-center is-flex is-flex-direction-row is-justify-content-space-between"},s.a.createElement("p",null,"Notifications"),s.a.createElement("button",{className:"button is-static has-background-white is-rounded is-size-8 is-small"},c?s.a.createElement(ie.c,{size:16,className:"icon has-text-black is-small"}):s.a.createElement(ie.d,{size:16,className:"icon has-text-black is-small"}))),s.a.createElement("div",{style:{transition:"all 0.500s linear"},className:"".concat(c?"":"is-height-0")},De.length>0?De.map((function(e){return s.a.createElement(te.b,{key:e.id,to:"/f",className:"panel-block"},s.a.createElement(_e,{notification:e}))})):s.a.createElement(me,{text:"No Notification available"}))))}var De=[{content:"testing 123",timestamp:Date.now(),type:"discovery",title:"testing notification",id:"23xe"},{content:"testing 12",timestamp:Date.now(),type:"location",title:"testing notification",id:"23xe"},{title:"testing 1",timestamp:Date.now(),type:"progress",content:"Lorem ipsum dolor sit amet consectetur adipisicing elit.?",id:"23se"},{title:"testing 1",timestamp:Date.now(),type:"location",content:"Lorem ipsum dolor sit amet consectetur adipisicing elit.?",id:"23se"},{title:"testing 1",timestamp:Date.now(),type:"discovery",content:"Lorem ipsum dolor sit amet consectetur adipisicing elit.?",id:"23se"}],Ae=Intl.NumberFormat("en-US",{currency:"USD",style:"currency",maximumFractionDigits:2});function Ie(e){var t=e.payment,a=Ne.a.unix(t.timestamp/1e3);return s.a.createElement("div",{className:"container is-fluid is-paddingless list-item py-2",title:t.title},s.a.createElement("div",{className:"columns is-variable is-1 py-1 px-1 is-vcentered"},s.a.createElement("div",{className:"column is-paddingless is-6 has-text-left has-text-centered-mobile list-item-title"},s.a.createElement("p",{style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}},t.title)),s.a.createElement("div",{className:"column is-paddingless has-text-right has-text-centered-mobile list-item-subtitle"},s.a.createElement("p",null,a.fromNow()))),s.a.createElement("div",{className:"content"},s.a.createElement("p",null,function(e){switch(e.type){case"pending":return"You have a pending charge of ".concat(Ae.format(e.cost)," for the completion of this job by ").concat(e.payee);case"paid":return"A payment of ".concat(Ae.format(e.cost)," has been submitted to ").concat(e.payee)}}(t))))}function Re(e){var t=e.className,a=Object(n.useState)(!0),r=Object(i.a)(a,2),c=r[0],l=r[1];return s.a.createElement("nav",{className:t},s.a.createElement("div",{className:"panel is-clipped"},s.a.createElement("div",{onClick:function(){return l(!c)},className:"panel-heading is-size-6 has-text-left has-background-white-bis is-align-items-center is-flex is-flex-direction-row is-justify-content-space-between"},s.a.createElement("p",null,"Payments"),s.a.createElement("button",{className:"button is-static has-background-white is-rounded is-size-8 is-small"},c?s.a.createElement(ie.c,{size:16,className:"icon has-text-black is-small"}):s.a.createElement(ie.d,{size:16,className:"icon has-text-black is-small"}))),s.a.createElement("div",{style:{transition:"all 0.500s linear"},className:"".concat(c?"":"is-height-0")},qe.length>0?qe.map((function(e){return s.a.createElement(te.b,{to:"/ f",key:e.id,className:"panel-block"},s.a.createElement(Ie,{payment:e}))})):s.a.createElement(me,{text:"No Payment data available"}))))}var qe=[{type:"pending",timestamp:Date.now(),cost:20.405,title:"Clear lawn",payee:"Philip Barnabas",id:"2ss354"},{type:"paid",timestamp:Date.now(),cost:200.405,title:"Clear lawn and take out firewood",payee:"Philip Barnabas",id:"23sss54"},{type:"pending",timestamp:Date.now(),cost:3000.405,title:"Clear lawn",payee:"Philip Barnabas",id:"235s4"}];function Fe(){return s.a.createElement("div",{className:"columns is-1 is-variable px-3 py-3 is-atleast-fullheight"},s.a.createElement(Le,{className:"column is-3 is-size-6 is-2-widescreen"}),s.a.createElement("div",{className:"column is-6 is-8-widescreen is-flex",style:{flexDirection:"column",justifyContent:"space-between"}},s.a.createElement(de,{header:"Active Jobs",optionsElement:s.a.createElement(te.b,{to:B},"View All"),style:{marginBottom:"0.8em"}},s.a.createElement(ze,{className:"columns is-centered is-vcentered is-multiline is-1 is-variable"}))),s.a.createElement(Re,{className:"column is-3 is-size-6 is-2-widescreen"}))}var Me=a(164),Je=a(123),Be=a.n(Je);function Ue(){return new Promise((function(e,t){if(!("geolocation"in navigator))throw new Error("Geolocation is not supported! Cannot find current location!");navigator.geolocation.getCurrentPosition(e,t,{enableHighAccuracy:!0,maximumAge:1e3})}))}var Ve=a(601);function Ge(e){var t=e.label,a=e.value,n=e.onChange,r=e.className,c=e.type,l=e.placeholder,i=e.icon,o=e.tagifyRef,m=void 0===o?null:o,u=e.required,d=void 0!==u&&u,p=e.whitelist,h=void 0===p?[]:p,b=e.mode,f=void 0===b?"select":b,v=e.disabled,E=void 0!==v&&v,g=e.loading,x=void 0!==g&&g,N=e.tags,w=void 0!==N&&N,y=e.showBorder,j=void 0===y||y,O=e.containerClassName,k=void 0===O?"":O,C=e.isTextArea,P=void 0!==C&&C,S=e.maxLength,T=void 0===S?Number.MAX_SAFE_INTEGER:S,z=e.helpTextTop,_=void 0===z?"":z,L=e.helpTextLeft,D=void 0===L?"":L,A=e.helpTextRight,I=void 0===A?"":A,R=e.hasAddons,q=void 0!==R&&R,F=e.addon,M=void 0===F?s.a.createElement(s.a.Fragment,null):F;return s.a.createElement("div",{className:"".concat(k," ").concat(j?"job-form-field":""," field has-text-left")},s.a.createElement("label",{className:"label is-flex",style:{justifyContent:"space-between",alignItems:"center"}},s.a.createElement("span",null,t)," ",s.a.createElement("span",{className:"has-text-right has-text-weight-normal is-size-7"},_)),q?s.a.createElement("div",{className:"".concat(q?"has-addons":""," field")},s.a.createElement("div",{className:"control ".concat(i?"has-icons-left":""," is-expanded")},w?s.a.createElement(Be.a,{tagifyRef:m,value:a,settings:{placeholder:l,whitelist:h,mode:f,trim:!0,autoComplete:{enabled:!0,rightKey:!0}},required:d,className:"".concat(r," input"),disabled:E,loading:x,onChange:function(e){return e.persist(),n(e.target.value)}}):s.a.createElement("input",{required:d,disabled:E,value:a,onChange:function(e){return n(e.target.value)},maxLength:T,className:"".concat(r," input"),type:c,placeholder:l,style:{borderRight:0}}),i?s.a.createElement("span",{className:"icon is-small is-left"},i):null),M):s.a.createElement("div",{className:"control ".concat(i?"has-icons-left":""," is-expanded")},P?w?s.a.createElement(Be.a,{tagifyRef:m,value:a,settings:{placeholder:l,whitelist:h,mode:null,trim:!0,autoComplete:{enabled:!0,rightKey:!0}},inputMode:"textarea",className:"".concat(r),loading:x,maxLength:T,required:d,disabled:E,onChange:function(e){return n(e.target.value)}}):s.a.createElement("textarea",{required:d,disabled:E,value:a,onChange:function(e){return n(e.target.value)},className:"".concat(r," textarea"),maxLength:T,placeholder:l}):w?s.a.createElement(Be.a,{tagifyRef:m,value:a,settings:{placeholder:l,whitelist:h,mode:f,trim:!0,autoComplete:{enabled:!0,rightKey:!0}},required:d,className:"".concat(r," input"),loading:x,disabled:E,onChange:function(e){return e.persist(),n(e.target.value)}}):s.a.createElement("input",{required:d,disabled:E,value:a,onChange:function(e){return n(e.target.value)},maxLength:T,className:"".concat(r," input"),type:c,placeholder:l}),i?s.a.createElement("span",{className:"icon is-small is-left"},i):null),s.a.createElement("div",{className:"help"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"columns"},D?s.a.createElement("p",{className:"column has-text-left has-text-centered-touch"},D," "):null,I?s.a.createElement("p",{className:"column has-text-right has-text-centered-touch"},I," "):null))))}function He(e){var t=e.disabled,a=e.value,r=e.onChange,c=e.onRemovePhoto,l=Object(n.useRef)(null);return s.a.createElement("div",{className:"field job-form-field has-text-left my-4"},s.a.createElement("label",{className:"label is-flex",style:{justifyContent:"space-between",alignItems:"center"}},s.a.createElement("span",null,"Job Photos")," ",s.a.createElement("span",{className:"has-text-right has-text-weight-normal is-size-7"},"Add photos to help describe this job")),s.a.createElement("div",{className:"control is-expanded"},s.a.createElement("div",{className:"file is-flex is-centered is-normal"},s.a.createElement("label",{className:"file-label is-flex-grow-1"},s.a.createElement("input",{onChange:function(e){if(e.target.files){for(var t=[],a=0;a<(null===(n=e.target.files)||void 0===n?void 0:n.length);a++){var n;t.push(e.target.files[a])}t.length>0&&r(t)}},className:"file-input",multiple:!0,ref:l,disabled:t,type:"file",accept:"image/*"}),s.a.createElement("span",{className:"file-cta is-flex is-flex-centered",style:{width:"100%"}},s.a.createElement("span",{className:"file-icon"},s.a.createElement(ie.B,null)),s.a.createElement("span",{className:"file-label"},"SELECT PHOTOS")))),a&&a.length>0?s.a.createElement("div",{className:"field is-grouped is-grouped-multiline"},a.map((function(e,t){return s.a.createElement("div",{key:"".concat(t,"-").concat(e.name),className:"control mr-2 my-2 "},s.a.createElement("div",{className:"tags has-addons"},s.a.createElement("span",{key:"".concat(e.name,"-").concat(e.size,"-").concat(t),className:"tag is-dark"},e.name),s.a.createElement("button",{onClick:function(){c(t)},className:"tag is-delete"})))}))):null))}function Ke(e){var t=e.onClose,a=e.show,r=e.onComplete,c=Object(n.useContext)(_),o=Object(n.useState)({loading:!1,tasks:"",type:"",title:"",description:"",address:"",requiredPersons:"",price:"",loadingTypes:!0,fetchingLocation:!1,manualAddress:!1,location:null}),m=Object(i.a)(o,2),p=m[0],h=m[1],b=Object(n.useState)([]),v=Object(i.a)(b,2),E=v[0],g=v[1],x=Object(ge.useToasts)().addToast,N=Object(n.useMemo)((function(){return{jobTypes:new Array,location:[]}}),[]),w=Object(n.createRef)(),y=Object(n.createRef)();return Object(n.useEffect)((function(){new Promise(Object(d.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ee.getJobTypes(c);case 3:N.jobTypes=e.sent,t=w.current,console.log(w),t&&(t.settings.whitelist.length=0,t.loading(!0).dropdown.hide.call(t),(a=t.settings.whitelist).push.apply(a,Object(Me.a)(N.jobTypes).concat(Object(Me.a)(t.value))),t.loading(!1).dropdown.hide.call(t,t.value),w.current.settings.whitelist=N.jobTypes),console.log(N.jobTypes,"job types fetched"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),x("Failed to load job types!",{appearance:"error"});case 14:case"end":return e.stop()}}),e,null,[[0,10]])}))))}),[]),s.a.createElement("form",{className:"modal ".concat(a?"is-active":""),onSubmit:function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),t.preventDefault(),h(Object(l.a)(Object(l.a)({},p),{},{loading:!0})),e.prev=3,!(n={date_created:ve.a.firestore.FieldValue.serverTimestamp(),job_title:p.title,job_type:JSON.parse(p.type)[0].value.toLowerCase(),posted_by:null===(a=c.user)||void 0===a?void 0:a.id,salary:parseInt(p.price,10),required_count:parseInt(p.requiredPersons,10),wage:"deployment",status:"available",tasks:JSON.parse(p.tasks).map((function(e){return{id:Object(Ve.a)(),text:e.value}})),location_address:p.address,location:p.location?{coords:{latitude:p.location.coords.latitude,longitude:p.location.coords.longitude,accuracy:p.location.coords.accuracy,altitude:p.location.coords.altitude,heading:p.location.coords.heading,altitudeAccuracy:p.location.coords.altitudeAccuracy,speed:p.location.coords.speed},timestamp:p.location.timestamp}:void 0,job_description:p.description}).job_type||f.a.isEmpty(n.job_type)||N.jobTypes.find((function(e){return e===n.job_type}))){e.next=8;break}return e.next=8,Ee.addJobType(c,n.job_type);case 8:return e.next=10,Ee.addNewJob(c,n,E);case 10:h(Object(l.a)(Object(l.a)({},p),{},{loading:!1})),x("Successfully added job!",{appearance:"success"}),r(),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(3),console.log(e.t0),h(Object(l.a)(Object(l.a)({},p),{},{loading:!1})),x(e.t0.message||"Failed to add job!",{appearance:"error"});case 20:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t){return e.apply(this,arguments)}}()},s.a.createElement("div",{className:"modal-background"}),s.a.createElement("div",{className:"modal-card"},s.a.createElement("header",{className:"modal-card-head"},s.a.createElement("div",{className:"modal-card-title is-mobile is-vcentered columns"},s.a.createElement("div",{className:"column has-text-left"},s.a.createElement("button",{className:"button",onClick:t},s.a.createElement("span",{className:"icon"},s.a.createElement(ie.f,null)),s.a.createElement("span",{className:"is-hidden-mobile"}," View Current Jobs"))),s.a.createElement("div",{className:"column has-text-left-mobile is-10-mobile"},s.a.createElement("span",null,"New Job Listing")),s.a.createElement("a",{className:"column is-hidden-mobile"}))),s.a.createElement("div",{className:"modal-card-body px-0"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"level px-4 pb-4",style:{borderBottom:"solid 1px #1112"}},s.a.createElement("p",{className:"level-item has-text-left is-block is-size-4 has-text-centered-touch"},"Job Details"),s.a.createElement("p",{className:"level-item has-text-right is-block has-text-grey-light has-text-centered-touch"},"All fields are required to be filled out")),s.a.createElement("div",{className:"container is-fluid pb-4 px-0"},s.a.createElement("div",{className:"columns mx-0 px-4"},s.a.createElement("div",{className:"column is-6"},s.a.createElement(Ge,{required:!0,disabled:p.loading,value:p.type,tagifyRef:w,tags:!0,whitelist:N.jobTypes,onChange:function(e){return h((function(t){return Object(l.a)(Object(l.a)({},t),{},{type:e})}))},className:"",containerClassName:"mb-4",label:"Job Type",placeholder:"Begin typing a job type",type:"text",icon:s.a.createElement(ie.x,null),helpTextLeft:"Search and select a job type to improve search results when finding a contractor"}),s.a.createElement(Ge,{required:!0,disabled:p.loading,value:p.title,onChange:function(e){return h(Object(l.a)(Object(l.a)({},p),{},{title:e}))},className:"",containerClassName:"my-4",label:"Title",placeholder:"Provide a title for the job",type:"text",icon:null,helpTextLeft:"Will be seen by contractors in search result and as an active status",helpTextRight:"Maximum 30 characters",maxLength:30}),s.a.createElement(Ge,{required:!0,disabled:p.loading,value:p.description,onChange:function(e){return h(Object(l.a)(Object(l.a)({},p),{},{description:e}))},className:"",containerClassName:"my-4",label:"Description",isTextArea:!0,placeholder:"Provide a description of the job",type:"text",icon:null,helpTextLeft:"Give a short description to improve finding a contractor that fits the job",helpTextRight:"Maximum 80 characters",maxLength:80}),s.a.createElement(Ge,{required:!p.manualAddress,disabled:p.loading||p.fetchingLocation,value:p.address,tagifyRef:y,tags:!p.manualAddress,whitelist:N.location,onChange:function(e){return h((function(t){return Object(l.a)(Object(l.a)({},t),{},{address:e})}))},className:"",containerClassName:"my-4",label:"Location Address",placeholder:"Begin typing the first line of the address",type:"text",icon:s.a.createElement(ie.u,null),hasAddons:!0,addon:s.a.createElement("div",{className:"control"},s.a.createElement("button",{disabled:p.loading||p.fetchingLocation,className:"button ".concat(p.fetchingLocation?"is-loading":""," ").concat(p.manualAddress?"is-info has-text-white":""),onClick:Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=!p.manualAddress)){e.next=25;break}return h(Object(l.a)(Object(l.a)({},p),{},{fetchingLocation:!0})),e.prev=3,e.t0=h,e.t1=l.a,e.t2=Object(l.a)({},p),e.t3={},e.next=10,Ue();case 10:e.t4=e.sent,e.t5={location:e.t4},e.t6=(0,e.t1)(e.t2,e.t3,e.t5),(0,e.t0)(e.t6),x("Using your current location!",{appearance:"success"}),h((function(e){return Object(l.a)(Object(l.a)({},e),{},{address:"",manualAddress:t,fetchingLocation:!1})})),e.next=23;break;case 18:e.prev=18,e.t7=e.catch(3),console.log(e.t7),h((function(e){return Object(l.a)(Object(l.a)({},e),{},{fetchingLocation:!1})})),x(e.t7.message||"Failed to set location manually!",{appearance:"error"});case 23:e.next=26;break;case 25:h((function(e){return Object(l.a)(Object(l.a)({},e),{},{location:null,manualAddress:t})}));case 26:case"end":return e.stop()}}),e,null,[[3,18]])}))),type:"button",style:{color:p.manualAddress?"unset":"black",borderLeft:0,zIndex:4}},s.a.createElement("span",{className:"is-size-7"},p.manualAddress?"using current location":"or use current location")))})),s.a.createElement("div",{className:"column is-6"},s.a.createElement(Ge,{required:!0,disabled:p.loading,value:p.requiredPersons,onChange:function(e){return h(Object(l.a)(Object(l.a)({},p),{},{requiredPersons:e}))},hasAddons:!0,className:"",containerClassName:"mb-4",label:"How many persons are needed for the job",placeholder:"How many persons are needed for the job",type:"number",helpTextRight:"e.g. 10 persons maximum per job",icon:null,addon:s.a.createElement("div",{className:"control"},s.a.createElement("button",{className:"button",disabled:!0,style:{color:"black",borderLeft:0}},"Persons"))}),s.a.createElement(Ge,{required:!0,disabled:p.loading,value:p.price,onChange:function(e){return h(Object(l.a)(Object(l.a)({},p),{},{price:e}))},hasAddons:!0,className:"",containerClassName:"my-4",label:"Pay",placeholder:"Provide an amount",type:"number",helpTextLeft:"Will be seen in search results. Cannot be adjusted once the listing is pending or active",icon:s.a.createElement(ie.l,null),addon:s.a.createElement("div",{className:"control"},s.a.createElement("button",{className:"button",disabled:!0,style:{color:"black",borderLeft:0}},"Per Deployment"))}),s.a.createElement(Ge,{required:!0,disabled:p.loading,value:p.tasks,tags:!0,onChange:function(e){return h((function(t){return Object(l.a)(Object(l.a)({},t),{},{tasks:e})}))},isTextArea:!0,className:"",containerClassName:"my-4",label:"Tasks",placeholder:"Add a task",type:"text",icon:null,helpTextTop:"Provide each task required to be completed for this listing",helpTextRight:"Separate each task with a comma (,)"}),s.a.createElement(He,{disabled:p.loading,value:E,onRemovePhoto:function(e){g(E.filter((function(t,a){return a!==e})))},onChange:function(e){return g(e)}})))))),s.a.createElement("footer",{className:"modal-card-foot is-flex-centered"},s.a.createElement("button",{disabled:p.loading,className:"button",onClick:t},"Cancel"),s.a.createElement("button",{disabled:p.loading,className:"button is-info ".concat(p.loading?"is-loading":""),type:"submit"},"Confirm"))))}var We=a(120),Ye=a(121);function Xe(e){var t=e.className,a=e.activeJobs,n=e.inactiveJobs,r=e.onCreateNew;return s.a.createElement("div",{className:"".concat(t," panel job-panel has-background-white-ter is-flex")},s.a.createElement("div",{className:"panel-heading is-flex is-vcentered"},s.a.createElement("p",{className:"has-text-left"},"Job Listings"),s.a.createElement("a",{className:"button is-small is-rounded",onClick:r},s.a.createElement(We.a,null))),s.a.createElement("div",{className:"panel-block"},s.a.createElement("div",{className:"field has-addons",style:{flex:1}},s.a.createElement("div",{className:"control is-expanded has-icons-left"},s.a.createElement("input",{style:{borderRight:0},className:"input is-rounded",type:"search",placeholder:"Search Jobs..."}),s.a.createElement("span",{className:"icon is-left"},s.a.createElement(ie.x,null))),s.a.createElement("div",{className:"control"},s.a.createElement("button",{style:{borderLeft:0},className:"button is-rounded",onClick:function(){return window.alert("not ready yet!")}},s.a.createElement("span",{className:"icon is-right"},s.a.createElement(Ye.a,null)))))),s.a.createElement("div",{className:"panel-tabs"},s.a.createElement(te.c,{to:"".concat(B),activeClassName:"is-active"},"Active"),s.a.createElement(te.c,{to:"".concat(U),activeClassName:"is-active"},"Inactive")),s.a.createElement("div",{className:"has-background-white-ter",style:{overflowY:"auto",overflowX:"hidden"}},s.a.createElement(o.b,{path:"".concat(B),render:function(){return a.map((function(e){return s.a.createElement(ke,{key:e.id,job:e,to:"".concat(B,"/").concat(e.id)})}))}}),s.a.createElement(o.b,{path:"".concat(U),render:function(){return n.map((function(e){return s.a.createElement(ke,{key:e.id,job:e,to:"".concat(U,"/").concat(e.id)})}))}})))}function Qe(){var e=Object(n.useContext)(_),t=Object(n.useState)({loading:!1,showModal:!1,selected:null}),a=Object(i.a)(t,2),r=a[0],c=a[1],m=Object(n.useState)([]),p=Object(i.a)(m,2),h=p[0],b=p[1],f=Object(n.useState)([]),v=Object(i.a)(f,2),E=v[0],g=v[1],x=Object(ge.useToasts)().addToast,N=Object(o.h)(),w=function(e){var t=function(t){"Escape"===t.key&&e()};return window.document.addEventListener("keydown",t),function(){return window.document.removeEventListener("keydown",t)}}((function(){return c(Object(l.a)(Object(l.a)({},r),{},{showModal:!1}))}));Object(n.useEffect)((function(){return w()}),[]),Object(n.useEffect)((function(){c(Object(l.a)(Object(l.a)({},r),{},{loading:!0}));var t=Ee.listenForActiveAndPendingJobs(function(){var t=Object(d.a)(u.a.mark((function t(a,n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=3;break}return c(Object(l.a)(Object(l.a)({},r),{},{loading:!1})),t.abrupt("return",x(a.message||"Failed to get jobs!"));case 3:return t.next=5,Promise.all(n.map(function(){var t=Object(d.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("available"===a.status||!a.executed_by){t.next=4;break}return t.next=3,C.getExternalUser(e,a.executed_by);case 3:a.user=t.sent;case 4:return t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 5:n=t.sent,c(Object(l.a)(Object(l.a)({},r),{},{loading:!1})),b(n);case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}());return Ee.getInactiveJobs().then(function(){var t=Object(d.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.map(function(){var t=Object(d.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.getExternalUser(e,a.executed_by);case 2:return a.user=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then((function(e){g(e)})).catch((function(e){console.log(e),x(e.message||"Failed to get inactive jobs",{appearance:"error"})})),t}),[]);var y=Object(o.i)().id,j=Object(o.j)({path:V.active,strict:!0,exact:!0}),O=Object(o.j)({path:V.inactive});return Object(n.useEffect)((function(){if(y)if(j){var e=h.find((function(e){return e.id===y}));console.log(y,"active: ",j,O,"selected: ",e),c(Object(l.a)(Object(l.a)({},r),{},{selected:e||null}))}else if(O){var t=E.find((function(e){return e.id===y}));c(Object(l.a)(Object(l.a)({},r),{},{selected:t||null}))}}),[N,h,E]),s.a.createElement("div",{className:"columns is-gapless px-4 py-4 is-fullheight is-multiline"},s.a.createElement(Xe,{activeJobs:h,inactiveJobs:E,onCreateNew:function(){return c(Object(l.a)(Object(l.a)({},r),{},{showModal:!0}))},className:"column is-3 is-12-mobile is-12-touch is-clipped is-fullheight"}),s.a.createElement(Pe,{onCancel:function(e){"complete"===e.status?g(E.filter((function(t){return t.id!==e.id}))):b(h.filter((function(t){return t.id!==e.id}))),c(Object(l.a)(Object(l.a)({},r),{},{selected:null}))},job:y?r.selected:null,className:"column is-9 is-12-touch is-12-mobile is-flex"}),r.showModal?s.a.createElement(Ke,{show:r.showModal,onClose:function(){return c(Object(l.a)(Object(l.a)({},r),{},{showModal:!1}))},onComplete:function(){c(Object(l.a)(Object(l.a)({},r),{},{showModal:!1}))}}):null)}var $e=a(253),Ze=a(162),et=a.n(Ze);function tt(){var e=Object(n.useContext)(_),t=Object(n.useState)({showModal:!1,showCodeRequest:!0,showPassword:!1,showPasswordVerify:!1,loading:!1}),a=Object(i.a)(t,2),r=a[0],c=a[1],m=Object(n.useState)({email:"",first_name:"",last_name:"",password:"",password_verify:"",phone_number:""}),p=Object(i.a)(m,2),h=p[0],b=p[1],f=Object(ge.useToasts)().addToast,v=Object(o.g)(),E=Object(o.h)(),g=Object(n.useCallback)(function(){var t=Object(d.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),a.stopPropagation(),c(Object(l.a)(Object(l.a)({},r),{},{loading:!0})),t.prev=3,t.next=6,e.addAdmin(h);case 6:if((n=t.sent)&&n.success){t.next=9;break}throw new Error("Failed to register user!");case 9:f("User registered successfully!",{appearance:"success"}),c(Object(l.a)(Object(l.a)({},r),{},{loading:!1})),v.push(A,E.state),t.next=19;break;case 14:t.prev=14,t.t0=t.catch(3),console.log(t.t0),f(t.t0.message||"Failed to add new user!",{appearance:"error"}),c(Object(l.a)(Object(l.a)({},r),{},{loading:!1}));case 19:case"end":return t.stop()}}),t,null,[[3,14]])})));return function(e){return t.apply(this,arguments)}}(),[r,h]);return s.a.createElement("div",{className:"section"},s.a.createElement("figure",{className:"image is-96x96 is-flex",style:{margin:"auto"}},s.a.createElement("img",{src:et.a,className:"is-rounded"})),s.a.createElement("p",{className:"help mb-4 has-text-weight-bold"},"Improving the experience of managing temporary services"),s.a.createElement("form",{className:"my-2",onSubmit:g},s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control has-icons-left "},s.a.createElement("input",{autoComplete:"given-name",disabled:r.loading,required:!0,value:h.first_name,onChange:function(e){return b(Object(l.a)(Object(l.a)({},h),{},{first_name:e.target.value}))},placeholder:"enter firstname",className:"input",type:"text"}),s.a.createElement("span",{className:"icon is-left is-small"},s.a.createElement(ie.C,null)))),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control has-icons-left "},s.a.createElement("input",{autoComplete:"family-name",disabled:r.loading,required:!0,value:h.last_name,onChange:function(e){return b(Object(l.a)(Object(l.a)({},h),{},{last_name:e.target.value}))},placeholder:"enter lastname",className:"input",type:"text"}),s.a.createElement("span",{className:"icon is-left is-small"},s.a.createElement(ie.C,null)))))),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control has-icons-left "},s.a.createElement("input",{autoComplete:"off",disabled:r.loading,required:!0,value:h.email,onChange:function(e){return b(Object(l.a)(Object(l.a)({},h),{},{email:e.target.value}))},placeholder:"enter your email address",className:"input",type:"email"}),s.a.createElement("span",{className:"icon is-left is-small"},s.a.createElement(ie.m,null)))),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control has-icons-left "},s.a.createElement("input",{autoComplete:"off",disabled:r.loading,required:!0,value:h.phone_number,onChange:function(e){return b(Object(l.a)(Object(l.a)({},h),{},{phone_number:e.target.value}))},placeholder:'enter your phone number include the "+" sign',className:"input",type:"tel"}),s.a.createElement("span",{className:"icon is-left is-small"},s.a.createElement(ie.w,null)))),s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field has-addons"},s.a.createElement("div",{className:"control has-icons-left is-expanded"},s.a.createElement("input",{autoComplete:"off",disabled:r.loading,required:!0,value:h.password,onChange:function(e){return b(Object(l.a)(Object(l.a)({},h),{},{password:e.target.value}))},placeholder:"enter your password",className:"input",type:r.showPassword?"text":"password"}),s.a.createElement("span",{className:"icon is-left is-small"},s.a.createElement(ie.t,null))),s.a.createElement("div",{className:"control"},s.a.createElement("button",{className:"button",type:"button",onClick:function(e){return c(Object(l.a)(Object(l.a)({},r),{},{showPassword:!r.showPassword}))}},r.showPassword?s.a.createElement(ie.q,null):s.a.createElement(ie.p,null)))),s.a.createElement("div",{className:"field has-addons"},s.a.createElement("div",{className:"control has-icons-left is-expanded"},s.a.createElement("input",{autoComplete:"off",disabled:r.loading,required:!0,value:h.password_verify,onChange:function(e){return b(Object(l.a)(Object(l.a)({},h),{},{password_verify:e.target.value}))},placeholder:"re-enter your password",className:"input",type:r.showPasswordVerify?"text":"password"}),s.a.createElement("span",{className:"icon is-left is-small"},s.a.createElement(ie.t,null))),s.a.createElement("div",{className:"control"},s.a.createElement("button",{className:"button",type:"button",onClick:function(e){return c(Object(l.a)(Object(l.a)({},r),{},{showPasswordVerify:!r.showPasswordVerify}))}},r.showPasswordVerify?s.a.createElement(ie.q,null):s.a.createElement(ie.p,null)))))),s.a.createElement("div",{className:"field mt-6"},s.a.createElement("div",{className:"control"},s.a.createElement("button",{disabled:r.loading,className:"button is-rounded is-fullwidth is-uppercase is-success ".concat(r.loading?"is-loading":""),type:"submit"},s.a.createElement(ie.D,null),"\xa0 Register")))),s.a.createElement("div",{className:"section mt-6 is-size-7"},s.a.createElement("p",null,"Already have an account?"),s.a.createElement(te.b,{to:A},"Click here to login")))}function at(){var e=Object(n.useContext)(_),t=(Object(n.useContext)(L),Object(n.useState)({showCodeRequest:!0,loading:!1,phone:""})),a=Object(i.a)(t,2),r=a[0],c=a[1],o=Object(ge.useToasts)().addToast,m=Object(n.useCallback)(function(){var t=Object(d.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(Object(l.a)(Object(l.a)({},r),{},{loading:!0})),t.prev=1,t.next=4,e.validateNumber(a.phone);case 4:return t.next=6,e.triggerVerification(a.phone,null===a||void 0===a?void 0:a.channel);case 6:if(t.sent){t.next=9;break}throw new Error("Failed to verify phone number!");case 9:return o("Verification code sent to your phone!",{appearance:"success"}),c(Object(l.a)(Object(l.a)({},r),{},{loading:!1,phone:a.phone})),t.abrupt("return",!0);case 14:return t.prev=14,t.t0=t.catch(1),console.log(t.t0),o(t.t0.message||"Verification failed!",{appearance:"error"}),c(Object(l.a)(Object(l.a)({},r),{},{loading:!1})),t.abrupt("return",!1);case 20:case"end":return t.stop()}}),t,null,[[1,14]])})));return function(e){return t.apply(this,arguments)}}(),[r]),p=Object(n.useCallback)(function(){var t=Object(d.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(Object(l.a)(Object(l.a)({},r),{},{loading:!0})),t.prev=1,t.next=4,e.login(a.phone_number,a.code,a.password);case 4:if(t.sent){t.next=7;break}throw new Error("Failed to login!");case 7:return o("Login successful!",{appearance:"success"}),c(Object(l.a)(Object(l.a)({},r),{},{loading:!1})),t.abrupt("return",!0);case 12:return t.prev=12,t.t0=t.catch(1),console.log(t.t0),o(t.t0.message||"Login failed!",{appearance:"error"}),c(Object(l.a)(Object(l.a)({},r),{},{loading:!1})),t.abrupt("return",!1);case 18:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}(),[r]);return s.a.createElement("div",{className:"section"},s.a.createElement("figure",{className:"image is-96x96 is-flex",style:{margin:"auto"}},s.a.createElement("img",{src:et.a,className:"is-rounded"})),s.a.createElement("p",{className:"help mb-4 has-text-weight-bold"},"Improving the experience of managing temporary services"),r.showCodeRequest?s.a.createElement(nt,{onComplete:function(){return c(Object(l.a)(Object(l.a)({},r),{},{showCodeRequest:!1}))},loading:r.loading,onSubmit:m}):s.a.createElement(st,{onCancel:function(){return c(Object(l.a)(Object(l.a)({},r),{},{showCodeRequest:!0}))},loading:r.loading,phone:r.phone,onSubmit:p}),s.a.createElement("div",{className:"section mt-6 is-size-7"},s.a.createElement("p",null,"Are you a new user?"),s.a.createElement(te.b,{to:D},"Request access")))}function nt(e){var t,a=e.onSubmit,r=e.loading,c=e.onComplete,o=Object(n.useState)({phone:"",channel:"sms"}),m=Object(i.a)(o,2),p=m[0],h=m[1],b=Object(n.useState)({showOptions:!1,hold:!1,holdTimer:0}),f=Object(i.a)(b,2),v=f[0],E=f[1],g=Object(n.useCallback)(function(){var e=Object(d.a)(u.a.mark((function e(n){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),n.stopPropagation(),e.next=4,a(p);case 4:e.sent&&(s=59,clearInterval(t),t=setInterval((function(){if(0===s)return clearInterval(t),void E(Object(l.a)(Object(l.a)({},v),{},{hold:!1,showOptions:!0,holdTimer:s}));E(Object(l.a)(Object(l.a)({},v),{},{hold:!0,holdTimer:s,showOptions:!0})),s--}),1e3));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[p,v]);return s.a.createElement("form",{onSubmit:g},s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control has-icons-left "},s.a.createElement("input",{autoComplete:"off",disabled:r||v.hold,required:!0,value:p.phone,onChange:function(e){return h(Object(l.a)(Object(l.a)({},p),{},{phone:e.target.value}))},placeholder:"enter your phone number",className:"input is-rounded",type:"tel"}),s.a.createElement("span",{className:"icon is-left is-small"},s.a.createElement(ie.w,null)))),s.a.createElement("div",{className:"field mt-4"},s.a.createElement("div",{className:"control"},v.showOptions?s.a.createElement("button",{onClick:c,disabled:r,className:"button is-rounded is-uppercase is-success ".concat(r?"is-loading":""),type:"button"},s.a.createElement(ie.a,null),"\xa0 Proceed"):s.a.createElement("button",{disabled:r||v.hold,className:"button is-rounded is-uppercase is-info ".concat(r?"is-loading":""),type:"submit"},"sms"===p.channel?s.a.createElement(s.a.Fragment,null,s.a.createElement(ie.z,null),"\xa0 Send Code"):s.a.createElement(s.a.Fragment,null,s.a.createElement(ie.w,null),"\xa0 Call Me")))),s.a.createElement("div",{className:"field is-size-7"},v.showOptions?s.a.createElement(s.a.Fragment,null,s.a.createElement("p",{className:"help mt-4 mb-2"},"Didn't get code? ",v.hold?s.a.createElement("span",{className:"has-text-danger"},"Try again in: ",v.holdTimer,"s"):null),s.a.createElement("div",{className:"control buttons has-addons is-centered"},s.a.createElement("button",{onClick:function(){E(Object(l.a)(Object(l.a)({},v),{},{showOptions:!1}))},disabled:r||v.hold,className:"button has-text-weight-bold is-info is-outlined is-small is-rounded is-uppercase",type:"button"},s.a.createElement("span",{className:"is-size-7"},"Try Again")),s.a.createElement("button",{onClick:function(){h(Object(l.a)(Object(l.a)({},p),{},{channel:"sms"===p.channel?"call":"sms"})),E(Object(l.a)(Object(l.a)({},v),{},{showOptions:!1}))},disabled:r||v.hold,className:"button has-text-weight-bold is-info is-outlined is-small is-rounded is-uppercase",type:"button"},s.a.createElement("span",{className:"is-size-7"}," ","sms"===p.channel?"Use voice":"Use SMS")))):null))}function st(e){var t=e.phone,a=e.loading,r=e.onSubmit,c=e.onCancel,o=Object(n.useState)({code:"",phone_number:t,password:"",showPassword:!1}),m=Object(i.a)(o,2),p=m[0],h=m[1],b=Object(n.useCallback)(function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),t.stopPropagation(),e.next=4,r(p);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[p]);return s.a.createElement("form",{onSubmit:b},s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control has-icons-left"},s.a.createElement("input",{autoComplete:"off",disabled:!0,required:!0,value:p.phone_number,placeholder:"enter your phone number",className:"input",type:"tel"}),s.a.createElement("span",{className:"icon is-left is-small"},s.a.createElement(ie.C,null)))),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control has-icons-left"},s.a.createElement("input",{autoComplete:"off",pattern:"/.{4}/",max:9999,maxLength:4,minLength:4,disabled:p.loading,required:!0,value:p.code,onChange:function(e){return h(Object(l.a)(Object(l.a)({},p),{},{code:e.target.value}))},placeholder:"enter 4 digits code",className:"input",type:"number"}),s.a.createElement("span",{className:"icon is-left is-small"},s.a.createElement($e.a,null)))),s.a.createElement("div",{className:"field has-addons"},s.a.createElement("div",{className:"control has-icons-left is-expanded"},s.a.createElement("input",{autoComplete:"off",disabled:p.loading,required:!0,value:p.password,onChange:function(e){return h(Object(l.a)(Object(l.a)({},p),{},{password:e.target.value}))},placeholder:"enter your password",className:"input",type:p.showPassword?"text":"password"}),s.a.createElement("span",{className:"icon is-left is-small"},s.a.createElement(ie.t,null))),s.a.createElement("div",{className:"control"},s.a.createElement("button",{className:"button",type:"button",onClick:function(e){return h(Object(l.a)(Object(l.a)({},p),{},{showPassword:!p.showPassword}))}},p.showPassword?s.a.createElement(ie.q,null):s.a.createElement(ie.p,null)))),s.a.createElement("div",{className:"field mt-6"},s.a.createElement("div",{className:"control buttons is-centered"},s.a.createElement("button",{onClick:c,disabled:a,className:"button is-rounded is-uppercase is-dark is-outlined",type:"button"},s.a.createElement(ie.f,null),"\xa0 Back"),s.a.createElement("button",{disabled:a,className:"button is-rounded is-uppercase is-success ".concat(a?"is-loading":""),type:"submit"},s.a.createElement(ie.y,null),"\xa0 Login"))))}function rt(){var e=Object(n.useContext)(L),t=Object(n.useState)({showModal:!1}),a=Object(i.a)(t,2);a[0],a[1];return Object(n.useEffect)((function(){return e.showToolbar(!1),e.showFooter(!1),function(){e.showToolbar(!0),e.showFooter(!0)}})),s.a.createElement(re,null,s.a.createElement("div",{className:"columns is-gapless is-fullheight is-multiline"},s.a.createElement("div",{className:"column is-flex-centered is-atleast-fullheight"},s.a.createElement(at,null)),s.a.createElement("div",{className:"column is-6 is-hidden-touch is-flex has-background-info"})))}function ct(){var e=Object(n.useContext)(_),t=Object(n.useContext)(L);return Object(n.useEffect)((function(){return t.setAppReady(!1),t.showToolbar(!1),e.logout(),function(){t.showToolbar(!0),t.setAppReady(!0)}}),[]),t.signedIn&&t.signedIn?s.a.createElement(s.a.Fragment,null):s.a.createElement(o.a,{to:{pathname:"/"}})}var lt=a(163);function it(e){var t=e.message,a=Ne.a.unix(t.timestamp/1e3);return s.a.createElement(te.c,{activeClassName:"is-active",to:"./",className:"message-item mb-8 is-block card is-shadowless has-background-white-ter"},s.a.createElement("div",{className:"card-content"},s.a.createElement("div",{className:"container is-paddingless"},s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-narrow is-flex",style:{justifyContent:"center"}},s.a.createElement("figure",{className:"image is-flex is-48x48"},s.a.createElement("img",{className:"is-rounded",src:t.author.profileImageURL}))),s.a.createElement("div",{className:"column"},s.a.createElement("div",{className:"columns mb-0 is-mobile name-bar"},s.a.createElement("div",{className:"has-text-left column is-narrow is-size-5 has-text-weight-medium"},s.a.createElement("p",null,"".concat(t.author.firstName," ").concat(t.author.lastName))),s.a.createElement("div",{className:"has-text-right column"},s.a.createElement("p",null,a.calendar()))),s.a.createElement("div",{className:"content has-text-left"},s.a.createElement("p",null,t.content)))))))}function ot(e){var t=e.onCreateNew,a=void 0===t?function(){}:t,n=e.className,r=void 0===n?"":n;return s.a.createElement("div",{className:"".concat(r," panel job-panel has-background-white-ter is-flex")},s.a.createElement("div",{className:"panel-heading is-flex is-vcentered"},s.a.createElement("p",{className:"has-text-left"},"Recent Messages"),s.a.createElement("div",{className:"field is-grouped is-grouped-right"},s.a.createElement("button",{className:"button is-rounded",onClick:a},s.a.createElement(We.a,null)),s.a.createElement("button",{className:"button is-rounded",onClick:a},s.a.createElement(lt.a,null)))),s.a.createElement("div",{className:"panel-block"},s.a.createElement("div",{className:"field has-addons",style:{flex:1}},s.a.createElement("div",{className:"control is-expanded has-icons-left"},s.a.createElement("input",{style:{borderRight:0},className:"input is-rounded",type:"search",placeholder:"Search Messages..."}),s.a.createElement("span",{className:"icon is-left"},s.a.createElement(ie.x,null))),s.a.createElement("div",{className:"control"},s.a.createElement("button",{style:{borderLeft:0},className:"button is-rounded",onClick:function(){return window.alert("not ready yet")}},s.a.createElement("span",{className:"icon is-right"},s.a.createElement(Ye.a,null)))))),s.a.createElement("div",{className:"has-background-white-ter",style:{overflowY:"auto",overflowX:"hidden"}},ut.map((function(e){return s.a.createElement(it,{message:e})}))))}function mt(e){var t=e.message,a=e.className,n=e.contact;return t&&n?s.a.createElement("div",{className:"".concat(a," card job-detail"),style:{flexDirection:"column"}},s.a.createElement("div",{className:"card-content is-paddingless"},s.a.createElement("div",{className:"level py-4 mb-0"},s.a.createElement("div",{className:"level-item is-size-6"}),s.a.createElement("div",{className:"level-item is-size-4 has-text-weight-bold"},"".concat(n.firstName," ").concat(n.lastName)),s.a.createElement("div",{className:"level-item is-size-6 pr-4",style:{justifyContent:"flex-end"}},s.a.createElement("button",{className:"button is-rounded"},s.a.createElement(lt.a,null)))),s.a.createElement("div",{className:"container is-fluid px-0"},s.a.createElement("div",{className:"columns is-fullheight mx-0 is-multiline"},s.a.createElement("div",{className:"column is-8-fullhd is-7-desktop is-12 px-0"}),s.a.createElement("div",{className:"column is-4-fullhd is-5-desktop is-12 is-flex"}))))):s.a.createElement("div",{className:"".concat(a," card job-detail"),style:{flexDirection:"column"}},s.a.createElement("div",{className:"card-content is-paddingless is-flex-centered has-text-grey my-6"},s.a.createElement("span",{className:"my-4"},s.a.createElement(ie.j,{fill:"#811",style:{height:"8rem",width:"8rem"}})),s.a.createElement("p",{className:"is-uppercase is-size-6 has-text-weight-bold"},"Select a contact to start a chat")))}var ut=[{content:"hello",author:P,timestamp:Date.now(),type:"text",id:"abcdefgh"}];function dt(){return s.a.createElement("div",{className:"columns is-gapless px-4 py-4 is-fullheight is-multiline"},s.a.createElement(ot,{onCreateNew:function(){},className:"column is-3 is-12-touch is-clipped is-fullheight"}),s.a.createElement(mt,{message:ut,contact:P,className:"column is-9 is-12-touch is-flex"}))}function pt(){var e=Object(n.useContext)(L),t=Object(n.useState)({showModal:!1}),a=Object(i.a)(t,2),r=(a[0],a[1],Object(n.useState)({first_name:"",last_name:"",password:"",password_verify:"",email:"",phone_number:"",showPassword:!1,showPasswordVerify:!1})),c=Object(i.a)(r,2);c[0],c[1];return Object(n.useEffect)((function(){return e.showToolbar(!1),e.showFooter(!1),function(){e.showFooter(!0),e.showToolbar(!0)}})),s.a.createElement(re,null,s.a.createElement("div",{className:"columns is-gapless is-fullheight is-multiline"},s.a.createElement("div",{className:"column is-flex-centered is-atleast-fullheight"},s.a.createElement(tt,null)),s.a.createElement("div",{className:"column is-6 is-hidden-touch is-flex has-background-success"})))}function ht(e){var t=e.title,a=e.children,n=void 0===a?s.a.createElement(s.a.Fragment,null):a;return s.a.createElement("div",{className:"container is-fluid settings-detail"},s.a.createElement("div",{className:"content mb-0 py-4"},s.a.createElement("p",{className:"has-text-weight-bold is-size-4 has-text-left has-text-centered-mobile"},t)),n)}function bt(){Object(n.useContext)(_);return s.a.createElement("div",{className:"columns is-gapless px-4 py-4 is-fullheight is-multiline"},s.a.createElement("div",{className:"box px-0 py-0",style:{flexDirection:"column",flex:1}},s.a.createElement("div",{className:"card-content is-paddingless is-atleast-fullheight is-flex",style:{flexDirection:"column"}},s.a.createElement("div",{className:"level py-4 mb-0",style:{boxShadow:"0 0.125em 0.25em rgba(10, 10, 10, .1)"}},s.a.createElement("div",{className:"level-left-item is-size-6"},s.a.createElement("p",{className:"title is-size-6 has-text-weight-bold pl-4"},"Settings"))),s.a.createElement("div",{className:"container is-flex is-fluid px-0"},s.a.createElement("div",{className:"columns mx-0 is-multiline",style:{flexGrow:1}},s.a.createElement("div",{className:"column is-2-fullhd is-3-desktop is-12 px-0"},s.a.createElement("div",{className:"container"},s.a.createElement(te.c,{className:"has-text-black",activeClassName:"is-active",to:Q,exact:!0},s.a.createElement("div",{className:"py-4 is-size-5 settings-link"},s.a.createElement("p",{className:"mx-4"},"Login and Security"))),s.a.createElement(te.c,{className:"has-text-black",activeClassName:"is-active",to:$},s.a.createElement("div",{className:"py-4 is-size-5 settings-link"},s.a.createElement("p",{className:"mx-4"},"Payment Methods"))),s.a.createElement(te.c,{className:"has-text-black",activeClassName:"is-active",to:Z},s.a.createElement("div",{className:"py-4 is-size-5 settings-link"},s.a.createElement("p",{className:"mx-4"},"Additional Features"))),s.a.createElement(te.c,{className:"has-text-black",activeClassName:"is-active",to:ee},s.a.createElement("div",{className:"py-4 is-size-5 settings-link"},s.a.createElement("p",{className:"mx-4"},"Legal Documents"))))),s.a.createElement("div",{className:"column is-10-fullhd is-9-desktop is-12 is-flex px-0"},s.a.createElement(o.d,null,s.a.createElement(o.b,{path:Q,exact:!0,render:function(){return s.a.createElement(ft,null)}}),s.a.createElement(o.b,{path:$,exact:!0,render:function(){return s.a.createElement(vt,null)}}),s.a.createElement(o.b,{path:ee,exact:!0,render:function(){return s.a.createElement(Et,null)}}),s.a.createElement(o.b,{render:function(){return s.a.createElement("div",{className:"container is-fluid is-flex-centered settings-detail py-6"},s.a.createElement("div",{className:"content has-text-grey"},s.a.createElement("span",{className:"my-4"},s.a.createElement(ie.i,{fill:"#811",style:{height:"8rem",width:"8rem"}})),s.a.createElement("p",{className:"is-uppercase is-size-6 has-text-weight-bold"},"Manage your account")))}}))))))))}function ft(){var e,t,a,r,c=Object(n.useContext)(_),o=Object(n.useState)({email:null===(e=c.user)||void 0===e?void 0:e.email,editEmail:!1,isLoadingEmail:!1,lastPasswordChanged:(null===(t=c.user)||void 0===t?void 0:t.lastPasswordChanged)?Object(xe.unix)((null===(a=c.user)||void 0===a?void 0:a.lastPasswordChanged)/1e3):null}),m=Object(i.a)(o,2),u=m[0],d=m[1];return s.a.createElement(ht,{title:"Login and Security",children:s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column has-text-left has-text-centered-mobile"},s.a.createElement("p",{className:"title input is-size-5 pb-2 is-shadowless px-0",style:{border:0}},"Email Address"),s.a.createElement("p",{className:"subtitle has-text-grey"},"Email address connected to your account")),s.a.createElement("div",{className:"column has-text-right has-text-centered-mobile"},s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input ".concat(u.editEmail?"":"is-static"," has-text-black is-size-5 has-text-right has-text-centered-mobile"),value:u.email,contentEditable:!1,disabled:!u.editEmail,onChange:function(e){return d(Object(l.a)(Object(l.a)({},u),{},{email:e.target.value}))}})),s.a.createElement("div",{className:"field is-grouped is-grouped-right"},s.a.createElement("div",{className:"control"},s.a.createElement("button",{className:"button",onClick:function(){return d(Object(l.a)(Object(l.a)({},u),{},{editEmail:!u.editEmail}))}},"Change")),u.editEmail?s.a.createElement("div",{className:"control"},s.a.createElement("button",{className:"button is-info ".concat(u.isLoadingEmail?"is-loading":""),onClick:function(){d(Object(l.a)(Object(l.a)({},u),{},{isLoadingEmail:!0}))}},"Change")):null))),s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column has-text-left has-text-centered-mobile"},s.a.createElement("p",{className:"title input is-size-5 pb-2 is-shadowless px-0",style:{border:0}},"Phone Number"),s.a.createElement("p",{className:"subtitle has-text-grey"},"Your phone number provided upon signing-up")),s.a.createElement("div",{className:"column has-text-right has-text-centered-mobile"},s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input is-static has-text-right has-text-black is-size-5 has-text-centered-mobile",disabled:!0,value:null===(r=c.user)||void 0===r?void 0:r.phoneNumber})),s.a.createElement("p",{className:"subtitle has-text-grey"},"Due to restrictions, contact support to modify your phone number"))),s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column has-text-left has-text-centered-mobile"},s.a.createElement("p",{className:"title input is-size-5 pb-2 is-shadowless px-0",style:{border:0}},"Password"),s.a.createElement("p",{className:"subtitle has-text-grey"},"Maintain a strong, unique password to protect your account")),s.a.createElement("div",{className:"column has-text-right has-text-centered-mobile"},s.a.createElement("div",{className:"control title"},s.a.createElement("button",{className:"button is-link",onClick:function(){return d(Object(l.a)(Object(l.a)({},u),{},{editEmail:!u.editEmail}))}},"Change")),s.a.createElement("p",{className:"subtitle has-text-grey"},u.lastPasswordChanged?"Last modified ".concat(u.lastPasswordChanged.calendar()):"Never Changed"))))})}function vt(){var e,t,a,r=Object(n.useContext)(_),c=Object(n.useState)({email:null===(e=r.user)||void 0===e?void 0:e.email,editEmail:!1,isLoadingEmail:!1,lastPasswordChanged:(null===(t=r.user)||void 0===t?void 0:t.lastPasswordChanged)?Object(xe.unix)((null===(a=r.user)||void 0===a?void 0:a.lastPasswordChanged)/1e3):null}),l=Object(i.a)(c,2);l[0],l[1];return s.a.createElement(ht,{title:"Payment Methods",children:s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"columns is-unselectable"},s.a.createElement("div",{className:"column has-text-left has-text-centered-mobile"},s.a.createElement("p",{className:"title is-size-5 pb-2 is-shadowless px-0",style:{border:0}},"Preferred Method"),s.a.createElement("p",{className:"subtitle has-text-grey"},"Selected method of payment for jobs")),s.a.createElement("div",{className:"column has-text-right has-text-centered-mobile"},s.a.createElement("p",{className:"is-size-5 pb-2 is-shadowless px-0",style:{border:0}},"VI 534***1234 12/22"),s.a.createElement(te.b,{to:"".concat($,"/change")},"Change"))),s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column has-text-left has-text-centered-mobile"},s.a.createElement("p",{className:"title is-size-5 pb-2 is-shadowless px-0",style:{border:0}},"Other Methods"))),s.a.createElement("div",{className:"columns",style:{borderTop:0}},s.a.createElement("div",{className:"column has-text-right has-text-centered-mobile"},s.a.createElement("div",{className:"button is-white is-large"},s.a.createElement("span",{className:"icon"},s.a.createElement(ie.b,{size:80})),s.a.createElement("span",null,"Apple Pay"),s.a.createElement("span",{className:"icon"},s.a.createElement(ie.g,{size:20}))))),s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column has-text-right has-text-centered-mobile"},s.a.createElement("div",{className:"button is-white is-large"},s.a.createElement("span",{className:"icon"},s.a.createElement(ie.v,{size:80})),s.a.createElement("span",null,"PayPal"),s.a.createElement("span",{className:"icon"},s.a.createElement(ie.g,{size:20}))))),s.a.createElement("div",{className:"columns",style:{borderBottom:0}},s.a.createElement("div",{className:"column has-text-right has-text-centered-mobile"},s.a.createElement(te.b,{to:"".concat($,"/add")},"+ Add a Payment Method"))))})}function Et(){var e,t,a,r=Object(n.useContext)(_),c=Object(n.useState)({email:null===(e=r.user)||void 0===e?void 0:e.email,editEmail:!1,isLoadingEmail:!1,lastPasswordChanged:(null===(t=r.user)||void 0===t?void 0:t.lastPasswordChanged)?Object(xe.unix)((null===(a=r.user)||void 0===a?void 0:a.lastPasswordChanged)/1e3):null}),l=Object(i.a)(c,2);l[0],l[1];return s.a.createElement(ht,{title:"Legal Documents",children:s.a.createElement(s.a.Fragment,null,s.a.createElement(te.b,{to:"".concat(ee,"/useragreement"),className:"columns is-vcentered is-unselectable"},s.a.createElement("div",{className:"column has-text-left has-text-centered-mobile"},s.a.createElement("p",{className:"title is-size-5 pb-2 px-0"},"User Agreement")),s.a.createElement("div",{className:"column has-text-right has-text-centered-mobile"},s.a.createElement("p",{className:"is-size-5 pb-2 px-0",style:{border:0}},s.a.createElement("span",{className:"icon"},s.a.createElement(ie.g,null))))),s.a.createElement(te.b,{to:"".concat(ee,"/privacy"),className:"columns is-vcentered is-unselectable"},s.a.createElement("div",{className:"column has-text-left has-text-centered-mobile"},s.a.createElement("p",{className:"title is-size-5 pb-2 px-0"},"Privacy Policy")),s.a.createElement("div",{className:"column has-text-right has-text-centered-mobile"},s.a.createElement("p",{className:"is-size-5 pb-2 px-0",style:{border:0}},s.a.createElement("span",{className:"icon"},s.a.createElement(ie.g,null))))),s.a.createElement(te.b,{to:"".concat(ee,"/terms"),className:"columns is-vcentered is-unselectable"},s.a.createElement("div",{className:"column has-text-left has-text-centered-mobile"},s.a.createElement("p",{className:"title is-size-5 pb-2 px-0"},"Terms of Service")),s.a.createElement("div",{className:"column has-text-right has-text-centered-mobile"},s.a.createElement("p",{className:"is-size-5 pb-2 px-0",style:{border:0}},s.a.createElement("span",{className:"icon"},s.a.createElement(ie.g,null))))),s.a.createElement(te.b,{to:"".concat(ee,"/cookie"),className:"columns is-vcentered is-unselectable"},s.a.createElement("div",{className:"column has-text-left has-text-centered-mobile"},s.a.createElement("p",{className:"title is-size-5 pb-2 px-0"},"Cookie Policy")),s.a.createElement("div",{className:"column has-text-right has-text-centered-mobile"},s.a.createElement("p",{className:"is-size-5 pb-2 px-0",style:{border:0}},s.a.createElement("span",{className:"icon"},s.a.createElement(ie.g,null))))))})}var gt=function(){var e=Object(n.useContext)(_),t=Object(n.useState)({ready:!1}),a=Object(i.a)(t,2),r=a[0],c=a[1],m=Object(n.useState)(!0),u=Object(i.a)(m,2),d=u[0],p=u[1],h=Object(n.useState)(!0),b=Object(i.a)(h,2),f=b[0],v=b[1],E=Object(n.useState)(null),g=Object(i.a)(E,2),x={signedIn:g[0],setSignedIn:g[1],setAppReady:function(e){return c(Object(l.a)(Object(l.a)({},r),{},{ready:e}))},showToolbar:v,showFooter:function(e){return p(e)}};return Object(n.useEffect)((function(){e.loginListener=function(){e.signedIn()&&x.setSignedIn(e.user)},e.logoutListener=function(){return x.setSignedIn(null)},e.ready.then((function(e){if(!e)return console.log("Failed to start application due to an internal error.","Please contact application admin");c(Object(l.a)(Object(l.a)({},r),{},{ready:!0}))})).catch((function(e){console.log(e)}))}),[]),s.a.createElement(L.Provider,{value:x},r.ready?s.a.createElement(s.a.Fragment,null,f?s.a.createElement(oe,null):null,s.a.createElement("div",{className:"App-Body"},s.a.createElement("div",{className:"is-fullheight"},s.a.createElement(o.d,null,s.a.createElement(o.b,{component:rt,path:A,exact:!0}),s.a.createElement(o.b,{component:pt,path:D,exact:!0}),s.a.createElement(o.b,{component:ct,path:Y,exact:!0}),s.a.createElement(se,{component:bt,path:X}),s.a.createElement(se,{render:function(e){return s.a.createElement(o.a,{to:{pathname:B,state:e.location.state}})},path:J,exact:!0}),s.a.createElement(o.b,{component:Qe,path:V.active}),s.a.createElement(se,{component:Qe,path:V.inactive}),s.a.createElement(se,{component:dt,path:R}),s.a.createElement(o.b,{component:Fe,path:F,exact:!0}),s.a.createElement(o.b,{path:q,strict:!1,exact:!0},e.signedIn()&&x.signedIn?s.a.createElement(o.a,{to:F}):s.a.createElement(o.a,{to:A})),s.a.createElement(se,null)))),d?s.a.createElement(ae,null):null):s.a.createElement(ue,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(ge.ToastProvider,{autoDismiss:5e3,placement:"top-center"},s.a.createElement(te.a,{basename:"/contractoradmin"},s.a.createElement(_.Provider,{value:z},s.a.createElement(gt,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[257,1,2]]]);
//# sourceMappingURL=main.f1cc9d7b.chunk.js.map